var AS=Object.defineProperty;var CS=(t,e,n)=>e in t?AS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var te=(t,e,n)=>CS(t,typeof e!="symbol"?e+"":e,n);function kS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function PS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var w_={exports:{}},Iu={},b_={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qa=Symbol.for("react.element"),RS=Symbol.for("react.portal"),NS=Symbol.for("react.fragment"),jS=Symbol.for("react.strict_mode"),DS=Symbol.for("react.profiler"),MS=Symbol.for("react.provider"),OS=Symbol.for("react.context"),VS=Symbol.for("react.forward_ref"),LS=Symbol.for("react.suspense"),FS=Symbol.for("react.memo"),zS=Symbol.for("react.lazy"),dy=Symbol.iterator;function BS(t){return t===null||typeof t!="object"?null:(t=dy&&t[dy]||t["@@iterator"],typeof t=="function"?t:null)}var E_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S_=Object.assign,T_={};function $i(t,e,n){this.props=t,this.context=e,this.refs=T_,this.updater=n||E_}$i.prototype.isReactComponent={};$i.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function I_(){}I_.prototype=$i.prototype;function am(t,e,n){this.props=t,this.context=e,this.refs=T_,this.updater=n||E_}var lm=am.prototype=new I_;lm.constructor=am;S_(lm,$i.prototype);lm.isPureReactComponent=!0;var fy=Array.isArray,A_=Object.prototype.hasOwnProperty,cm={current:null},C_={key:!0,ref:!0,__self:!0,__source:!0};function k_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)A_.call(e,r)&&!C_.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Qa,type:t,key:i,ref:o,props:s,_owner:cm.current}}function US(t,e){return{$$typeof:Qa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function um(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qa}function $S(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var my=/\/+/g;function Dh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$S(""+t.key):e.toString(36)}function oc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qa:case RS:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Dh(o,0):r,fy(s)?(n="",t!=null&&(n=t.replace(my,"$&/")+"/"),oc(s,e,n,"",function(c){return c})):s!=null&&(um(s)&&(s=US(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(my,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",fy(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Dh(i,a);o+=oc(i,e,n,l,s)}else if(l=BS(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Dh(i,a++),o+=oc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tl(t,e,n){if(t==null)return t;var r=[],s=0;return oc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function WS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ct={current:null},ac={transition:null},HS={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:ac,ReactCurrentOwner:cm};function P_(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Tl,forEach:function(t,e,n){Tl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tl(t,function(){e++}),e},toArray:function(t){return Tl(t,function(e){return e})||[]},only:function(t){if(!um(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=$i;ne.Fragment=NS;ne.Profiler=DS;ne.PureComponent=am;ne.StrictMode=jS;ne.Suspense=LS;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HS;ne.act=P_;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=S_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=cm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)A_.call(e,l)&&!C_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Qa,type:t.type,key:s,ref:i,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:OS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MS,_context:t},t.Consumer=t};ne.createElement=k_;ne.createFactory=function(t){var e=k_.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:VS,render:t}};ne.isValidElement=um;ne.lazy=function(t){return{$$typeof:zS,_payload:{_status:-1,_result:t},_init:WS}};ne.memo=function(t,e){return{$$typeof:FS,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=ac.transition;ac.transition={};try{t()}finally{ac.transition=e}};ne.unstable_act=P_;ne.useCallback=function(t,e){return Ct.current.useCallback(t,e)};ne.useContext=function(t){return Ct.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return Ct.current.useDeferredValue(t)};ne.useEffect=function(t,e){return Ct.current.useEffect(t,e)};ne.useId=function(){return Ct.current.useId()};ne.useImperativeHandle=function(t,e,n){return Ct.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return Ct.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return Ct.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return Ct.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return Ct.current.useReducer(t,e,n)};ne.useRef=function(t){return Ct.current.useRef(t)};ne.useState=function(t){return Ct.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return Ct.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return Ct.current.useTransition()};ne.version="18.3.1";b_.exports=ne;var M=b_.exports;const R_=PS(M),qS=kS({__proto__:null,default:R_},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KS=M,YS=Symbol.for("react.element"),GS=Symbol.for("react.fragment"),QS=Object.prototype.hasOwnProperty,XS=KS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JS={key:!0,ref:!0,__self:!0,__source:!0};function N_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QS.call(e,r)&&!JS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:YS,type:t,key:i,ref:o,props:s,_owner:XS.current}}Iu.Fragment=GS;Iu.jsx=N_;Iu.jsxs=N_;w_.exports=Iu;var h=w_.exports,Rd={},j_={exports:{}},Qt={},D_={exports:{}},M_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,q){var G=B.length;B.push(q);e:for(;0<G;){var de=G-1>>>1,ve=B[de];if(0<s(ve,q))B[de]=q,B[G]=ve,G=de;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var q=B[0],G=B.pop();if(G!==q){B[0]=G;e:for(var de=0,ve=B.length,zt=ve>>>1;de<zt;){var Be=2*(de+1)-1,Bt=B[Be],Ye=Be+1,ir=B[Ye];if(0>s(Bt,G))Ye<ve&&0>s(ir,Bt)?(B[de]=ir,B[Ye]=G,de=Ye):(B[de]=Bt,B[Be]=G,de=Be);else if(Ye<ve&&0>s(ir,G))B[de]=ir,B[Ye]=G,de=Ye;else break e}}return q}function s(B,q){var G=B.sortIndex-q.sortIndex;return G!==0?G:B.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,m=3,g=!1,x=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=B)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function R(B){if(_=!1,b(B),!x)if(n(l)!==null)x=!0,ue(j);else{var q=n(c);q!==null&&xe(R,q.startTime-B)}}function j(B,q){x=!1,_&&(_=!1,w(S),S=-1),g=!0;var G=m;try{for(b(q),f=n(l);f!==null&&(!(f.expirationTime>q)||B&&!P());){var de=f.callback;if(typeof de=="function"){f.callback=null,m=f.priorityLevel;var ve=de(f.expirationTime<=q);q=t.unstable_now(),typeof ve=="function"?f.callback=ve:f===n(l)&&r(l),b(q)}else r(l);f=n(l)}if(f!==null)var zt=!0;else{var Be=n(c);Be!==null&&xe(R,Be.startTime-q),zt=!1}return zt}finally{f=null,m=G,g=!1}}var V=!1,I=null,S=-1,E=5,k=-1;function P(){return!(t.unstable_now()-k<E)}function N(){if(I!==null){var B=t.unstable_now();k=B;var q=!0;try{q=I(!0,B)}finally{q?C():(V=!1,I=null)}}else V=!1}var C;if(typeof v=="function")C=function(){v(N)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Z=J.port2;J.port1.onmessage=N,C=function(){Z.postMessage(null)}}else C=function(){T(N,0)};function ue(B){I=B,V||(V=!0,C())}function xe(B,q){S=T(function(){B(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,ue(j))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var G=m;m=q;try{return B()}finally{m=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=m;m=B;try{return q()}finally{m=G}},t.unstable_scheduleCallback=function(B,q,G){var de=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?de+G:de):G=de,B){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=G+ve,B={id:d++,callback:q,priorityLevel:B,startTime:G,expirationTime:ve,sortIndex:-1},G>de?(B.sortIndex=G,e(c,B),n(l)===null&&B===n(c)&&(_?(w(S),S=-1):_=!0,xe(R,G-de))):(B.sortIndex=ve,e(l,B),x||g||(x=!0,ue(j))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var q=m;return function(){var G=m;m=q;try{return B.apply(this,arguments)}finally{m=G}}}})(M_);D_.exports=M_;var ZS=D_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT=M,Yt=ZS;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O_=new Set,ma={};function zs(t,e){Ai(t,e),Ai(t+"Capture",e)}function Ai(t,e){for(ma[t]=e,t=0;t<e.length;t++)O_.add(e[t])}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nd=Object.prototype.hasOwnProperty,tT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,py={},gy={};function nT(t){return Nd.call(gy,t)?!0:Nd.call(py,t)?!1:tT.test(t)?gy[t]=!0:(py[t]=!0,!1)}function rT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sT(t,e,n,r){if(e===null||typeof e>"u"||rT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var hm=/[\-:]([a-z])/g;function dm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hm,dm);ct[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hm,dm);ct[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hm,dm);ct[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function fm(t,e,n,r){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sT(e,n,s,r)&&(n=null),r||s===null?nT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sr=eT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Il=Symbol.for("react.element"),si=Symbol.for("react.portal"),ii=Symbol.for("react.fragment"),mm=Symbol.for("react.strict_mode"),jd=Symbol.for("react.profiler"),V_=Symbol.for("react.provider"),L_=Symbol.for("react.context"),pm=Symbol.for("react.forward_ref"),Dd=Symbol.for("react.suspense"),Md=Symbol.for("react.suspense_list"),gm=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),F_=Symbol.for("react.offscreen"),yy=Symbol.iterator;function xo(t){return t===null||typeof t!="object"?null:(t=yy&&t[yy]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,Mh;function Mo(t){if(Mh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mh=e&&e[1]||""}return`
`+Mh+t}var Oh=!1;function Vh(t,e){if(!t||Oh)return"";Oh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Oh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mo(t):""}function iT(t){switch(t.tag){case 5:return Mo(t.type);case 16:return Mo("Lazy");case 13:return Mo("Suspense");case 19:return Mo("SuspenseList");case 0:case 2:case 15:return t=Vh(t.type,!1),t;case 11:return t=Vh(t.type.render,!1),t;case 1:return t=Vh(t.type,!0),t;default:return""}}function Od(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ii:return"Fragment";case si:return"Portal";case jd:return"Profiler";case mm:return"StrictMode";case Dd:return"Suspense";case Md:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case L_:return(t.displayName||"Context")+".Consumer";case V_:return(t._context.displayName||"Context")+".Provider";case pm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gm:return e=t.displayName||null,e!==null?e:Od(t.type)||"Memo";case pr:e=t._payload,t=t._init;try{return Od(t(e))}catch{}}return null}function oT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Od(e);case 8:return e===mm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function z_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aT(t){var e=z_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Al(t){t._valueTracker||(t._valueTracker=aT(t))}function B_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=z_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ac(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vd(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function U_(t,e){e=e.checked,e!=null&&fm(t,"checked",e,!1)}function Ld(t,e){U_(t,e);var n=Fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fd(t,e.type,Fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fd(t,e,n){(e!=="number"||Ac(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Oo=Array.isArray;function gi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function zd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _y(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Oo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fr(n)}}function $_(t,e){var n=Fr(e.value),r=Fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function W_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?W_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cl,H_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cl=Cl||document.createElement("div"),Cl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lT=["Webkit","ms","Moz","O"];Object.keys(Go).forEach(function(t){lT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Go[e]=Go[t]})});function q_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Go.hasOwnProperty(t)&&Go[t]?(""+e).trim():e+"px"}function K_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=q_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var cT=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ud(t,e){if(e){if(cT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function $d(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wd=null;function ym(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hd=null,yi=null,vi=null;function by(t){if(t=Za(t)){if(typeof Hd!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Ru(e),Hd(t.stateNode,t.type,e))}}function Y_(t){yi?vi?vi.push(t):vi=[t]:yi=t}function G_(){if(yi){var t=yi,e=vi;if(vi=yi=null,by(t),e)for(t=0;t<e.length;t++)by(e[t])}}function Q_(t,e){return t(e)}function X_(){}var Lh=!1;function J_(t,e,n){if(Lh)return t(e,n);Lh=!0;try{return Q_(t,e,n)}finally{Lh=!1,(yi!==null||vi!==null)&&(X_(),G_())}}function ga(t,e){var n=t.stateNode;if(n===null)return null;var r=Ru(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var qd=!1;if(Gn)try{var _o={};Object.defineProperty(_o,"passive",{get:function(){qd=!0}}),window.addEventListener("test",_o,_o),window.removeEventListener("test",_o,_o)}catch{qd=!1}function uT(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Qo=!1,Cc=null,kc=!1,Kd=null,hT={onError:function(t){Qo=!0,Cc=t}};function dT(t,e,n,r,s,i,o,a,l){Qo=!1,Cc=null,uT.apply(hT,arguments)}function fT(t,e,n,r,s,i,o,a,l){if(dT.apply(this,arguments),Qo){if(Qo){var c=Cc;Qo=!1,Cc=null}else throw Error(z(198));kc||(kc=!0,Kd=c)}}function Bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Z_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ey(t){if(Bs(t)!==t)throw Error(z(188))}function mT(t){var e=t.alternate;if(!e){if(e=Bs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ey(s),t;if(i===r)return Ey(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function ew(t){return t=mT(t),t!==null?tw(t):null}function tw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tw(t);if(e!==null)return e;t=t.sibling}return null}var nw=Yt.unstable_scheduleCallback,Sy=Yt.unstable_cancelCallback,pT=Yt.unstable_shouldYield,gT=Yt.unstable_requestPaint,Le=Yt.unstable_now,yT=Yt.unstable_getCurrentPriorityLevel,vm=Yt.unstable_ImmediatePriority,rw=Yt.unstable_UserBlockingPriority,Pc=Yt.unstable_NormalPriority,vT=Yt.unstable_LowPriority,sw=Yt.unstable_IdlePriority,Au=null,Rn=null;function xT(t){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(Au,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:bT,_T=Math.log,wT=Math.LN2;function bT(t){return t>>>=0,t===0?32:31-(_T(t)/wT|0)|0}var kl=64,Pl=4194304;function Vo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Vo(a):(i&=o,i!==0&&(r=Vo(i)))}else o=n&~s,o!==0?r=Vo(o):i!==0&&(r=Vo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),s=1<<n,r|=t[n],e&=~s;return r}function ET(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ST(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-gn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=ET(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Yd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iw(){var t=kl;return kl<<=1,!(kl&4194240)&&(kl=64),t}function Fh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function TT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function xm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ye=0;function ow(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var aw,_m,lw,cw,uw,Gd=!1,Rl=[],Tr=null,Ir=null,Ar=null,ya=new Map,va=new Map,yr=[],IT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ty(t,e){switch(t){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":ya.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":va.delete(e.pointerId)}}function wo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Za(e),e!==null&&_m(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function AT(t,e,n,r,s){switch(e){case"focusin":return Tr=wo(Tr,t,e,n,r,s),!0;case"dragenter":return Ir=wo(Ir,t,e,n,r,s),!0;case"mouseover":return Ar=wo(Ar,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ya.set(i,wo(ya.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,va.set(i,wo(va.get(i)||null,t,e,n,r,s)),!0}return!1}function hw(t){var e=vs(t.target);if(e!==null){var n=Bs(e);if(n!==null){if(e=n.tag,e===13){if(e=Z_(n),e!==null){t.blockedOn=e,uw(t.priority,function(){lw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wd=r,n.target.dispatchEvent(r),Wd=null}else return e=Za(n),e!==null&&_m(e),t.blockedOn=n,!1;e.shift()}return!0}function Iy(t,e,n){lc(t)&&n.delete(e)}function CT(){Gd=!1,Tr!==null&&lc(Tr)&&(Tr=null),Ir!==null&&lc(Ir)&&(Ir=null),Ar!==null&&lc(Ar)&&(Ar=null),ya.forEach(Iy),va.forEach(Iy)}function bo(t,e){t.blockedOn===e&&(t.blockedOn=null,Gd||(Gd=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,CT)))}function xa(t){function e(s){return bo(s,t)}if(0<Rl.length){bo(Rl[0],t);for(var n=1;n<Rl.length;n++){var r=Rl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Tr!==null&&bo(Tr,t),Ir!==null&&bo(Ir,t),Ar!==null&&bo(Ar,t),ya.forEach(e),va.forEach(e),n=0;n<yr.length;n++)r=yr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yr.length&&(n=yr[0],n.blockedOn===null);)hw(n),n.blockedOn===null&&yr.shift()}var xi=sr.ReactCurrentBatchConfig,Nc=!0;function kT(t,e,n,r){var s=ye,i=xi.transition;xi.transition=null;try{ye=1,wm(t,e,n,r)}finally{ye=s,xi.transition=i}}function PT(t,e,n,r){var s=ye,i=xi.transition;xi.transition=null;try{ye=4,wm(t,e,n,r)}finally{ye=s,xi.transition=i}}function wm(t,e,n,r){if(Nc){var s=Qd(t,e,n,r);if(s===null)Gh(t,e,r,jc,n),Ty(t,r);else if(AT(s,t,e,n,r))r.stopPropagation();else if(Ty(t,r),e&4&&-1<IT.indexOf(t)){for(;s!==null;){var i=Za(s);if(i!==null&&aw(i),i=Qd(t,e,n,r),i===null&&Gh(t,e,r,jc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Gh(t,e,r,null,n)}}var jc=null;function Qd(t,e,n,r){if(jc=null,t=ym(r),t=vs(t),t!==null)if(e=Bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Z_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jc=t,null}function dw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yT()){case vm:return 1;case rw:return 4;case Pc:case vT:return 16;case sw:return 536870912;default:return 16}default:return 16}}var xr=null,bm=null,cc=null;function fw(){if(cc)return cc;var t,e=bm,n=e.length,r,s="value"in xr?xr.value:xr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return cc=s.slice(t,1<r?1-r:void 0)}function uc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nl(){return!0}function Ay(){return!1}function Xt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nl:Ay,this.isPropagationStopped=Ay,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),e}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Em=Xt(Wi),Ja=je({},Wi,{view:0,detail:0}),RT=Xt(Ja),zh,Bh,Eo,Cu=je({},Ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eo&&(Eo&&t.type==="mousemove"?(zh=t.screenX-Eo.screenX,Bh=t.screenY-Eo.screenY):Bh=zh=0,Eo=t),zh)},movementY:function(t){return"movementY"in t?t.movementY:Bh}}),Cy=Xt(Cu),NT=je({},Cu,{dataTransfer:0}),jT=Xt(NT),DT=je({},Ja,{relatedTarget:0}),Uh=Xt(DT),MT=je({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),OT=Xt(MT),VT=je({},Wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LT=Xt(VT),FT=je({},Wi,{data:0}),ky=Xt(FT),zT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $T(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UT[t])?!!e[t]:!1}function Sm(){return $T}var WT=je({},Ja,{key:function(t){if(t.key){var e=zT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sm,charCode:function(t){return t.type==="keypress"?uc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HT=Xt(WT),qT=je({},Cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Py=Xt(qT),KT=je({},Ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sm}),YT=Xt(KT),GT=je({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),QT=Xt(GT),XT=je({},Cu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JT=Xt(XT),ZT=[9,13,27,32],Tm=Gn&&"CompositionEvent"in window,Xo=null;Gn&&"documentMode"in document&&(Xo=document.documentMode);var eI=Gn&&"TextEvent"in window&&!Xo,mw=Gn&&(!Tm||Xo&&8<Xo&&11>=Xo),Ry=" ",Ny=!1;function pw(t,e){switch(t){case"keyup":return ZT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oi=!1;function tI(t,e){switch(t){case"compositionend":return gw(e);case"keypress":return e.which!==32?null:(Ny=!0,Ry);case"textInput":return t=e.data,t===Ry&&Ny?null:t;default:return null}}function nI(t,e){if(oi)return t==="compositionend"||!Tm&&pw(t,e)?(t=fw(),cc=bm=xr=null,oi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mw&&e.locale!=="ko"?null:e.data;default:return null}}var rI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rI[t.type]:e==="textarea"}function yw(t,e,n,r){Y_(r),e=Dc(e,"onChange"),0<e.length&&(n=new Em("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jo=null,_a=null;function sI(t){Cw(t,0)}function ku(t){var e=ci(t);if(B_(e))return t}function iI(t,e){if(t==="change")return e}var vw=!1;if(Gn){var $h;if(Gn){var Wh="oninput"in document;if(!Wh){var Dy=document.createElement("div");Dy.setAttribute("oninput","return;"),Wh=typeof Dy.oninput=="function"}$h=Wh}else $h=!1;vw=$h&&(!document.documentMode||9<document.documentMode)}function My(){Jo&&(Jo.detachEvent("onpropertychange",xw),_a=Jo=null)}function xw(t){if(t.propertyName==="value"&&ku(_a)){var e=[];yw(e,_a,t,ym(t)),J_(sI,e)}}function oI(t,e,n){t==="focusin"?(My(),Jo=e,_a=n,Jo.attachEvent("onpropertychange",xw)):t==="focusout"&&My()}function aI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ku(_a)}function lI(t,e){if(t==="click")return ku(e)}function cI(t,e){if(t==="input"||t==="change")return ku(e)}function uI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xn=typeof Object.is=="function"?Object.is:uI;function wa(t,e){if(xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Nd.call(e,s)||!xn(t[s],e[s]))return!1}return!0}function Oy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vy(t,e){var n=Oy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Oy(n)}}function _w(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_w(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ww(){for(var t=window,e=Ac();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ac(t.document)}return e}function Im(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hI(t){var e=ww(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_w(n.ownerDocument.documentElement,n)){if(r!==null&&Im(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Vy(n,i);var o=Vy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dI=Gn&&"documentMode"in document&&11>=document.documentMode,ai=null,Xd=null,Zo=null,Jd=!1;function Ly(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jd||ai==null||ai!==Ac(r)||(r=ai,"selectionStart"in r&&Im(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&wa(Zo,r)||(Zo=r,r=Dc(Xd,"onSelect"),0<r.length&&(e=new Em("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ai)))}function jl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var li={animationend:jl("Animation","AnimationEnd"),animationiteration:jl("Animation","AnimationIteration"),animationstart:jl("Animation","AnimationStart"),transitionend:jl("Transition","TransitionEnd")},Hh={},bw={};Gn&&(bw=document.createElement("div").style,"AnimationEvent"in window||(delete li.animationend.animation,delete li.animationiteration.animation,delete li.animationstart.animation),"TransitionEvent"in window||delete li.transitionend.transition);function Pu(t){if(Hh[t])return Hh[t];if(!li[t])return t;var e=li[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bw)return Hh[t]=e[n];return t}var Ew=Pu("animationend"),Sw=Pu("animationiteration"),Tw=Pu("animationstart"),Iw=Pu("transitionend"),Aw=new Map,Fy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(t,e){Aw.set(t,e),zs(e,[t])}for(var qh=0;qh<Fy.length;qh++){var Kh=Fy[qh],fI=Kh.toLowerCase(),mI=Kh[0].toUpperCase()+Kh.slice(1);Qr(fI,"on"+mI)}Qr(Ew,"onAnimationEnd");Qr(Sw,"onAnimationIteration");Qr(Tw,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(Iw,"onTransitionEnd");Ai("onMouseEnter",["mouseout","mouseover"]);Ai("onMouseLeave",["mouseout","mouseover"]);Ai("onPointerEnter",["pointerout","pointerover"]);Ai("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function zy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fT(r,e,void 0,t),t.currentTarget=null}function Cw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;zy(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;zy(s,a,c),i=l}}}if(kc)throw t=Kd,kc=!1,Kd=null,t}function Te(t,e){var n=e[rf];n===void 0&&(n=e[rf]=new Set);var r=t+"__bubble";n.has(r)||(kw(e,t,2,!1),n.add(r))}function Yh(t,e,n){var r=0;e&&(r|=4),kw(n,t,r,e)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function ba(t){if(!t[Dl]){t[Dl]=!0,O_.forEach(function(n){n!=="selectionchange"&&(pI.has(n)||Yh(n,!1,t),Yh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dl]||(e[Dl]=!0,Yh("selectionchange",!1,e))}}function kw(t,e,n,r){switch(dw(e)){case 1:var s=kT;break;case 4:s=PT;break;default:s=wm}n=s.bind(null,e,n,t),s=void 0,!qd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Gh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=vs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}J_(function(){var c=i,d=ym(n),f=[];e:{var m=Aw.get(t);if(m!==void 0){var g=Em,x=t;switch(t){case"keypress":if(uc(n)===0)break e;case"keydown":case"keyup":g=HT;break;case"focusin":x="focus",g=Uh;break;case"focusout":x="blur",g=Uh;break;case"beforeblur":case"afterblur":g=Uh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Cy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=jT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=YT;break;case Ew:case Sw:case Tw:g=OT;break;case Iw:g=QT;break;case"scroll":g=RT;break;case"wheel":g=JT;break;case"copy":case"cut":case"paste":g=LT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Py}var _=(e&4)!==0,T=!_&&t==="scroll",w=_?m!==null?m+"Capture":null:m;_=[];for(var v=c,b;v!==null;){b=v;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,w!==null&&(R=ga(v,w),R!=null&&_.push(Ea(v,R,b)))),T)break;v=v.return}0<_.length&&(m=new g(m,x,null,n,d),f.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Wd&&(x=n.relatedTarget||n.fromElement)&&(vs(x)||x[Qn]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=c,x=x?vs(x):null,x!==null&&(T=Bs(x),x!==T||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=c),g!==x)){if(_=Cy,R="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(_=Py,R="onPointerLeave",w="onPointerEnter",v="pointer"),T=g==null?m:ci(g),b=x==null?m:ci(x),m=new _(R,v+"leave",g,n,d),m.target=T,m.relatedTarget=b,R=null,vs(d)===c&&(_=new _(w,v+"enter",x,n,d),_.target=b,_.relatedTarget=T,R=_),T=R,g&&x)t:{for(_=g,w=x,v=0,b=_;b;b=Qs(b))v++;for(b=0,R=w;R;R=Qs(R))b++;for(;0<v-b;)_=Qs(_),v--;for(;0<b-v;)w=Qs(w),b--;for(;v--;){if(_===w||w!==null&&_===w.alternate)break t;_=Qs(_),w=Qs(w)}_=null}else _=null;g!==null&&By(f,m,g,_,!1),x!==null&&T!==null&&By(f,T,x,_,!0)}}e:{if(m=c?ci(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var j=iI;else if(jy(m))if(vw)j=cI;else{j=aI;var V=oI}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=lI);if(j&&(j=j(t,c))){yw(f,j,n,d);break e}V&&V(t,m,c),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&Fd(m,"number",m.value)}switch(V=c?ci(c):window,t){case"focusin":(jy(V)||V.contentEditable==="true")&&(ai=V,Xd=c,Zo=null);break;case"focusout":Zo=Xd=ai=null;break;case"mousedown":Jd=!0;break;case"contextmenu":case"mouseup":case"dragend":Jd=!1,Ly(f,n,d);break;case"selectionchange":if(dI)break;case"keydown":case"keyup":Ly(f,n,d)}var I;if(Tm)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else oi?pw(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(mw&&n.locale!=="ko"&&(oi||S!=="onCompositionStart"?S==="onCompositionEnd"&&oi&&(I=fw()):(xr=d,bm="value"in xr?xr.value:xr.textContent,oi=!0)),V=Dc(c,S),0<V.length&&(S=new ky(S,t,null,n,d),f.push({event:S,listeners:V}),I?S.data=I:(I=gw(n),I!==null&&(S.data=I)))),(I=eI?tI(t,n):nI(t,n))&&(c=Dc(c,"onBeforeInput"),0<c.length&&(d=new ky("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=I))}Cw(f,e)})}function Ea(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ga(t,n),i!=null&&r.unshift(Ea(t,i,s)),i=ga(t,e),i!=null&&r.push(Ea(t,i,s))),t=t.return}return r}function Qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function By(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=ga(n,i),l!=null&&o.unshift(Ea(n,l,a))):s||(l=ga(n,i),l!=null&&o.push(Ea(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gI=/\r\n?/g,yI=/\u0000|\uFFFD/g;function Uy(t){return(typeof t=="string"?t:""+t).replace(gI,`
`).replace(yI,"")}function Ml(t,e,n){if(e=Uy(e),Uy(t)!==e&&n)throw Error(z(425))}function Mc(){}var Zd=null,ef=null;function tf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nf=typeof setTimeout=="function"?setTimeout:void 0,vI=typeof clearTimeout=="function"?clearTimeout:void 0,$y=typeof Promise=="function"?Promise:void 0,xI=typeof queueMicrotask=="function"?queueMicrotask:typeof $y<"u"?function(t){return $y.resolve(null).then(t).catch(_I)}:nf;function _I(t){setTimeout(function(){throw t})}function Qh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xa(e)}function Cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Hi=Math.random().toString(36).slice(2),Pn="__reactFiber$"+Hi,Sa="__reactProps$"+Hi,Qn="__reactContainer$"+Hi,rf="__reactEvents$"+Hi,wI="__reactListeners$"+Hi,bI="__reactHandles$"+Hi;function vs(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qn]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wy(t);t!==null;){if(n=t[Pn])return n;t=Wy(t)}return e}t=n,n=t.parentNode}return null}function Za(t){return t=t[Pn]||t[Qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ci(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Ru(t){return t[Sa]||null}var sf=[],ui=-1;function Xr(t){return{current:t}}function ke(t){0>ui||(t.current=sf[ui],sf[ui]=null,ui--)}function Ee(t,e){ui++,sf[ui]=t.current,t.current=e}var zr={},wt=Xr(zr),Vt=Xr(!1),Ps=zr;function Ci(t,e){var n=t.type.contextTypes;if(!n)return zr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Lt(t){return t=t.childContextTypes,t!=null}function Oc(){ke(Vt),ke(wt)}function Hy(t,e,n){if(wt.current!==zr)throw Error(z(168));Ee(wt,e),Ee(Vt,n)}function Pw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,oT(t)||"Unknown",s));return je({},n,r)}function Vc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zr,Ps=wt.current,Ee(wt,t),Ee(Vt,Vt.current),!0}function qy(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Pw(t,e,Ps),r.__reactInternalMemoizedMergedChildContext=t,ke(Vt),ke(wt),Ee(wt,t)):ke(Vt),Ee(Vt,n)}var Wn=null,Nu=!1,Xh=!1;function Rw(t){Wn===null?Wn=[t]:Wn.push(t)}function EI(t){Nu=!0,Rw(t)}function Jr(){if(!Xh&&Wn!==null){Xh=!0;var t=0,e=ye;try{var n=Wn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wn=null,Nu=!1}catch(s){throw Wn!==null&&(Wn=Wn.slice(t+1)),nw(vm,Jr),s}finally{ye=e,Xh=!1}}return null}var hi=[],di=0,Lc=null,Fc=0,en=[],tn=0,Rs=null,qn=1,Kn="";function ds(t,e){hi[di++]=Fc,hi[di++]=Lc,Lc=t,Fc=e}function Nw(t,e,n){en[tn++]=qn,en[tn++]=Kn,en[tn++]=Rs,Rs=t;var r=qn;t=Kn;var s=32-gn(r)-1;r&=~(1<<s),n+=1;var i=32-gn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,qn=1<<32-gn(e)+s|n<<s|r,Kn=i+t}else qn=1<<i|n<<s|r,Kn=t}function Am(t){t.return!==null&&(ds(t,1),Nw(t,1,0))}function Cm(t){for(;t===Lc;)Lc=hi[--di],hi[di]=null,Fc=hi[--di],hi[di]=null;for(;t===Rs;)Rs=en[--tn],en[tn]=null,Kn=en[--tn],en[tn]=null,qn=en[--tn],en[tn]=null}var qt=null,Wt=null,Pe=!1,pn=null;function jw(t,e){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ky(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Wt=Cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rs!==null?{id:qn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,Wt=null,!0):!1;default:return!1}}function of(t){return(t.mode&1)!==0&&(t.flags&128)===0}function af(t){if(Pe){var e=Wt;if(e){var n=e;if(!Ky(t,e)){if(of(t))throw Error(z(418));e=Cr(n.nextSibling);var r=qt;e&&Ky(t,e)?jw(r,n):(t.flags=t.flags&-4097|2,Pe=!1,qt=t)}}else{if(of(t))throw Error(z(418));t.flags=t.flags&-4097|2,Pe=!1,qt=t}}}function Yy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function Ol(t){if(t!==qt)return!1;if(!Pe)return Yy(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tf(t.type,t.memoizedProps)),e&&(e=Wt)){if(of(t))throw Dw(),Error(z(418));for(;e;)jw(t,e),e=Cr(e.nextSibling)}if(Yy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=Cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=qt?Cr(t.stateNode.nextSibling):null;return!0}function Dw(){for(var t=Wt;t;)t=Cr(t.nextSibling)}function ki(){Wt=qt=null,Pe=!1}function km(t){pn===null?pn=[t]:pn.push(t)}var SI=sr.ReactCurrentBatchConfig;function So(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Vl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gy(t){var e=t._init;return e(t._payload)}function Mw(t){function e(w,v){if(t){var b=w.deletions;b===null?(w.deletions=[v],w.flags|=16):b.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=Nr(w,v),w.index=0,w.sibling=null,w}function i(w,v,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<v?(w.flags|=2,v):b):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,b,R){return v===null||v.tag!==6?(v=sd(b,w.mode,R),v.return=w,v):(v=s(v,b),v.return=w,v)}function l(w,v,b,R){var j=b.type;return j===ii?d(w,v,b.props.children,R,b.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===pr&&Gy(j)===v.type)?(R=s(v,b.props),R.ref=So(w,v,b),R.return=w,R):(R=yc(b.type,b.key,b.props,null,w.mode,R),R.ref=So(w,v,b),R.return=w,R)}function c(w,v,b,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=id(b,w.mode,R),v.return=w,v):(v=s(v,b.children||[]),v.return=w,v)}function d(w,v,b,R,j){return v===null||v.tag!==7?(v=Ts(b,w.mode,R,j),v.return=w,v):(v=s(v,b),v.return=w,v)}function f(w,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=sd(""+v,w.mode,b),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Il:return b=yc(v.type,v.key,v.props,null,w.mode,b),b.ref=So(w,null,v),b.return=w,b;case si:return v=id(v,w.mode,b),v.return=w,v;case pr:var R=v._init;return f(w,R(v._payload),b)}if(Oo(v)||xo(v))return v=Ts(v,w.mode,b,null),v.return=w,v;Vl(w,v)}return null}function m(w,v,b,R){var j=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:a(w,v,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Il:return b.key===j?l(w,v,b,R):null;case si:return b.key===j?c(w,v,b,R):null;case pr:return j=b._init,m(w,v,j(b._payload),R)}if(Oo(b)||xo(b))return j!==null?null:d(w,v,b,R,null);Vl(w,b)}return null}function g(w,v,b,R,j){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(b)||null,a(v,w,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Il:return w=w.get(R.key===null?b:R.key)||null,l(v,w,R,j);case si:return w=w.get(R.key===null?b:R.key)||null,c(v,w,R,j);case pr:var V=R._init;return g(w,v,b,V(R._payload),j)}if(Oo(R)||xo(R))return w=w.get(b)||null,d(v,w,R,j,null);Vl(v,R)}return null}function x(w,v,b,R){for(var j=null,V=null,I=v,S=v=0,E=null;I!==null&&S<b.length;S++){I.index>S?(E=I,I=null):E=I.sibling;var k=m(w,I,b[S],R);if(k===null){I===null&&(I=E);break}t&&I&&k.alternate===null&&e(w,I),v=i(k,v,S),V===null?j=k:V.sibling=k,V=k,I=E}if(S===b.length)return n(w,I),Pe&&ds(w,S),j;if(I===null){for(;S<b.length;S++)I=f(w,b[S],R),I!==null&&(v=i(I,v,S),V===null?j=I:V.sibling=I,V=I);return Pe&&ds(w,S),j}for(I=r(w,I);S<b.length;S++)E=g(I,w,S,b[S],R),E!==null&&(t&&E.alternate!==null&&I.delete(E.key===null?S:E.key),v=i(E,v,S),V===null?j=E:V.sibling=E,V=E);return t&&I.forEach(function(P){return e(w,P)}),Pe&&ds(w,S),j}function _(w,v,b,R){var j=xo(b);if(typeof j!="function")throw Error(z(150));if(b=j.call(b),b==null)throw Error(z(151));for(var V=j=null,I=v,S=v=0,E=null,k=b.next();I!==null&&!k.done;S++,k=b.next()){I.index>S?(E=I,I=null):E=I.sibling;var P=m(w,I,k.value,R);if(P===null){I===null&&(I=E);break}t&&I&&P.alternate===null&&e(w,I),v=i(P,v,S),V===null?j=P:V.sibling=P,V=P,I=E}if(k.done)return n(w,I),Pe&&ds(w,S),j;if(I===null){for(;!k.done;S++,k=b.next())k=f(w,k.value,R),k!==null&&(v=i(k,v,S),V===null?j=k:V.sibling=k,V=k);return Pe&&ds(w,S),j}for(I=r(w,I);!k.done;S++,k=b.next())k=g(I,w,S,k.value,R),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?S:k.key),v=i(k,v,S),V===null?j=k:V.sibling=k,V=k);return t&&I.forEach(function(N){return e(w,N)}),Pe&&ds(w,S),j}function T(w,v,b,R){if(typeof b=="object"&&b!==null&&b.type===ii&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Il:e:{for(var j=b.key,V=v;V!==null;){if(V.key===j){if(j=b.type,j===ii){if(V.tag===7){n(w,V.sibling),v=s(V,b.props.children),v.return=w,w=v;break e}}else if(V.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===pr&&Gy(j)===V.type){n(w,V.sibling),v=s(V,b.props),v.ref=So(w,V,b),v.return=w,w=v;break e}n(w,V);break}else e(w,V);V=V.sibling}b.type===ii?(v=Ts(b.props.children,w.mode,R,b.key),v.return=w,w=v):(R=yc(b.type,b.key,b.props,null,w.mode,R),R.ref=So(w,v,b),R.return=w,w=R)}return o(w);case si:e:{for(V=b.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(w,v.sibling),v=s(v,b.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=id(b,w.mode,R),v.return=w,w=v}return o(w);case pr:return V=b._init,T(w,v,V(b._payload),R)}if(Oo(b))return x(w,v,b,R);if(xo(b))return _(w,v,b,R);Vl(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,b),v.return=w,w=v):(n(w,v),v=sd(b,w.mode,R),v.return=w,w=v),o(w)):n(w,v)}return T}var Pi=Mw(!0),Ow=Mw(!1),zc=Xr(null),Bc=null,fi=null,Pm=null;function Rm(){Pm=fi=Bc=null}function Nm(t){var e=zc.current;ke(zc),t._currentValue=e}function lf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _i(t,e){Bc=t,Pm=fi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(Pm!==t)if(t={context:t,memoizedValue:e,next:null},fi===null){if(Bc===null)throw Error(z(308));fi=t,Bc.dependencies={lanes:0,firstContext:t}}else fi=fi.next=t;return e}var xs=null;function jm(t){xs===null?xs=[t]:xs.push(t)}function Vw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,jm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Xn(t,r)}function Xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gr=!1;function Dm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Xn(t,n)}return s=r.interleaved,s===null?(e.next=e,jm(r)):(e.next=s.next,s.next=e),r.interleaved=e,Xn(t,n)}function hc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xm(t,n)}}function Qy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uc(t,e,n,r){var s=t.updateQueue;gr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,d=c=l=null,a=i;do{var m=a.lane,g=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,_=a;switch(m=e,g=n,_.tag){case 1:if(x=_.payload,typeof x=="function"){f=x.call(g,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=_.payload,m=typeof x=="function"?x.call(g,f,m):x,m==null)break e;f=je({},f,m);break e;case 2:gr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=f):d=d.next=g,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);js|=o,t.lanes=o,t.memoizedState=f}}function Xy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var el={},Nn=Xr(el),Ta=Xr(el),Ia=Xr(el);function _s(t){if(t===el)throw Error(z(174));return t}function Mm(t,e){switch(Ee(Ia,e),Ee(Ta,t),Ee(Nn,el),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bd(e,t)}ke(Nn),Ee(Nn,e)}function Ri(){ke(Nn),ke(Ta),ke(Ia)}function Fw(t){_s(Ia.current);var e=_s(Nn.current),n=Bd(e,t.type);e!==n&&(Ee(Ta,t),Ee(Nn,n))}function Om(t){Ta.current===t&&(ke(Nn),ke(Ta))}var Re=Xr(0);function $c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jh=[];function Vm(){for(var t=0;t<Jh.length;t++)Jh[t]._workInProgressVersionPrimary=null;Jh.length=0}var dc=sr.ReactCurrentDispatcher,Zh=sr.ReactCurrentBatchConfig,Ns=0,Ne=null,Qe=null,nt=null,Wc=!1,ea=!1,Aa=0,TI=0;function dt(){throw Error(z(321))}function Lm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xn(t[n],e[n]))return!1;return!0}function Fm(t,e,n,r,s,i){if(Ns=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dc.current=t===null||t.memoizedState===null?kI:PI,t=n(r,s),ea){i=0;do{if(ea=!1,Aa=0,25<=i)throw Error(z(301));i+=1,nt=Qe=null,e.updateQueue=null,dc.current=RI,t=n(r,s)}while(ea)}if(dc.current=Hc,e=Qe!==null&&Qe.next!==null,Ns=0,nt=Qe=Ne=null,Wc=!1,e)throw Error(z(300));return t}function zm(){var t=Aa!==0;return Aa=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Ne.memoizedState=nt=t:nt=nt.next=t,nt}function cn(){if(Qe===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=nt===null?Ne.memoizedState:nt.next;if(e!==null)nt=e,Qe=t;else{if(t===null)throw Error(z(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},nt===null?Ne.memoizedState=nt=t:nt=nt.next=t}return nt}function Ca(t,e){return typeof e=="function"?e(t):e}function ed(t){var e=cn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Ns&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ne.lanes|=d,js|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,xn(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ne.lanes|=i,js|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function td(t){var e=cn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);xn(i,e.memoizedState)||(Ot=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function zw(){}function Bw(t,e){var n=Ne,r=cn(),s=e(),i=!xn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ot=!0),r=r.queue,Bm(Ww.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,ka(9,$w.bind(null,n,r,s,e),void 0,null),st===null)throw Error(z(349));Ns&30||Uw(n,e,s)}return s}function Uw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $w(t,e,n,r){e.value=n,e.getSnapshot=r,Hw(e)&&qw(t)}function Ww(t,e,n){return n(function(){Hw(e)&&qw(t)})}function Hw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xn(t,n)}catch{return!0}}function qw(t){var e=Xn(t,1);e!==null&&yn(e,t,1,-1)}function Jy(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:t},e.queue=t,t=t.dispatch=CI.bind(null,Ne,t),[e.memoizedState,t]}function ka(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kw(){return cn().memoizedState}function fc(t,e,n,r){var s=In();Ne.flags|=t,s.memoizedState=ka(1|e,n,void 0,r===void 0?null:r)}function ju(t,e,n,r){var s=cn();r=r===void 0?null:r;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,r!==null&&Lm(r,o.deps)){s.memoizedState=ka(e,n,i,r);return}}Ne.flags|=t,s.memoizedState=ka(1|e,n,i,r)}function Zy(t,e){return fc(8390656,8,t,e)}function Bm(t,e){return ju(2048,8,t,e)}function Yw(t,e){return ju(4,2,t,e)}function Gw(t,e){return ju(4,4,t,e)}function Qw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xw(t,e,n){return n=n!=null?n.concat([t]):null,ju(4,4,Qw.bind(null,e,t),n)}function Um(){}function Jw(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Zw(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function eb(t,e,n){return Ns&21?(xn(n,e)||(n=iw(),Ne.lanes|=n,js|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function II(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=Zh.transition;Zh.transition={};try{t(!1),e()}finally{ye=n,Zh.transition=r}}function tb(){return cn().memoizedState}function AI(t,e,n){var r=Rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},nb(t))rb(e,n);else if(n=Vw(t,e,n,r),n!==null){var s=It();yn(n,t,r,s),sb(n,e,r)}}function CI(t,e,n){var r=Rr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(nb(t))rb(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,xn(a,o)){var l=e.interleaved;l===null?(s.next=s,jm(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Vw(t,e,s,r),n!==null&&(s=It(),yn(n,t,r,s),sb(n,e,r))}}function nb(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function rb(t,e){ea=Wc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xm(t,n)}}var Hc={readContext:ln,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},kI={readContext:ln,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:Zy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fc(4194308,4,Qw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fc(4194308,4,t,e)},useInsertionEffect:function(t,e){return fc(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AI.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:Jy,useDebugValue:Um,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=Jy(!1),e=t[0];return t=II.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,s=In();if(Pe){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),st===null)throw Error(z(349));Ns&30||Uw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Zy(Ww.bind(null,r,i,t),[t]),r.flags|=2048,ka(9,$w.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=In(),e=st.identifierPrefix;if(Pe){var n=Kn,r=qn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Aa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=TI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PI={readContext:ln,useCallback:Jw,useContext:ln,useEffect:Bm,useImperativeHandle:Xw,useInsertionEffect:Yw,useLayoutEffect:Gw,useMemo:Zw,useReducer:ed,useRef:Kw,useState:function(){return ed(Ca)},useDebugValue:Um,useDeferredValue:function(t){var e=cn();return eb(e,Qe.memoizedState,t)},useTransition:function(){var t=ed(Ca)[0],e=cn().memoizedState;return[t,e]},useMutableSource:zw,useSyncExternalStore:Bw,useId:tb,unstable_isNewReconciler:!1},RI={readContext:ln,useCallback:Jw,useContext:ln,useEffect:Bm,useImperativeHandle:Xw,useInsertionEffect:Yw,useLayoutEffect:Gw,useMemo:Zw,useReducer:td,useRef:Kw,useState:function(){return td(Ca)},useDebugValue:Um,useDeferredValue:function(t){var e=cn();return Qe===null?e.memoizedState=t:eb(e,Qe.memoizedState,t)},useTransition:function(){var t=td(Ca)[0],e=cn().memoizedState;return[t,e]},useMutableSource:zw,useSyncExternalStore:Bw,useId:tb,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Du={isMounted:function(t){return(t=t._reactInternals)?Bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),s=Rr(t),i=Yn(r,s);i.payload=e,n!=null&&(i.callback=n),e=kr(t,i,s),e!==null&&(yn(e,t,s,r),hc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),s=Rr(t),i=Yn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=kr(t,i,s),e!==null&&(yn(e,t,s,r),hc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=Rr(t),s=Yn(n,r);s.tag=2,e!=null&&(s.callback=e),e=kr(t,s,r),e!==null&&(yn(e,t,r,n),hc(e,t,r))}};function e0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!wa(n,r)||!wa(s,i):!0}function ib(t,e,n){var r=!1,s=zr,i=e.contextType;return typeof i=="object"&&i!==null?i=ln(i):(s=Lt(e)?Ps:wt.current,r=e.contextTypes,i=(r=r!=null)?Ci(t,s):zr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Du,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function t0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Du.enqueueReplaceState(e,e.state,null)}function uf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Dm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ln(i):(i=Lt(e)?Ps:wt.current,s.context=Ci(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(cf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Du.enqueueReplaceState(s,s.state,null),Uc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ni(t,e){try{var n="",r=e;do n+=iT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function nd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NI=typeof WeakMap=="function"?WeakMap:Map;function ob(t,e,n){n=Yn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kc||(Kc=!0,wf=r),hf(t,e)},n}function ab(t,e,n){n=Yn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){hf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){hf(t,e),typeof r!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function n0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qI.bind(null,t,e,n),e.then(t,t))}function r0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function s0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yn(-1,1),e.tag=2,kr(n,e,1))),n.lanes|=1),t)}var jI=sr.ReactCurrentOwner,Ot=!1;function St(t,e,n,r){e.child=t===null?Ow(e,null,n,r):Pi(e,t.child,n,r)}function i0(t,e,n,r,s){n=n.render;var i=e.ref;return _i(e,s),r=Fm(t,e,n,r,i,s),n=zm(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jn(t,e,s)):(Pe&&n&&Am(e),e.flags|=1,St(t,e,r,s),e.child)}function o0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Qm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,lb(t,e,i,r,s)):(t=yc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:wa,n(o,r)&&t.ref===e.ref)return Jn(t,e,s)}return e.flags|=1,t=Nr(i,r),t.ref=e.ref,t.return=e,e.child=t}function lb(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(wa(i,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,Jn(t,e,s)}return df(t,e,n,r,s)}function cb(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(pi,$t),$t|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(pi,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ee(pi,$t),$t|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ee(pi,$t),$t|=r;return St(t,e,s,n),e.child}function ub(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function df(t,e,n,r,s){var i=Lt(n)?Ps:wt.current;return i=Ci(e,i),_i(e,s),n=Fm(t,e,n,r,i,s),r=zm(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jn(t,e,s)):(Pe&&r&&Am(e),e.flags|=1,St(t,e,n,s),e.child)}function a0(t,e,n,r,s){if(Lt(n)){var i=!0;Vc(e)}else i=!1;if(_i(e,s),e.stateNode===null)mc(t,e),ib(e,n,r),uf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ln(c):(c=Lt(n)?Ps:wt.current,c=Ci(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&t0(e,o,r,c),gr=!1;var m=e.memoizedState;o.state=m,Uc(e,r,o,s),l=e.memoizedState,a!==r||m!==l||Vt.current||gr?(typeof d=="function"&&(cf(e,n,d,r),l=e.memoizedState),(a=gr||e0(e,n,a,r,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Lw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ln(l):(l=Lt(n)?Ps:wt.current,l=Ci(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&t0(e,o,r,l),gr=!1,m=e.memoizedState,o.state=m,Uc(e,r,o,s);var x=e.memoizedState;a!==f||m!==x||Vt.current||gr?(typeof g=="function"&&(cf(e,n,g,r),x=e.memoizedState),(c=gr||e0(e,n,c,r,m,x,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return ff(t,e,n,r,i,s)}function ff(t,e,n,r,s,i){ub(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&qy(e,n,!1),Jn(t,e,i);r=e.stateNode,jI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Pi(e,t.child,null,i),e.child=Pi(e,null,a,i)):St(t,e,a,i),e.memoizedState=r.state,s&&qy(e,n,!0),e.child}function hb(t){var e=t.stateNode;e.pendingContext?Hy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hy(t,e.context,!1),Mm(t,e.containerInfo)}function l0(t,e,n,r,s){return ki(),km(s),e.flags|=256,St(t,e,n,r),e.child}var mf={dehydrated:null,treeContext:null,retryLane:0};function pf(t){return{baseLanes:t,cachePool:null,transitions:null}}function db(t,e,n){var r=e.pendingProps,s=Re.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ee(Re,s&1),t===null)return af(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Vu(o,r,0,null),t=Ts(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=pf(n),e.memoizedState=mf,t):$m(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return DI(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Nr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Nr(a,i):(i=Ts(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?pf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=mf,r}return i=t.child,t=i.sibling,r=Nr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $m(t,e){return e=Vu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ll(t,e,n,r){return r!==null&&km(r),Pi(e,t.child,null,n),t=$m(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=nd(Error(z(422))),Ll(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Vu({mode:"visible",children:r.children},s,0,null),i=Ts(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pi(e,t.child,null,o),e.child.memoizedState=pf(o),e.memoizedState=mf,i);if(!(e.mode&1))return Ll(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=nd(i,r,void 0),Ll(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ot||a){if(r=st,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xn(t,s),yn(r,t,s,-1))}return Gm(),r=nd(Error(z(421))),Ll(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Wt=Cr(s.nextSibling),qt=e,Pe=!0,pn=null,t!==null&&(en[tn++]=qn,en[tn++]=Kn,en[tn++]=Rs,qn=t.id,Kn=t.overflow,Rs=e),e=$m(e,r.children),e.flags|=4096,e)}function c0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lf(t.return,e,n)}function rd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function fb(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(St(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&c0(t,n,e);else if(t.tag===19)c0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$c(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),rd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$c(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}rd(e,!0,n,null,i);break;case"together":rd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),js|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MI(t,e,n){switch(e.tag){case 3:hb(e),ki();break;case 5:Fw(e);break;case 1:Lt(e.type)&&Vc(e);break;case 4:Mm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ee(zc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?db(t,e,n):(Ee(Re,Re.current&1),t=Jn(t,e,n),t!==null?t.sibling:null);Ee(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return fb(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,cb(t,e,n)}return Jn(t,e,n)}var mb,gf,pb,gb;mb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gf=function(){};pb=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,_s(Nn.current);var i=null;switch(n){case"input":s=Vd(t,s),r=Vd(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=zd(t,s),r=zd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mc)}Ud(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ma.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ma.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Te("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};gb=function(t,e,n,r){n!==r&&(e.flags|=4)};function To(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function OI(t,e,n){var r=e.pendingProps;switch(Cm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Lt(e.type)&&Oc(),ft(e),null;case 3:return r=e.stateNode,Ri(),ke(Vt),ke(wt),Vm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pn!==null&&(Sf(pn),pn=null))),gf(t,e),ft(e),null;case 5:Om(e);var s=_s(Ia.current);if(n=e.type,t!==null&&e.stateNode!=null)pb(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return ft(e),null}if(t=_s(Nn.current),Ol(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Pn]=e,r[Sa]=i,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<Lo.length;s++)Te(Lo[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":vy(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":_y(r,i),Te("invalid",r)}Ud(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ml(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ml(r.textContent,a,t),s=["children",""+a]):ma.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":Al(r),xy(r,i,!0);break;case"textarea":Al(r),wy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Mc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=W_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Pn]=e,t[Sa]=r,mb(t,e,!1,!1),e.stateNode=t;e:{switch(o=$d(n,r),n){case"dialog":Te("cancel",t),Te("close",t),s=r;break;case"iframe":case"object":case"embed":Te("load",t),s=r;break;case"video":case"audio":for(s=0;s<Lo.length;s++)Te(Lo[s],t);s=r;break;case"source":Te("error",t),s=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),s=r;break;case"details":Te("toggle",t),s=r;break;case"input":vy(t,r),s=Vd(t,r),Te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),Te("invalid",t);break;case"textarea":_y(t,r),s=zd(t,r),Te("invalid",t);break;default:s=r}Ud(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?K_(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&H_(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&pa(t,l):typeof l=="number"&&pa(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ma.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Te("scroll",t):l!=null&&fm(t,i,l,o))}switch(n){case"input":Al(t),xy(t,r,!1);break;case"textarea":Al(t),wy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?gi(t,!!r.multiple,i,!1):r.defaultValue!=null&&gi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Mc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)gb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=_s(Ia.current),_s(Nn.current),Ol(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pn]=e,(i=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Ml(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ml(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=e,e.stateNode=r}return ft(e),null;case 13:if(ke(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Wt!==null&&e.mode&1&&!(e.flags&128))Dw(),ki(),e.flags|=98560,i=!1;else if(i=Ol(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Pn]=e}else ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),i=!1}else pn!==null&&(Sf(pn),pn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Xe===0&&(Xe=3):Gm())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return Ri(),gf(t,e),t===null&&ba(e.stateNode.containerInfo),ft(e),null;case 10:return Nm(e.type._context),ft(e),null;case 17:return Lt(e.type)&&Oc(),ft(e),null;case 19:if(ke(Re),i=e.memoizedState,i===null)return ft(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)To(i,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$c(t),o!==null){for(e.flags|=128,To(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Le()>ji&&(e.flags|=128,r=!0,To(i,!1),e.lanes=4194304)}else{if(!r)if(t=$c(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),To(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pe)return ft(e),null}else 2*Le()-i.renderingStartTime>ji&&n!==1073741824&&(e.flags|=128,r=!0,To(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Le(),e.sibling=null,n=Re.current,Ee(Re,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return Ym(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function VI(t,e){switch(Cm(e),e.tag){case 1:return Lt(e.type)&&Oc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ri(),ke(Vt),ke(wt),Vm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Om(e),null;case 13:if(ke(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Re),null;case 4:return Ri(),null;case 10:return Nm(e.type._context),null;case 22:case 23:return Ym(),null;case 24:return null;default:return null}}var Fl=!1,yt=!1,LI=typeof WeakSet=="function"?WeakSet:Set,H=null;function mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function yf(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var u0=!1;function FI(t,e){if(Zd=Nc,t=ww(),Im(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,m=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++d===r&&(l=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ef={focusedElem:t,selectionRange:n},Nc=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var _=x.memoizedProps,T=x.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?_:fn(e.type,_),T);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(R){Oe(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return x=u0,u0=!1,x}function ta(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yf(e,n,i)}s=s.next}while(s!==r)}}function Mu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yb(t){var e=t.alternate;e!==null&&(t.alternate=null,yb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[Sa],delete e[rf],delete e[wI],delete e[bI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vb(t){return t.tag===5||t.tag===3||t.tag===4}function h0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mc));else if(r!==4&&(t=t.child,t!==null))for(xf(t,e,n),t=t.sibling;t!==null;)xf(t,e,n),t=t.sibling}function _f(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_f(t,e,n),t=t.sibling;t!==null;)_f(t,e,n),t=t.sibling}var it=null,mn=!1;function dr(t,e,n){for(n=n.child;n!==null;)xb(t,e,n),n=n.sibling}function xb(t,e,n){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(Au,n)}catch{}switch(n.tag){case 5:yt||mi(n,e);case 6:var r=it,s=mn;it=null,dr(t,e,n),it=r,mn=s,it!==null&&(mn?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(mn?(t=it,n=n.stateNode,t.nodeType===8?Qh(t.parentNode,n):t.nodeType===1&&Qh(t,n),xa(t)):Qh(it,n.stateNode));break;case 4:r=it,s=mn,it=n.stateNode.containerInfo,mn=!0,dr(t,e,n),it=r,mn=s;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yf(n,e,o),s=s.next}while(s!==r)}dr(t,e,n);break;case 1:if(!yt&&(mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Oe(n,e,a)}dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,dr(t,e,n),yt=r):dr(t,e,n);break;default:dr(t,e,n)}}function d0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new LI),e.forEach(function(r){var s=YI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:it=a.stateNode,mn=!1;break e;case 3:it=a.stateNode.containerInfo,mn=!0;break e;case 4:it=a.stateNode.containerInfo,mn=!0;break e}a=a.return}if(it===null)throw Error(z(160));xb(i,o,s),it=null,mn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Oe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_b(e,t),e=e.sibling}function _b(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),En(t),r&4){try{ta(3,t,t.return),Mu(3,t)}catch(_){Oe(t,t.return,_)}try{ta(5,t,t.return)}catch(_){Oe(t,t.return,_)}}break;case 1:hn(e,t),En(t),r&512&&n!==null&&mi(n,n.return);break;case 5:if(hn(e,t),En(t),r&512&&n!==null&&mi(n,n.return),t.flags&32){var s=t.stateNode;try{pa(s,"")}catch(_){Oe(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&U_(s,i),$d(a,o);var c=$d(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?K_(s,f):d==="dangerouslySetInnerHTML"?H_(s,f):d==="children"?pa(s,f):fm(s,d,f,c)}switch(a){case"input":Ld(s,i);break;case"textarea":$_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?gi(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?gi(s,!!i.multiple,i.defaultValue,!0):gi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Sa]=i}catch(_){Oe(t,t.return,_)}}break;case 6:if(hn(e,t),En(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){Oe(t,t.return,_)}}break;case 3:if(hn(e,t),En(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xa(e.containerInfo)}catch(_){Oe(t,t.return,_)}break;case 4:hn(e,t),En(t);break;case 13:hn(e,t),En(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qm=Le())),r&4&&d0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(c=yt)||d,hn(e,t),yt=c):hn(e,t),En(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(H=t,d=t.child;d!==null;){for(f=H=d;H!==null;){switch(m=H,g=m.child,m.tag){case 0:case 11:case 14:case 15:ta(4,m,m.return);break;case 1:mi(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(_){Oe(r,n,_)}}break;case 5:mi(m,m.return);break;case 22:if(m.memoizedState!==null){m0(f);continue}}g!==null?(g.return=m,H=g):m0(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=q_("display",o))}catch(_){Oe(t,t.return,_)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){Oe(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:hn(e,t),En(t),r&4&&d0(t);break;case 21:break;default:hn(e,t),En(t)}}function En(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vb(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(pa(s,""),r.flags&=-33);var i=h0(t);_f(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=h0(t);xf(t,a,o);break;default:throw Error(z(161))}}catch(l){Oe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zI(t,e,n){H=t,wb(t)}function wb(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fl;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||yt;a=Fl;var c=yt;if(Fl=o,(yt=l)&&!c)for(H=s;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?p0(s):l!==null?(l.return=o,H=l):p0(s);for(;i!==null;)H=i,wb(i),i=i.sibling;H=s,Fl=a,yt=c}f0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):f0(t)}}function f0(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||Mu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Xy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Xy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&xa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}yt||e.flags&512&&vf(e)}catch(m){Oe(e,e.return,m)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function m0(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function p0(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mu(4,e)}catch(l){Oe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Oe(e,s,l)}}var i=e.return;try{vf(e)}catch(l){Oe(e,i,l)}break;case 5:var o=e.return;try{vf(e)}catch(l){Oe(e,o,l)}}}catch(l){Oe(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var BI=Math.ceil,qc=sr.ReactCurrentDispatcher,Wm=sr.ReactCurrentOwner,an=sr.ReactCurrentBatchConfig,ae=0,st=null,$e=null,lt=0,$t=0,pi=Xr(0),Xe=0,Pa=null,js=0,Ou=0,Hm=0,na=null,jt=null,qm=0,ji=1/0,$n=null,Kc=!1,wf=null,Pr=null,zl=!1,_r=null,Yc=0,ra=0,bf=null,pc=-1,gc=0;function It(){return ae&6?Le():pc!==-1?pc:pc=Le()}function Rr(t){return t.mode&1?ae&2&&lt!==0?lt&-lt:SI.transition!==null?(gc===0&&(gc=iw()),gc):(t=ye,t!==0||(t=window.event,t=t===void 0?16:dw(t.type)),t):1}function yn(t,e,n,r){if(50<ra)throw ra=0,bf=null,Error(z(185));Xa(t,n,r),(!(ae&2)||t!==st)&&(t===st&&(!(ae&2)&&(Ou|=n),Xe===4&&vr(t,lt)),Ft(t,r),n===1&&ae===0&&!(e.mode&1)&&(ji=Le()+500,Nu&&Jr()))}function Ft(t,e){var n=t.callbackNode;ST(t,e);var r=Rc(t,t===st?lt:0);if(r===0)n!==null&&Sy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Sy(n),e===1)t.tag===0?EI(g0.bind(null,t)):Rw(g0.bind(null,t)),xI(function(){!(ae&6)&&Jr()}),n=null;else{switch(ow(r)){case 1:n=vm;break;case 4:n=rw;break;case 16:n=Pc;break;case 536870912:n=sw;break;default:n=Pc}n=kb(n,bb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bb(t,e){if(pc=-1,gc=0,ae&6)throw Error(z(327));var n=t.callbackNode;if(wi()&&t.callbackNode!==n)return null;var r=Rc(t,t===st?lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gc(t,r);else{e=r;var s=ae;ae|=2;var i=Sb();(st!==t||lt!==e)&&($n=null,ji=Le()+500,Ss(t,e));do try{WI();break}catch(a){Eb(t,a)}while(!0);Rm(),qc.current=i,ae=s,$e!==null?e=0:(st=null,lt=0,e=Xe)}if(e!==0){if(e===2&&(s=Yd(t),s!==0&&(r=s,e=Ef(t,s))),e===1)throw n=Pa,Ss(t,0),vr(t,r),Ft(t,Le()),n;if(e===6)vr(t,r);else{if(s=t.current.alternate,!(r&30)&&!UI(s)&&(e=Gc(t,r),e===2&&(i=Yd(t),i!==0&&(r=i,e=Ef(t,i))),e===1))throw n=Pa,Ss(t,0),vr(t,r),Ft(t,Le()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:fs(t,jt,$n);break;case 3:if(vr(t,r),(r&130023424)===r&&(e=qm+500-Le(),10<e)){if(Rc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=nf(fs.bind(null,t,jt,$n),e);break}fs(t,jt,$n);break;case 4:if(vr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BI(r/1960))-r,10<r){t.timeoutHandle=nf(fs.bind(null,t,jt,$n),r);break}fs(t,jt,$n);break;case 5:fs(t,jt,$n);break;default:throw Error(z(329))}}}return Ft(t,Le()),t.callbackNode===n?bb.bind(null,t):null}function Ef(t,e){var n=na;return t.current.memoizedState.isDehydrated&&(Ss(t,e).flags|=256),t=Gc(t,e),t!==2&&(e=jt,jt=n,e!==null&&Sf(e)),t}function Sf(t){jt===null?jt=t:jt.push.apply(jt,t)}function UI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!xn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vr(t,e){for(e&=~Hm,e&=~Ou,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function g0(t){if(ae&6)throw Error(z(327));wi();var e=Rc(t,0);if(!(e&1))return Ft(t,Le()),null;var n=Gc(t,e);if(t.tag!==0&&n===2){var r=Yd(t);r!==0&&(e=r,n=Ef(t,r))}if(n===1)throw n=Pa,Ss(t,0),vr(t,e),Ft(t,Le()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fs(t,jt,$n),Ft(t,Le()),null}function Km(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(ji=Le()+500,Nu&&Jr())}}function Ds(t){_r!==null&&_r.tag===0&&!(ae&6)&&wi();var e=ae;ae|=1;var n=an.transition,r=ye;try{if(an.transition=null,ye=1,t)return t()}finally{ye=r,an.transition=n,ae=e,!(ae&6)&&Jr()}}function Ym(){$t=pi.current,ke(pi)}function Ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vI(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Cm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Oc();break;case 3:Ri(),ke(Vt),ke(wt),Vm();break;case 5:Om(r);break;case 4:Ri();break;case 13:ke(Re);break;case 19:ke(Re);break;case 10:Nm(r.type._context);break;case 22:case 23:Ym()}n=n.return}if(st=t,$e=t=Nr(t.current,null),lt=$t=e,Xe=0,Pa=null,Hm=Ou=js=0,jt=na=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xs=null}return t}function Eb(t,e){do{var n=$e;try{if(Rm(),dc.current=Hc,Wc){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Wc=!1}if(Ns=0,nt=Qe=Ne=null,ea=!1,Aa=0,Wm.current=null,n===null||n.return===null){Xe=1,Pa=e,$e=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=lt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=r0(o);if(g!==null){g.flags&=-257,s0(g,o,a,i,e),g.mode&1&&n0(i,c,e),e=g,l=c;var x=e.updateQueue;if(x===null){var _=new Set;_.add(l),e.updateQueue=_}else x.add(l);break e}else{if(!(e&1)){n0(i,c,e),Gm();break e}l=Error(z(426))}}else if(Pe&&a.mode&1){var T=r0(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),s0(T,o,a,i,e),km(Ni(l,a));break e}}i=l=Ni(l,a),Xe!==4&&(Xe=2),na===null?na=[i]:na.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=ob(i,l,e);Qy(i,w);break e;case 1:a=l;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Pr===null||!Pr.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=ab(i,a,e);Qy(i,R);break e}}i=i.return}while(i!==null)}Ib(n)}catch(j){e=j,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function Sb(){var t=qc.current;return qc.current=Hc,t===null?Hc:t}function Gm(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),st===null||!(js&268435455)&&!(Ou&268435455)||vr(st,lt)}function Gc(t,e){var n=ae;ae|=2;var r=Sb();(st!==t||lt!==e)&&($n=null,Ss(t,e));do try{$I();break}catch(s){Eb(t,s)}while(!0);if(Rm(),ae=n,qc.current=r,$e!==null)throw Error(z(261));return st=null,lt=0,Xe}function $I(){for(;$e!==null;)Tb($e)}function WI(){for(;$e!==null&&!pT();)Tb($e)}function Tb(t){var e=Cb(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?Ib(t):$e=e,Wm.current=null}function Ib(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VI(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,$e=null;return}}else if(n=OI(n,e,$t),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Xe===0&&(Xe=5)}function fs(t,e,n){var r=ye,s=an.transition;try{an.transition=null,ye=1,HI(t,e,n,r)}finally{an.transition=s,ye=r}return null}function HI(t,e,n,r){do wi();while(_r!==null);if(ae&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(TT(t,i),t===st&&($e=st=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zl||(zl=!0,kb(Pc,function(){return wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=an.transition,an.transition=null;var o=ye;ye=1;var a=ae;ae|=4,Wm.current=null,FI(t,n),_b(n,t),hI(ef),Nc=!!Zd,ef=Zd=null,t.current=n,zI(n),gT(),ae=a,ye=o,an.transition=i}else t.current=n;if(zl&&(zl=!1,_r=t,Yc=s),i=t.pendingLanes,i===0&&(Pr=null),xT(n.stateNode),Ft(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Kc)throw Kc=!1,t=wf,wf=null,t;return Yc&1&&t.tag!==0&&wi(),i=t.pendingLanes,i&1?t===bf?ra++:(ra=0,bf=t):ra=0,Jr(),null}function wi(){if(_r!==null){var t=ow(Yc),e=an.transition,n=ye;try{if(an.transition=null,ye=16>t?16:t,_r===null)var r=!1;else{if(t=_r,_r=null,Yc=0,ae&6)throw Error(z(331));var s=ae;for(ae|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var d=H;switch(d.tag){case 0:case 11:case 15:ta(8,d,i)}var f=d.child;if(f!==null)f.return=d,H=f;else for(;H!==null;){d=H;var m=d.sibling,g=d.return;if(yb(d),d===c){H=null;break}if(m!==null){m.return=g,H=m;break}H=g}}}var x=i.alternate;if(x!==null){var _=x.child;if(_!==null){x.child=null;do{var T=_.sibling;_.sibling=null,_=T}while(_!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ta(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,H=w;break e}H=i.return}}var v=t.current;for(H=v;H!==null;){o=H;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,H=b;else e:for(o=v;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Mu(9,a)}}catch(j){Oe(a,a.return,j)}if(a===o){H=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,H=R;break e}H=a.return}}if(ae=s,Jr(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(Au,t)}catch{}r=!0}return r}finally{ye=n,an.transition=e}}return!1}function y0(t,e,n){e=Ni(n,e),e=ob(t,e,1),t=kr(t,e,1),e=It(),t!==null&&(Xa(t,1,e),Ft(t,e))}function Oe(t,e,n){if(t.tag===3)y0(t,t,n);else for(;e!==null;){if(e.tag===3){y0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pr===null||!Pr.has(r))){t=Ni(n,t),t=ab(e,t,1),e=kr(e,t,1),t=It(),e!==null&&(Xa(e,1,t),Ft(e,t));break}}e=e.return}}function qI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(lt&n)===n&&(Xe===4||Xe===3&&(lt&130023424)===lt&&500>Le()-qm?Ss(t,0):Hm|=n),Ft(t,e)}function Ab(t,e){e===0&&(t.mode&1?(e=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):e=1);var n=It();t=Xn(t,e),t!==null&&(Xa(t,e,n),Ft(t,n))}function KI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ab(t,n)}function YI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Ab(t,n)}var Cb;Cb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,MI(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,Pe&&e.flags&1048576&&Nw(e,Fc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mc(t,e),t=e.pendingProps;var s=Ci(e,wt.current);_i(e,n),s=Fm(null,e,r,t,s,n);var i=zm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(i=!0,Vc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Dm(e),s.updater=Du,e.stateNode=s,s._reactInternals=e,uf(e,r,t,n),e=ff(null,e,r,!0,i,n)):(e.tag=0,Pe&&i&&Am(e),St(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=QI(r),t=fn(r,t),s){case 0:e=df(null,e,r,t,n);break e;case 1:e=a0(null,e,r,t,n);break e;case 11:e=i0(null,e,r,t,n);break e;case 14:e=o0(null,e,r,fn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),df(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),a0(t,e,r,s,n);case 3:e:{if(hb(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Lw(t,e),Uc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ni(Error(z(423)),e),e=l0(t,e,r,n,s);break e}else if(r!==s){s=Ni(Error(z(424)),e),e=l0(t,e,r,n,s);break e}else for(Wt=Cr(e.stateNode.containerInfo.firstChild),qt=e,Pe=!0,pn=null,n=Ow(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ki(),r===s){e=Jn(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return Fw(e),t===null&&af(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,tf(r,s)?o=null:i!==null&&tf(r,i)&&(e.flags|=32),ub(t,e),St(t,e,o,n),e.child;case 6:return t===null&&af(e),null;case 13:return db(t,e,n);case 4:return Mm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pi(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),i0(t,e,r,s,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ee(zc,r._currentValue),r._currentValue=o,i!==null)if(xn(i.value,o)){if(i.children===s.children&&!Vt.current){e=Jn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Yn(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),lf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}St(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,_i(e,n),s=ln(s),r=r(s),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,s=fn(r,e.pendingProps),s=fn(r.type,s),o0(t,e,r,s,n);case 15:return lb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),mc(t,e),e.tag=1,Lt(r)?(t=!0,Vc(e)):t=!1,_i(e,n),ib(e,r,s),uf(e,r,s,n),ff(null,e,r,!0,t,n);case 19:return fb(t,e,n);case 22:return cb(t,e,n)}throw Error(z(156,e.tag))};function kb(t,e){return nw(t,e)}function GI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,r){return new GI(t,e,n,r)}function Qm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QI(t){if(typeof t=="function")return Qm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pm)return 11;if(t===gm)return 14}return 2}function Nr(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Qm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ii:return Ts(n.children,s,i,e);case mm:o=8,s|=8;break;case jd:return t=rn(12,n,e,s|2),t.elementType=jd,t.lanes=i,t;case Dd:return t=rn(13,n,e,s),t.elementType=Dd,t.lanes=i,t;case Md:return t=rn(19,n,e,s),t.elementType=Md,t.lanes=i,t;case F_:return Vu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V_:o=10;break e;case L_:o=9;break e;case pm:o=11;break e;case gm:o=14;break e;case pr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=rn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ts(t,e,n,r){return t=rn(7,t,r,e),t.lanes=n,t}function Vu(t,e,n,r){return t=rn(22,t,r,e),t.elementType=F_,t.lanes=n,t.stateNode={isHidden:!1},t}function sd(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function id(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fh(0),this.expirationTimes=Fh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xm(t,e,n,r,s,i,o,a,l){return t=new XI(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=rn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dm(i),t}function JI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:si,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Pb(t){if(!t)return zr;t=t._reactInternals;e:{if(Bs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Lt(n))return Pw(t,n,e)}return e}function Rb(t,e,n,r,s,i,o,a,l){return t=Xm(n,r,!0,t,s,i,o,a,l),t.context=Pb(null),n=t.current,r=It(),s=Rr(n),i=Yn(r,s),i.callback=e??null,kr(n,i,s),t.current.lanes=s,Xa(t,s,r),Ft(t,r),t}function Lu(t,e,n,r){var s=e.current,i=It(),o=Rr(s);return n=Pb(n),e.context===null?e.context=n:e.pendingContext=n,e=Yn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=kr(s,e,o),t!==null&&(yn(t,s,o,i),hc(t,s,o)),o}function Qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function v0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jm(t,e){v0(t,e),(t=t.alternate)&&v0(t,e)}function ZI(){return null}var Nb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zm(t){this._internalRoot=t}Fu.prototype.render=Zm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Lu(t,e,null,null)};Fu.prototype.unmount=Zm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ds(function(){Lu(null,t,null,null)}),e[Qn]=null}};function Fu(t){this._internalRoot=t}Fu.prototype.unstable_scheduleHydration=function(t){if(t){var e=cw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yr.length&&e!==0&&e<yr[n].priority;n++);yr.splice(n,0,t),n===0&&hw(t)}};function ep(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function x0(){}function eA(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Qc(o);i.call(c)}}var o=Rb(e,r,t,0,null,!1,!1,"",x0);return t._reactRootContainer=o,t[Qn]=o.current,ba(t.nodeType===8?t.parentNode:t),Ds(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Qc(l);a.call(c)}}var l=Xm(t,0,!1,null,null,!1,!1,"",x0);return t._reactRootContainer=l,t[Qn]=l.current,ba(t.nodeType===8?t.parentNode:t),Ds(function(){Lu(e,l,n,r)}),l}function Bu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Qc(o);a.call(l)}}Lu(e,o,t,s)}else o=eA(n,e,t,s,r);return Qc(o)}aw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vo(e.pendingLanes);n!==0&&(xm(e,n|1),Ft(e,Le()),!(ae&6)&&(ji=Le()+500,Jr()))}break;case 13:Ds(function(){var r=Xn(t,1);if(r!==null){var s=It();yn(r,t,1,s)}}),Jm(t,1)}};_m=function(t){if(t.tag===13){var e=Xn(t,134217728);if(e!==null){var n=It();yn(e,t,134217728,n)}Jm(t,134217728)}};lw=function(t){if(t.tag===13){var e=Rr(t),n=Xn(t,e);if(n!==null){var r=It();yn(n,t,e,r)}Jm(t,e)}};cw=function(){return ye};uw=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};Hd=function(t,e,n){switch(e){case"input":if(Ld(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ru(r);if(!s)throw Error(z(90));B_(r),Ld(r,s)}}}break;case"textarea":$_(t,n);break;case"select":e=n.value,e!=null&&gi(t,!!n.multiple,e,!1)}};Q_=Km;X_=Ds;var tA={usingClientEntryPoint:!1,Events:[Za,ci,Ru,Y_,G_,Km]},Io={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nA={bundleType:Io.bundleType,version:Io.version,rendererPackageName:Io.rendererPackageName,rendererConfig:Io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ew(t),t===null?null:t.stateNode},findFiberByHostInstance:Io.findFiberByHostInstance||ZI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Au=Bl.inject(nA),Rn=Bl}catch{}}Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tA;Qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ep(e))throw Error(z(200));return JI(t,e,null,n)};Qt.createRoot=function(t,e){if(!ep(t))throw Error(z(299));var n=!1,r="",s=Nb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Xm(t,1,!1,null,null,n,!1,r,s),t[Qn]=e.current,ba(t.nodeType===8?t.parentNode:t),new Zm(e)};Qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=ew(e),t=t===null?null:t.stateNode,t};Qt.flushSync=function(t){return Ds(t)};Qt.hydrate=function(t,e,n){if(!zu(e))throw Error(z(200));return Bu(null,t,e,!0,n)};Qt.hydrateRoot=function(t,e,n){if(!ep(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Nb;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Rb(e,null,t,1,n??null,s,!1,i,o),t[Qn]=e.current,ba(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Fu(e)};Qt.render=function(t,e,n){if(!zu(e))throw Error(z(200));return Bu(null,t,e,!1,n)};Qt.unmountComponentAtNode=function(t){if(!zu(t))throw Error(z(40));return t._reactRootContainer?(Ds(function(){Bu(null,null,t,!1,function(){t._reactRootContainer=null,t[Qn]=null})}),!0):!1};Qt.unstable_batchedUpdates=Km;Qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zu(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Bu(t,e,n,!1,r)};Qt.version="18.3.1-next-f1338f8080-20240426";function jb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jb)}catch(t){console.error(t)}}jb(),j_.exports=Qt;var rA=j_.exports,_0=rA;Rd.createRoot=_0.createRoot,Rd.hydrateRoot=_0.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ra(){return Ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ra.apply(this,arguments)}var wr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wr||(wr={}));const w0="popstate";function sA(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Tf("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Xc(s)}return oA(e,n,null,t)}function ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iA(){return Math.random().toString(36).substr(2,8)}function b0(t,e){return{usr:t.state,key:t.key,idx:e}}function Tf(t,e,n,r){return n===void 0&&(n=null),Ra({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qi(e):e,{state:n,key:e&&e.key||r||iA()})}function Xc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function oA(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=wr.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ra({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=wr.Pop;let T=d(),w=T==null?null:T-c;c=T,l&&l({action:a,location:_.location,delta:w})}function m(T,w){a=wr.Push;let v=Tf(_.location,T,w);c=d()+1;let b=b0(v,c),R=_.createHref(v);try{o.pushState(b,"",R)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(R)}i&&l&&l({action:a,location:_.location,delta:1})}function g(T,w){a=wr.Replace;let v=Tf(_.location,T,w);c=d();let b=b0(v,c),R=_.createHref(v);o.replaceState(b,"",R),i&&l&&l({action:a,location:_.location,delta:0})}function x(T){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof T=="string"?T:Xc(T);return v=v.replace(/ $/,"%20"),ze(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let _={get action(){return a},get location(){return t(s,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(w0,f),l=T,()=>{s.removeEventListener(w0,f),l=null}},createHref(T){return e(s,T)},createURL:x,encodeLocation(T){let w=x(T);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:g,go(T){return o.go(T)}};return _}var E0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(E0||(E0={}));function aA(t,e,n){return n===void 0&&(n="/"),lA(t,e,n)}function lA(t,e,n,r){let s=typeof e=="string"?qi(e):e,i=np(s.pathname||"/",n);if(i==null)return null;let o=Db(t);cA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=wA(i);a=vA(o[l],c)}return a}function Db(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ze(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=jr([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Db(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:gA(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Mb(i.path))s(i,o,l)}),e}function Mb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Mb(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function cA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uA=/^:[\w-]+$/,hA=3,dA=2,fA=1,mA=10,pA=-2,S0=t=>t==="*";function gA(t,e){let n=t.split("/"),r=n.length;return n.some(S0)&&(r+=pA),e&&(r+=dA),n.filter(s=>!S0(s)).reduce((s,i)=>s+(uA.test(i)?hA:i===""?fA:mA),r)}function yA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function vA(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=xA({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:jr([i,f.pathname]),pathnameBase:IA(jr([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=jr([i,f.pathnameBase]))}return o}function xA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_A(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:m,isOptional:g}=d;if(m==="*"){let _=a[f]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const x=a[f];return g&&!x?c[m]=void 0:c[m]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function _A(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),tp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function wA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function np(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const bA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EA=t=>bA.test(t);function SA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?qi(t):t,i;if(n)if(EA(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),tp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=T0(n.substring(1),"/"):i=T0(n,e)}else i=e;return{pathname:i,search:AA(r),hash:CA(s)}}function T0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function od(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rp(t,e){let n=TA(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function sp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=qi(t):(s=Ra({},t),ze(!s.pathname||!s.pathname.includes("?"),od("?","pathname","search",s)),ze(!s.pathname||!s.pathname.includes("#"),od("#","pathname","hash",s)),ze(!s.search||!s.search.includes("#"),od("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=SA(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const jr=t=>t.join("/").replace(/\/\/+/g,"/"),IA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),AA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ob=["post","put","patch","delete"];new Set(Ob);const PA=["get",...Ob];new Set(PA);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Na(){return Na=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Na.apply(this,arguments)}const ip=M.createContext(null),RA=M.createContext(null),Zr=M.createContext(null),Uu=M.createContext(null),es=M.createContext({outlet:null,matches:[],isDataRoute:!1}),Vb=M.createContext(null);function NA(t,e){let{relative:n}=e===void 0?{}:e;Ki()||ze(!1);let{basename:r,navigator:s}=M.useContext(Zr),{hash:i,pathname:o,search:a}=Fb(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:jr([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Ki(){return M.useContext(Uu)!=null}function Yi(){return Ki()||ze(!1),M.useContext(Uu).location}function Lb(t){M.useContext(Zr).static||M.useLayoutEffect(t)}function $u(){let{isDataRoute:t}=M.useContext(es);return t?HA():jA()}function jA(){Ki()||ze(!1);let t=M.useContext(ip),{basename:e,future:n,navigator:r}=M.useContext(Zr),{matches:s}=M.useContext(es),{pathname:i}=Yi(),o=JSON.stringify(rp(s,n.v7_relativeSplatPath)),a=M.useRef(!1);return Lb(()=>{a.current=!0}),M.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=sp(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:jr([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,o,i,t])}function Fb(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Zr),{matches:s}=M.useContext(es),{pathname:i}=Yi(),o=JSON.stringify(rp(s,r.v7_relativeSplatPath));return M.useMemo(()=>sp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function DA(t,e){return MA(t,e)}function MA(t,e,n,r){Ki()||ze(!1);let{navigator:s}=M.useContext(Zr),{matches:i}=M.useContext(es),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Yi(),d;if(e){var f;let T=typeof e=="string"?qi(e):e;l==="/"||(f=T.pathname)!=null&&f.startsWith(l)||ze(!1),d=T}else d=c;let m=d.pathname||"/",g=m;if(l!=="/"){let T=l.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let x=aA(t,{pathname:g}),_=zA(x&&x.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:jr([l,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:jr([l,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,r);return e&&_?M.createElement(Uu.Provider,{value:{location:Na({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:wr.Pop}},_):_}function OA(){let t=WA(),e=kA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const VA=M.createElement(OA,null);class LA extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(es.Provider,{value:this.props.routeContext},M.createElement(Vb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FA(t){let{routeContext:e,match:n,children:r}=t,s=M.useContext(ip);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(es.Provider,{value:e},r)}function zA(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||ze(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:m,errors:g}=n,x=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let g,x=!1,_=null,T=null;n&&(g=a&&f.route.id?a[f.route.id]:void 0,_=f.route.errorElement||VA,l&&(c<0&&m===0?(qA("route-fallback"),x=!0,T=null):c===m&&(x=!0,T=f.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),v=()=>{let b;return g?b=_:x?b=T:f.route.Component?b=M.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,M.createElement(FA,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?M.createElement(LA,{location:n.location,revalidation:n.revalidation,component:_,error:g,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var zb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zb||{}),Bb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Bb||{});function BA(t){let e=M.useContext(ip);return e||ze(!1),e}function UA(t){let e=M.useContext(RA);return e||ze(!1),e}function $A(t){let e=M.useContext(es);return e||ze(!1),e}function Ub(t){let e=$A(),n=e.matches[e.matches.length-1];return n.route.id||ze(!1),n.route.id}function WA(){var t;let e=M.useContext(Vb),n=UA(),r=Ub();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function HA(){let{router:t}=BA(zb.UseNavigateStable),e=Ub(Bb.UseNavigateStable),n=M.useRef(!1);return Lb(()=>{n.current=!0}),M.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Na({fromRouteId:e},i)))},[t,e])}const I0={};function qA(t,e,n){I0[t]||(I0[t]=!0)}function KA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function If(t){let{to:e,replace:n,state:r,relative:s}=t;Ki()||ze(!1);let{future:i,static:o}=M.useContext(Zr),{matches:a}=M.useContext(es),{pathname:l}=Yi(),c=$u(),d=sp(e,rp(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(d);return M.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function Rt(t){ze(!1)}function YA(t){let{basename:e="/",children:n=null,location:r,navigationType:s=wr.Pop,navigator:i,static:o=!1,future:a}=t;Ki()&&ze(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:i,static:o,future:Na({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=qi(r));let{pathname:d="/",search:f="",hash:m="",state:g=null,key:x="default"}=r,_=M.useMemo(()=>{let T=np(d,l);return T==null?null:{location:{pathname:T,search:f,hash:m,state:g,key:x},navigationType:s}},[l,d,f,m,g,x,s]);return _==null?null:M.createElement(Zr.Provider,{value:c},M.createElement(Uu.Provider,{children:n,value:_}))}function GA(t){let{children:e,location:n}=t;return DA(Af(e),n)}new Promise(()=>{});function Af(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,s)=>{if(!M.isValidElement(r))return;let i=[...e,s];if(r.type===M.Fragment){n.push.apply(n,Af(r.props.children,i));return}r.type!==Rt&&ze(!1),!r.props.index||!r.props.children||ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Af(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cf(){return Cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cf.apply(this,arguments)}function QA(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function XA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function JA(t,e){return t.button===0&&(!e||e==="_self")&&!XA(t)}const ZA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],eC="6";try{window.__reactRouterVersion=eC}catch{}const tC="startTransition",A0=qS[tC];function nC(t){let{basename:e,children:n,future:r,window:s}=t,i=M.useRef();i.current==null&&(i.current=sA({window:s,v5Compat:!0}));let o=i.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=M.useCallback(f=>{c&&A0?A0(()=>l(f)):l(f)},[l,c]);return M.useLayoutEffect(()=>o.listen(d),[o,d]),M.useEffect(()=>KA(r),[r]),M.createElement(YA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const rC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jc=M.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:f}=e,m=QA(e,ZA),{basename:g}=M.useContext(Zr),x,_=!1;if(typeof c=="string"&&sC.test(c)&&(x=c,rC))try{let b=new URL(window.location.href),R=c.startsWith("//")?new URL(b.protocol+c):new URL(c),j=np(R.pathname,g);R.origin===b.origin&&j!=null?c=j+R.search+R.hash:_=!0}catch{}let T=NA(c,{relative:s}),w=iC(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:f});function v(b){r&&r(b),b.defaultPrevented||w(b)}return M.createElement("a",Cf({},m,{href:x||T,onClick:_||i?r:v,ref:n,target:l}))});var C0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(C0||(C0={}));var k0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(k0||(k0={}));function iC(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=$u(),c=Yi(),d=Fb(t,{relative:o});return M.useCallback(f=>{if(JA(f,n)){f.preventDefault();let m=r!==void 0?r:Xc(c)===Xc(d);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}const $b=M.createContext(),Jt=()=>{const t=M.useContext($b);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},oC=({children:t})=>{const[e,n]=M.useState(null),[r,s]=M.useState(!0);M.useEffect(()=>{const l=localStorage.getItem("srmHostelUser");l&&n(JSON.parse(l)),s(!1)},[]);const a={user:e,login:async(l,c,d)=>new Promise(f=>{setTimeout(()=>{const m={id:d==="admin"?"admin_001":"student_001",email:l,role:d,name:d==="admin"?"Admin User":"Student User",hostel:d==="student"?"KARRI":null,block:d==="student"?"Block A":null,room:d==="student"?"205":null,avatar:`https://ui-avatars.com/api/?name=${d==="admin"?"Admin":"Student"}&background=003F87&color=fff`};n(m),localStorage.setItem("srmHostelUser",JSON.stringify(m)),f(m)},1e3)}),logout:()=>{n(null),localStorage.removeItem("srmHostelUser")},loading:r};return h.jsx($b.Provider,{value:a,children:t})},aC=()=>{};var P0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},lC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(m=64)),r.push(n[d],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Wb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new cC;const m=i<<2|a>>4;if(r.push(m),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const x=c<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uC=function(t){const e=Wb(t);return Hb.encodeByteArray(e,!0)},Zc=function(t){return uC(t).replace(/\./g,"")},hC=function(t){try{return Hb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=()=>dC().__FIREBASE_DEFAULTS__,mC=()=>{if(typeof process>"u"||typeof P0>"u")return;const t=P0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hC(t[1]);return e&&JSON.parse(e)},op=()=>{try{return aC()||fC()||mC()||pC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gC=t=>{var e,n;return(n=(e=op())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},yC=t=>{const e=gC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qb=()=>{var t;return(t=op())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xC(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Zc(JSON.stringify(n)),Zc(JSON.stringify(o)),""].join(".")}const sa={};function wC(){const t={prod:[],emulator:[]};for(const e of Object.keys(sa))sa[e]?t.emulator.push(e):t.prod.push(e);return t}function bC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let R0=!1;function EC(t,e){if(typeof window>"u"||typeof document>"u"||!ap(window.location.host)||sa[t]===e||sa[t]||R0)return;sa[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=wC().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{R0=!0,o()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=bC(r),g=n("text"),x=document.getElementById(g)||document.createElement("span"),_=n("learnmore"),T=document.getElementById(_)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const b=m.element;a(b),d(T,_);const R=c();l(v,w),b.append(v,x,T,R),document.body.appendChild(b)}i?(x.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TC(){var e;const t=(e=op())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AC(){return!TC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kb(){try{return typeof indexedDB=="object"}catch{return!1}}function Yb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function CC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="FirebaseError";class ts extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kC,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wu.prototype.create)}}class Wu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?PC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ts(s,a,r)}}function PC(t,e){return t.replace(RC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const RC=/\{\$([^}]+)}/g;function ja(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(N0(i)&&N0(o)){if(!ja(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function N0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=1e3,jC=2,DC=4*60*60*1e3,MC=.5;function j0(t,e=NC,n=jC){const r=e*Math.pow(n,t),s=Math.round(MC*r*(Math.random()-.5)*2);return Math.min(DC,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){return t&&t._delegate?t._delegate:t}class Zn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LC(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VC(t){return t===ms?void 0:t}function LC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const zC={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},BC=oe.INFO,UC={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},$C=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=UC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lp{constructor(e){this.name=e,this._logLevel=BC,this._logHandler=$C,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const WC=(t,e)=>e.some(n=>t instanceof n);let D0,M0;function HC(){return D0||(D0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qC(){return M0||(M0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gb=new WeakMap,kf=new WeakMap,Qb=new WeakMap,ad=new WeakMap,cp=new WeakMap;function KC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Dr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gb.set(n,t)}).catch(()=>{}),cp.set(e,t),e}function YC(t){if(kf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});kf.set(t,e)}let Pf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GC(t){Pf=t(Pf)}function QC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ld(this),e,...n);return Qb.set(r,e.sort?e.sort():[e]),Dr(r)}:qC().includes(t)?function(...e){return t.apply(ld(this),e),Dr(Gb.get(this))}:function(...e){return Dr(t.apply(ld(this),e))}}function XC(t){return typeof t=="function"?QC(t):(t instanceof IDBTransaction&&YC(t),WC(t,HC())?new Proxy(t,Pf):t)}function Dr(t){if(t instanceof IDBRequest)return KC(t);if(ad.has(t))return ad.get(t);const e=XC(t);return e!==t&&(ad.set(t,e),cp.set(e,t)),e}const ld=t=>cp.get(t);function Xb(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Dr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Dr(o.result),l.oldVersion,l.newVersion,Dr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const JC=["get","getKey","getAll","getAllKeys","count"],ZC=["put","add","delete","clear"],cd=new Map;function O0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cd.get(e))return cd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ZC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||JC.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return cd.set(e,i),i}GC(t=>({...t,get:(e,n,r)=>O0(e,n)||t.get(e,n,r),has:(e,n)=>!!O0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rf="@firebase/app",V0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new lp("@firebase/app"),nk="@firebase/app-compat",rk="@firebase/analytics-compat",sk="@firebase/analytics",ik="@firebase/app-check-compat",ok="@firebase/app-check",ak="@firebase/auth",lk="@firebase/auth-compat",ck="@firebase/database",uk="@firebase/data-connect",hk="@firebase/database-compat",dk="@firebase/functions",fk="@firebase/functions-compat",mk="@firebase/installations",pk="@firebase/installations-compat",gk="@firebase/messaging",yk="@firebase/messaging-compat",vk="@firebase/performance",xk="@firebase/performance-compat",_k="@firebase/remote-config",wk="@firebase/remote-config-compat",bk="@firebase/storage",Ek="@firebase/storage-compat",Sk="@firebase/firestore",Tk="@firebase/ai",Ik="@firebase/firestore-compat",Ak="firebase",Ck="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="[DEFAULT]",kk={[Rf]:"fire-core",[nk]:"fire-core-compat",[sk]:"fire-analytics",[rk]:"fire-analytics-compat",[ok]:"fire-app-check",[ik]:"fire-app-check-compat",[ak]:"fire-auth",[lk]:"fire-auth-compat",[ck]:"fire-rtdb",[uk]:"fire-data-connect",[hk]:"fire-rtdb-compat",[dk]:"fire-fn",[fk]:"fire-fn-compat",[mk]:"fire-iid",[pk]:"fire-iid-compat",[gk]:"fire-fcm",[yk]:"fire-fcm-compat",[vk]:"fire-perf",[xk]:"fire-perf-compat",[_k]:"fire-rc",[wk]:"fire-rc-compat",[bk]:"fire-gcs",[Ek]:"fire-gcs-compat",[Sk]:"fire-fst",[Ik]:"fire-fst-compat",[Tk]:"fire-vertex","fire-js":"fire-js",[Ak]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new Map,Pk=new Map,jf=new Map;function L0(t,e){try{t.container.addComponent(e)}catch(n){er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Br(t){const e=t.name;if(jf.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;jf.set(e,t);for(const n of eu.values())L0(n,t);for(const n of Pk.values())L0(n,t);return!0}function tl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rk(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new Wu("app","Firebase",Nk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=Ck;function Jb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Nf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Mr.create("bad-app-name",{appName:String(s)});if(n||(n=qb()),!n)throw Mr.create("no-options");const i=eu.get(s);if(i){if(ja(n,i.options)&&ja(r,i.config))return i;throw Mr.create("duplicate-app",{appName:s})}const o=new FC(s);for(const l of jf.values())o.addComponent(l);const a=new jk(n,r,o);return eu.set(s,a),a}function Zb(t=Nf){const e=eu.get(t);if(!e&&t===Nf&&qb())return Jb();if(!e)throw Mr.create("no-app",{appName:t});return e}function jn(t,e,n){let r=kk[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(o.join(" "));return}Br(new Zn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="firebase-heartbeat-database",Ok=1,Da="firebase-heartbeat-store";let ud=null;function e1(){return ud||(ud=Xb(Mk,Ok,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Da)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),ud}async function Vk(t){try{const n=(await e1()).transaction(Da),r=await n.objectStore(Da).get(t1(t));return await n.done,r}catch(e){if(e instanceof ts)er.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});er.warn(n.message)}}}async function F0(t,e){try{const r=(await e1()).transaction(Da,"readwrite");await r.objectStore(Da).put(e,t1(t)),await r.done}catch(n){if(n instanceof ts)er.warn(n.message);else{const r=Mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});er.warn(r.message)}}}function t1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=1024,Fk=30;class zk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Uk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=z0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Fk){const o=$k(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){er.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=z0(),{heartbeatsToSend:r,unsentEntries:s}=Bk(this._heartbeatsCache.heartbeats),i=Zc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return er.warn(n),""}}}function z0(){return new Date().toISOString().substring(0,10)}function Bk(t,e=Lk){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),B0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),B0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Uk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kb()?Yb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Vk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function B0(t){return Zc(JSON.stringify({version:2,heartbeats:t})).length}function $k(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t){Br(new Zn("platform-logger",e=>new ek(e),"PRIVATE")),Br(new Zn("heartbeat",e=>new zk(e),"PRIVATE")),jn(Rf,V0,t),jn(Rf,V0,"esm2020"),jn("fire-js","")}Wk("");var U0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Or,n1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function E(){}E.prototype=S.prototype,I.F=S.prototype,I.prototype=new E,I.prototype.constructor=I,I.D=function(k,P,N){for(var C=Array(arguments.length-2),J=2;J<arguments.length;J++)C[J-2]=arguments[J];return S.prototype[P].apply(k,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,S,E){E||(E=0);const k=Array(16);if(typeof S=="string")for(var P=0;P<16;++P)k[P]=S.charCodeAt(E++)|S.charCodeAt(E++)<<8|S.charCodeAt(E++)<<16|S.charCodeAt(E++)<<24;else for(P=0;P<16;++P)k[P]=S[E++]|S[E++]<<8|S[E++]<<16|S[E++]<<24;S=I.g[0],E=I.g[1],P=I.g[2];let N=I.g[3],C;C=S+(N^E&(P^N))+k[0]+3614090360&4294967295,S=E+(C<<7&4294967295|C>>>25),C=N+(P^S&(E^P))+k[1]+3905402710&4294967295,N=S+(C<<12&4294967295|C>>>20),C=P+(E^N&(S^E))+k[2]+606105819&4294967295,P=N+(C<<17&4294967295|C>>>15),C=E+(S^P&(N^S))+k[3]+3250441966&4294967295,E=P+(C<<22&4294967295|C>>>10),C=S+(N^E&(P^N))+k[4]+4118548399&4294967295,S=E+(C<<7&4294967295|C>>>25),C=N+(P^S&(E^P))+k[5]+1200080426&4294967295,N=S+(C<<12&4294967295|C>>>20),C=P+(E^N&(S^E))+k[6]+2821735955&4294967295,P=N+(C<<17&4294967295|C>>>15),C=E+(S^P&(N^S))+k[7]+4249261313&4294967295,E=P+(C<<22&4294967295|C>>>10),C=S+(N^E&(P^N))+k[8]+1770035416&4294967295,S=E+(C<<7&4294967295|C>>>25),C=N+(P^S&(E^P))+k[9]+2336552879&4294967295,N=S+(C<<12&4294967295|C>>>20),C=P+(E^N&(S^E))+k[10]+4294925233&4294967295,P=N+(C<<17&4294967295|C>>>15),C=E+(S^P&(N^S))+k[11]+2304563134&4294967295,E=P+(C<<22&4294967295|C>>>10),C=S+(N^E&(P^N))+k[12]+1804603682&4294967295,S=E+(C<<7&4294967295|C>>>25),C=N+(P^S&(E^P))+k[13]+4254626195&4294967295,N=S+(C<<12&4294967295|C>>>20),C=P+(E^N&(S^E))+k[14]+2792965006&4294967295,P=N+(C<<17&4294967295|C>>>15),C=E+(S^P&(N^S))+k[15]+1236535329&4294967295,E=P+(C<<22&4294967295|C>>>10),C=S+(P^N&(E^P))+k[1]+4129170786&4294967295,S=E+(C<<5&4294967295|C>>>27),C=N+(E^P&(S^E))+k[6]+3225465664&4294967295,N=S+(C<<9&4294967295|C>>>23),C=P+(S^E&(N^S))+k[11]+643717713&4294967295,P=N+(C<<14&4294967295|C>>>18),C=E+(N^S&(P^N))+k[0]+3921069994&4294967295,E=P+(C<<20&4294967295|C>>>12),C=S+(P^N&(E^P))+k[5]+3593408605&4294967295,S=E+(C<<5&4294967295|C>>>27),C=N+(E^P&(S^E))+k[10]+38016083&4294967295,N=S+(C<<9&4294967295|C>>>23),C=P+(S^E&(N^S))+k[15]+3634488961&4294967295,P=N+(C<<14&4294967295|C>>>18),C=E+(N^S&(P^N))+k[4]+3889429448&4294967295,E=P+(C<<20&4294967295|C>>>12),C=S+(P^N&(E^P))+k[9]+568446438&4294967295,S=E+(C<<5&4294967295|C>>>27),C=N+(E^P&(S^E))+k[14]+3275163606&4294967295,N=S+(C<<9&4294967295|C>>>23),C=P+(S^E&(N^S))+k[3]+4107603335&4294967295,P=N+(C<<14&4294967295|C>>>18),C=E+(N^S&(P^N))+k[8]+1163531501&4294967295,E=P+(C<<20&4294967295|C>>>12),C=S+(P^N&(E^P))+k[13]+2850285829&4294967295,S=E+(C<<5&4294967295|C>>>27),C=N+(E^P&(S^E))+k[2]+4243563512&4294967295,N=S+(C<<9&4294967295|C>>>23),C=P+(S^E&(N^S))+k[7]+1735328473&4294967295,P=N+(C<<14&4294967295|C>>>18),C=E+(N^S&(P^N))+k[12]+2368359562&4294967295,E=P+(C<<20&4294967295|C>>>12),C=S+(E^P^N)+k[5]+4294588738&4294967295,S=E+(C<<4&4294967295|C>>>28),C=N+(S^E^P)+k[8]+2272392833&4294967295,N=S+(C<<11&4294967295|C>>>21),C=P+(N^S^E)+k[11]+1839030562&4294967295,P=N+(C<<16&4294967295|C>>>16),C=E+(P^N^S)+k[14]+4259657740&4294967295,E=P+(C<<23&4294967295|C>>>9),C=S+(E^P^N)+k[1]+2763975236&4294967295,S=E+(C<<4&4294967295|C>>>28),C=N+(S^E^P)+k[4]+1272893353&4294967295,N=S+(C<<11&4294967295|C>>>21),C=P+(N^S^E)+k[7]+4139469664&4294967295,P=N+(C<<16&4294967295|C>>>16),C=E+(P^N^S)+k[10]+3200236656&4294967295,E=P+(C<<23&4294967295|C>>>9),C=S+(E^P^N)+k[13]+681279174&4294967295,S=E+(C<<4&4294967295|C>>>28),C=N+(S^E^P)+k[0]+3936430074&4294967295,N=S+(C<<11&4294967295|C>>>21),C=P+(N^S^E)+k[3]+3572445317&4294967295,P=N+(C<<16&4294967295|C>>>16),C=E+(P^N^S)+k[6]+76029189&4294967295,E=P+(C<<23&4294967295|C>>>9),C=S+(E^P^N)+k[9]+3654602809&4294967295,S=E+(C<<4&4294967295|C>>>28),C=N+(S^E^P)+k[12]+3873151461&4294967295,N=S+(C<<11&4294967295|C>>>21),C=P+(N^S^E)+k[15]+530742520&4294967295,P=N+(C<<16&4294967295|C>>>16),C=E+(P^N^S)+k[2]+3299628645&4294967295,E=P+(C<<23&4294967295|C>>>9),C=S+(P^(E|~N))+k[0]+4096336452&4294967295,S=E+(C<<6&4294967295|C>>>26),C=N+(E^(S|~P))+k[7]+1126891415&4294967295,N=S+(C<<10&4294967295|C>>>22),C=P+(S^(N|~E))+k[14]+2878612391&4294967295,P=N+(C<<15&4294967295|C>>>17),C=E+(N^(P|~S))+k[5]+4237533241&4294967295,E=P+(C<<21&4294967295|C>>>11),C=S+(P^(E|~N))+k[12]+1700485571&4294967295,S=E+(C<<6&4294967295|C>>>26),C=N+(E^(S|~P))+k[3]+2399980690&4294967295,N=S+(C<<10&4294967295|C>>>22),C=P+(S^(N|~E))+k[10]+4293915773&4294967295,P=N+(C<<15&4294967295|C>>>17),C=E+(N^(P|~S))+k[1]+2240044497&4294967295,E=P+(C<<21&4294967295|C>>>11),C=S+(P^(E|~N))+k[8]+1873313359&4294967295,S=E+(C<<6&4294967295|C>>>26),C=N+(E^(S|~P))+k[15]+4264355552&4294967295,N=S+(C<<10&4294967295|C>>>22),C=P+(S^(N|~E))+k[6]+2734768916&4294967295,P=N+(C<<15&4294967295|C>>>17),C=E+(N^(P|~S))+k[13]+1309151649&4294967295,E=P+(C<<21&4294967295|C>>>11),C=S+(P^(E|~N))+k[4]+4149444226&4294967295,S=E+(C<<6&4294967295|C>>>26),C=N+(E^(S|~P))+k[11]+3174756917&4294967295,N=S+(C<<10&4294967295|C>>>22),C=P+(S^(N|~E))+k[2]+718787259&4294967295,P=N+(C<<15&4294967295|C>>>17),C=E+(N^(P|~S))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+N&4294967295}r.prototype.v=function(I,S){S===void 0&&(S=I.length);const E=S-this.blockSize,k=this.C;let P=this.h,N=0;for(;N<S;){if(P==0)for(;N<=E;)s(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<S;)if(k[P++]=I.charCodeAt(N++),P==this.blockSize){s(this,k),P=0;break}}else for(;N<S;)if(k[P++]=I[N++],P==this.blockSize){s(this,k),P=0;break}}this.h=P,this.o+=S},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;S=this.o*8;for(var E=I.length-8;E<I.length;++E)I[E]=S&255,S/=256;for(this.v(I),I=Array(16),S=0,E=0;E<4;++E)for(let k=0;k<32;k+=8)I[S++]=this.g[E]>>>k&255;return I};function i(I,S){var E=a;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=S(I)}function o(I,S){this.h=S;const E=[];let k=!0;for(let P=I.length-1;P>=0;P--){const N=I[P]|0;k&&N==S||(E[P]=N,k=!1)}this.g=E}var a={};function l(I){return-128<=I&&I<128?i(I,function(S){return new o([S|0],S<0?-1:0)}):new o([I|0],I<0?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return f;if(I<0)return T(c(-I));const S=[];let E=1;for(let k=0;I>=E;k++)S[k]=I/E|0,E*=4294967296;return new o(S,0)}function d(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return T(d(I.substring(1),S));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=c(Math.pow(S,8));let k=f;for(let N=0;N<I.length;N+=8){var P=Math.min(8,I.length-N);const C=parseInt(I.substring(N,N+P),S);P<8?(P=c(Math.pow(S,P)),k=k.j(P).add(c(C))):(k=k.j(E),k=k.add(c(C)))}return k}var f=l(0),m=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-T(this).m();let I=0,S=1;for(let E=0;E<this.g.length;E++){const k=this.i(E);I+=(k>=0?k:4294967296+k)*S,S*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(_(this))return"-"+T(this).toString(I);const S=c(Math.pow(I,6));var E=this;let k="";for(;;){const P=R(E,S).g;E=w(E,P.j(S));let N=((E.g.length>0?E.g[0]:E.h)>>>0).toString(I);if(E=P,x(E))return N+k;for(;N.length<6;)N="0"+N;k=N+k}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(let S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function _(I){return I.h==-1}t.l=function(I){return I=w(this,I),_(I)?-1:x(I)?0:1};function T(I){const S=I.g.length,E=[];for(let k=0;k<S;k++)E[k]=~I.g[k];return new o(E,~I.h).add(m)}t.abs=function(){return _(this)?T(this):this},t.add=function(I){const S=Math.max(this.g.length,I.g.length),E=[];let k=0;for(let P=0;P<=S;P++){let N=k+(this.i(P)&65535)+(I.i(P)&65535),C=(N>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);k=C>>>16,N&=65535,C&=65535,E[P]=C<<16|N}return new o(E,E[E.length-1]&-2147483648?-1:0)};function w(I,S){return I.add(T(S))}t.j=function(I){if(x(this)||x(I))return f;if(_(this))return _(I)?T(this).j(T(I)):T(T(this).j(I));if(_(I))return T(this.j(T(I)));if(this.l(g)<0&&I.l(g)<0)return c(this.m()*I.m());const S=this.g.length+I.g.length,E=[];for(var k=0;k<2*S;k++)E[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<I.g.length;P++){const N=this.i(k)>>>16,C=this.i(k)&65535,J=I.i(P)>>>16,Z=I.i(P)&65535;E[2*k+2*P]+=C*Z,v(E,2*k+2*P),E[2*k+2*P+1]+=N*Z,v(E,2*k+2*P+1),E[2*k+2*P+1]+=C*J,v(E,2*k+2*P+1),E[2*k+2*P+2]+=N*J,v(E,2*k+2*P+2)}for(I=0;I<S;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=S;I<2*S;I++)E[I]=0;return new o(E,0)};function v(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function b(I,S){this.g=I,this.h=S}function R(I,S){if(x(S))throw Error("division by zero");if(x(I))return new b(f,f);if(_(I))return S=R(T(I),S),new b(T(S.g),T(S.h));if(_(S))return S=R(I,T(S)),new b(T(S.g),S.h);if(I.g.length>30){if(_(I)||_(S))throw Error("slowDivide_ only works with positive integers.");for(var E=m,k=S;k.l(I)<=0;)E=j(E),k=j(k);var P=V(E,1),N=V(k,1);for(k=V(k,2),E=V(E,2);!x(k);){var C=N.add(k);C.l(I)<=0&&(P=P.add(E),N=C),k=V(k,1),E=V(E,1)}return S=w(I,P.j(S)),new b(P,S)}for(P=f;I.l(S)>=0;){for(E=Math.max(1,Math.floor(I.m()/S.m())),k=Math.ceil(Math.log(E)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),N=c(E),C=N.j(S);_(C)||C.l(I)>0;)E-=k,N=c(E),C=N.j(S);x(N)&&(N=m),P=P.add(N),I=w(I,C)}return new b(P,I)}t.B=function(I){return R(this,I).h},t.and=function(I){const S=Math.max(this.g.length,I.g.length),E=[];for(let k=0;k<S;k++)E[k]=this.i(k)&I.i(k);return new o(E,this.h&I.h)},t.or=function(I){const S=Math.max(this.g.length,I.g.length),E=[];for(let k=0;k<S;k++)E[k]=this.i(k)|I.i(k);return new o(E,this.h|I.h)},t.xor=function(I){const S=Math.max(this.g.length,I.g.length),E=[];for(let k=0;k<S;k++)E[k]=this.i(k)^I.i(k);return new o(E,this.h^I.h)};function j(I){const S=I.g.length+1,E=[];for(let k=0;k<S;k++)E[k]=I.i(k)<<1|I.i(k-1)>>>31;return new o(E,I.h)}function V(I,S){const E=S>>5;S%=32;const k=I.g.length-E,P=[];for(let N=0;N<k;N++)P[N]=S>0?I.i(N+E)>>>S|I.i(N+E+1)<<32-S:I.i(N+E);return new o(P,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,n1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Or=o}).apply(typeof U0<"u"?U0:typeof self<"u"?self:typeof window<"u"?window:{});var Ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var r1,Fo,s1,vc,Df,i1,o1,a1;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ul=="object"&&Ul];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var y=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var D=u[A];if(!(D in y))break e;y=y[D]}u=u[u.length-1],A=y[u],p=p(A),p!=A&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(p){var y=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&y.push([A,p[A]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function l(u,p,y){return u.call.apply(u.bind,arguments)}function c(u,p,y){return c=l,c.apply(null,arguments)}function d(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function f(u,p){function y(){}y.prototype=p.prototype,u.Z=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(A,D,O){for(var U=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)U[ee-2]=arguments[ee];return p.prototype[D].apply(A,U)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function g(u){const p=u.length;if(p>0){const y=Array(p);for(let A=0;A<p;A++)y[A]=u[A];return y}return[]}function x(u,p){for(let A=1;A<arguments.length;A++){const D=arguments[A];var y=typeof D;if(y=y!="object"?y:D?Array.isArray(D)?"array":y:"null",y=="array"||y=="object"&&typeof D.length=="number"){y=u.length||0;const O=D.length||0;u.length=y+O;for(let U=0;U<O;U++)u[y+U]=D[U]}else u.push(D)}}class _{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function T(u){o.setTimeout(()=>{throw u},0)}function w(){var u=I;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class v{constructor(){this.h=this.g=null}add(p,y){const A=b.get();A.set(p,y),this.h?this.h.next=A:this.g=A,this.h=A}}var b=new _(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let j,V=!1,I=new v,S=()=>{const u=Promise.resolve(void 0);j=()=>{u.then(E)}};function E(){for(var u;u=w();){try{u.h.call(u.g)}catch(y){T(y)}var p=b;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}V=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};o.addEventListener("test",y,p),o.removeEventListener("test",y,p)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function J(u,p){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}f(J,P),J.prototype.init=function(u,p){const y=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&J.Z.h.call(this)},J.prototype.h=function(){J.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ue=0;function xe(u,p,y,A,D){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!A,this.ha=D,this.key=++ue,this.da=this.fa=!1}function B(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function q(u,p,y){for(const A in u)p.call(y,u[A],A,u)}function G(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function de(u){const p={};for(const y in u)p[y]=u[y];return p}const ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zt(u,p){let y,A;for(let D=1;D<arguments.length;D++){A=arguments[D];for(y in A)u[y]=A[y];for(let O=0;O<ve.length;O++)y=ve[O],Object.prototype.hasOwnProperty.call(A,y)&&(u[y]=A[y])}}function Be(u){this.src=u,this.g={},this.h=0}Be.prototype.add=function(u,p,y,A,D){const O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);const U=Ye(u,p,A,D);return U>-1?(p=u[U],y||(p.fa=!1)):(p=new xe(p,this.src,O,!!A,D),p.fa=y,u.push(p)),p};function Bt(u,p){const y=p.type;if(y in u.g){var A=u.g[y],D=Array.prototype.indexOf.call(A,p,void 0),O;(O=D>=0)&&Array.prototype.splice.call(A,D,1),O&&(B(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Ye(u,p,y,A){for(let D=0;D<u.length;++D){const O=u[D];if(!O.da&&O.listener==p&&O.capture==!!y&&O.ha==A)return D}return-1}var ir="closure_lm_"+(Math.random()*1e6|0),fh={};function mg(u,p,y,A,D){if(Array.isArray(p)){for(let O=0;O<p.length;O++)mg(u,p[O],y,A,D);return null}return y=yg(y),u&&u[Z]?u.J(p,y,a(A)?!!A.capture:!1,D):J2(u,p,y,!1,A,D)}function J2(u,p,y,A,D,O){if(!p)throw Error("Invalid event type");const U=a(D)?!!D.capture:!!D;let ee=ph(u);if(ee||(u[ir]=ee=new Be(u)),y=ee.add(p,y,A,U,O),y.proxy)return y;if(A=Z2(),y.proxy=A,A.src=u,A.listener=y,u.addEventListener)N||(D=U),D===void 0&&(D=!1),u.addEventListener(p.toString(),A,D);else if(u.attachEvent)u.attachEvent(gg(p.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Z2(){function u(y){return p.call(u.src,u.listener,y)}const p=eS;return u}function pg(u,p,y,A,D){if(Array.isArray(p))for(var O=0;O<p.length;O++)pg(u,p[O],y,A,D);else A=a(A)?!!A.capture:!!A,y=yg(y),u&&u[Z]?(u=u.i,O=String(p).toString(),O in u.g&&(p=u.g[O],y=Ye(p,y,A,D),y>-1&&(B(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete u.g[O],u.h--)))):u&&(u=ph(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Ye(p,y,A,D)),(y=u>-1?p[u]:null)&&mh(y))}function mh(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Z])Bt(p.i,u);else{var y=u.type,A=u.proxy;p.removeEventListener?p.removeEventListener(y,A,u.capture):p.detachEvent?p.detachEvent(gg(y),A):p.addListener&&p.removeListener&&p.removeListener(A),(y=ph(p))?(Bt(y,u),y.h==0&&(y.src=null,p[ir]=null)):B(u)}}}function gg(u){return u in fh?fh[u]:fh[u]="on"+u}function eS(u,p){if(u.da)u=!0;else{p=new J(p,this);const y=u.listener,A=u.ha||u.src;u.fa&&mh(u),u=y.call(A,p)}return u}function ph(u){return u=u[ir],u instanceof Be?u:null}var gh="__closure_events_fn_"+(Math.random()*1e9>>>0);function yg(u){return typeof u=="function"?u:(u[gh]||(u[gh]=function(p){return u.handleEvent(p)}),u[gh])}function ht(){k.call(this),this.i=new Be(this),this.M=this,this.G=null}f(ht,k),ht.prototype[Z]=!0,ht.prototype.removeEventListener=function(u,p,y,A){pg(this,u,p,y,A)};function bt(u,p){var y,A=u.G;if(A)for(y=[];A;A=A.G)y.push(A);if(u=u.M,A=p.type||p,typeof p=="string")p=new P(p,u);else if(p instanceof P)p.target=p.target||u;else{var D=p;p=new P(A,u),zt(p,D)}D=!0;let O,U;if(y)for(U=y.length-1;U>=0;U--)O=p.g=y[U],D=fl(O,A,!0,p)&&D;if(O=p.g=u,D=fl(O,A,!0,p)&&D,D=fl(O,A,!1,p)&&D,y)for(U=0;U<y.length;U++)O=p.g=y[U],D=fl(O,A,!1,p)&&D}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const y=u.g[p];for(let A=0;A<y.length;A++)B(y[A]);delete u.g[p],u.h--}}this.G=null},ht.prototype.J=function(u,p,y,A){return this.i.add(String(u),p,!1,y,A)},ht.prototype.K=function(u,p,y,A){return this.i.add(String(u),p,!0,y,A)};function fl(u,p,y,A){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let D=!0;for(let O=0;O<p.length;++O){const U=p[O];if(U&&!U.da&&U.capture==y){const ee=U.listener,Ge=U.ha||U.src;U.fa&&Bt(u.i,U),D=ee.call(Ge,A)!==!1&&D}}return D&&!A.defaultPrevented}function tS(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(u,p||0)}function vg(u){u.g=tS(()=>{u.g=null,u.i&&(u.i=!1,vg(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class nS extends k{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:vg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function no(u){k.call(this),this.h=u,this.g={}}f(no,k);var xg=[];function _g(u){q(u.g,function(p,y){this.g.hasOwnProperty(y)&&mh(p)},u),u.g={}}no.prototype.N=function(){no.Z.N.call(this),_g(this)},no.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yh=o.JSON.stringify,rS=o.JSON.parse,sS=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function wg(){}function bg(){}var ro={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vh(){P.call(this,"d")}f(vh,P);function xh(){P.call(this,"c")}f(xh,P);var ss={},Eg=null;function ml(){return Eg=Eg||new ht}ss.Ia="serverreachability";function Sg(u){P.call(this,ss.Ia,u)}f(Sg,P);function so(u){const p=ml();bt(p,new Sg(p))}ss.STAT_EVENT="statevent";function Tg(u,p){P.call(this,ss.STAT_EVENT,u),this.stat=p}f(Tg,P);function Et(u){const p=ml();bt(p,new Tg(p,u))}ss.Ja="timingevent";function Ig(u,p){P.call(this,ss.Ja,u),this.size=p}f(Ig,P);function io(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},p)}function oo(){this.g=!0}oo.prototype.ua=function(){this.g=!1};function iS(u,p,y,A,D,O){u.info(function(){if(u.g)if(O){var U="",ee=O.split("&");for(let _e=0;_e<ee.length;_e++){var Ge=ee[_e].split("=");if(Ge.length>1){const et=Ge[0];Ge=Ge[1];const bn=et.split("_");U=bn.length>=2&&bn[1]=="type"?U+(et+"="+Ge+"&"):U+(et+"=redacted&")}}}else U=null;else U=O;return"XMLHTTP REQ ("+A+") [attempt "+D+"]: "+p+`
`+y+`
`+U})}function oS(u,p,y,A,D,O,U){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+D+"]: "+p+`
`+y+`
`+O+" "+U})}function Ks(u,p,y,A){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+lS(u,y)+(A?" "+A:"")})}function aS(u,p){u.info(function(){return"TIMEOUT: "+p})}oo.prototype.info=function(){};function lS(u,p){if(!u.g)return p;if(!p)return null;try{const O=JSON.parse(p);if(O){for(u=0;u<O.length;u++)if(Array.isArray(O[u])){var y=O[u];if(!(y.length<2)){var A=y[1];if(Array.isArray(A)&&!(A.length<1)){var D=A[0];if(D!="noop"&&D!="stop"&&D!="close")for(let U=1;U<A.length;U++)A[U]=""}}}}return yh(O)}catch{return p}}var pl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ag={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Cg;function _h(){}f(_h,wg),_h.prototype.g=function(){return new XMLHttpRequest},Cg=new _h;function ao(u){return encodeURIComponent(String(u))}function cS(u){var p=1;u=u.split(":");const y=[];for(;p>0&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function or(u,p,y,A){this.j=u,this.i=p,this.l=y,this.S=A||1,this.V=new no(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kg}function kg(){this.i=null,this.g="",this.h=!1}var Pg={},wh={};function bh(u,p,y){u.M=1,u.A=yl(wn(p)),u.u=y,u.R=!0,Rg(u,null)}function Rg(u,p){u.F=Date.now(),gl(u),u.B=wn(u.A);var y=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Wg(y.i,"t",A),u.C=0,y=u.j.L,u.h=new kg,u.g=ly(u.j,y?p:null,!u.u),u.P>0&&(u.O=new nS(c(u.Y,u,u.g),u.P)),p=u.V,y=u.g,A=u.ba;var D="readystatechange";Array.isArray(D)||(D&&(xg[0]=D.toString()),D=xg);for(let O=0;O<D.length;O++){const U=mg(y,D[O],A||p.handleEvent,!1,p.h||p);if(!U)break;p.g[U.key]=U}p=u.J?de(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),so(),iS(u.i,u.v,u.B,u.l,u.S,u.u)}or.prototype.ba=function(u){u=u.target;const p=this.O;p&&cr(u)==3?p.j():this.Y(u)},or.prototype.Y=function(u){try{if(u==this.g)e:{const ee=cr(this.g),Ge=this.g.ya(),_e=this.g.ca();if(!(ee<3)&&(ee!=3||this.g&&(this.h.h||this.g.la()||Xg(this.g)))){this.K||ee!=4||Ge==7||(Ge==8||_e<=0?so(3):so(2)),Eh(this);var p=this.g.ca();this.X=p;var y=uS(this);if(this.o=p==200,oS(this.i,this.v,this.B,this.l,this.S,ee,p),this.o){if(this.U&&!this.L){t:{if(this.g){var A,D=this.g;if((A=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var O=A;break t}}O=null}if(u=O)Ks(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Sh(this,u);else{this.o=!1,this.m=3,Et(12),is(this),lo(this);break e}}if(this.R){u=!0;let et;for(;!this.K&&this.C<y.length;)if(et=hS(this,y),et==wh){ee==4&&(this.m=4,Et(14),u=!1),Ks(this.i,this.l,null,"[Incomplete Response]");break}else if(et==Pg){this.m=4,Et(15),Ks(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else Ks(this.i,this.l,et,null),Sh(this,et);if(Ng(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||y.length!=0||this.h.h||(this.m=1,Et(16),u=!1),this.o=this.o&&u,!u)Ks(this.i,this.l,y,"[Invalid Chunked Response]"),is(this),lo(this);else if(y.length>0&&!this.W){this.W=!0;var U=this.j;U.g==this&&U.aa&&!U.P&&(U.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Nh(U),U.P=!0,Et(11))}}else Ks(this.i,this.l,y,null),Sh(this,y);ee==4&&is(this),this.o&&!this.K&&(ee==4?sy(this.j,this):(this.o=!1,gl(this)))}else TS(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),is(this),lo(this)}}}catch{}finally{}};function uS(u){if(!Ng(u))return u.g.la();const p=Xg(u.g);if(p==="")return"";let y="";const A=p.length,D=cr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return is(u),lo(u),"";u.h.i=new o.TextDecoder}for(let O=0;O<A;O++)u.h.h=!0,y+=u.h.i.decode(p[O],{stream:!(D&&O==A-1)});return p.length=0,u.h.g+=y,u.C=0,u.h.g}function Ng(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function hS(u,p){var y=u.C,A=p.indexOf(`
`,y);return A==-1?wh:(y=Number(p.substring(y,A)),isNaN(y)?Pg:(A+=1,A+y>p.length?wh:(p=p.slice(A,A+y),u.C=A+y,p)))}or.prototype.cancel=function(){this.K=!0,is(this)};function gl(u){u.T=Date.now()+u.H,jg(u,u.H)}function jg(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=io(c(u.aa,u),p)}function Eh(u){u.D&&(o.clearTimeout(u.D),u.D=null)}or.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(aS(this.i,this.B),this.M!=2&&(so(),Et(17)),is(this),this.m=2,lo(this)):jg(this,this.T-u)};function lo(u){u.j.I==0||u.K||sy(u.j,u)}function is(u){Eh(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,_g(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Sh(u,p){try{var y=u.j;if(y.I!=0&&(y.g==u||Th(y.h,u))){if(!u.L&&Th(y.h,u)&&y.I==3){try{var A=y.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var D=A;if(D[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)bl(y),_l(y);else break e;Rh(y),Et(18)}}else y.xa=D[1],0<y.xa-y.K&&D[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=io(c(y.Va,y),6e3));Og(y.h)<=1&&y.ta&&(y.ta=void 0)}else as(y,11)}else if((u.L||y.g==u)&&bl(y),!C(p))for(D=y.Ba.g.parse(p),p=0;p<D.length;p++){let _e=D[p];const et=_e[0];if(!(et<=y.K))if(y.K=et,_e=_e[1],y.I==2)if(_e[0]=="c"){y.M=_e[1],y.ba=_e[2];const bn=_e[3];bn!=null&&(y.ka=bn,y.j.info("VER="+y.ka));const ls=_e[4];ls!=null&&(y.za=ls,y.j.info("SVER="+y.za));const ur=_e[5];ur!=null&&typeof ur=="number"&&ur>0&&(A=1.5*ur,y.O=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;const hr=u.g;if(hr){const Sl=hr.g?hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sl){var O=A.h;O.g||Sl.indexOf("spdy")==-1&&Sl.indexOf("quic")==-1&&Sl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Ih(O,O.h),O.h=null))}if(A.G){const jh=hr.g?hr.g.getResponseHeader("X-HTTP-Session-Id"):null;jh&&(A.wa=jh,Se(A.J,A.G,jh))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),A=y;var U=u;if(A.na=ay(A,A.L?A.ba:null,A.W),U.L){Vg(A.h,U);var ee=U,Ge=A.O;Ge&&(ee.H=Ge),ee.D&&(Eh(ee),gl(ee)),A.g=U}else ny(A);y.i.length>0&&wl(y)}else _e[0]!="stop"&&_e[0]!="close"||as(y,7);else y.I==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?as(y,7):Ph(y):_e[0]!="noop"&&y.l&&y.l.qa(_e),y.A=0)}}so(4)}catch{}}var dS=class{constructor(u,p){this.g=u,this.map=p}};function Dg(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mg(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Og(u){return u.h?1:u.g?u.g.size:0}function Th(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ih(u,p){u.g?u.g.add(p):u.h=p}function Vg(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Dg.prototype.cancel=function(){if(this.i=Lg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Lg(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.G);return p}return g(u.i)}var Fg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fS(u,p){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const A=u[y].indexOf("=");let D,O=null;A>=0?(D=u[y].substring(0,A),O=u[y].substring(A+1)):D=u[y],p(D,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ar(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof ar?(this.l=u.l,co(this,u.j),this.o=u.o,this.g=u.g,uo(this,u.u),this.h=u.h,Ah(this,Hg(u.i)),this.m=u.m):u&&(p=String(u).match(Fg))?(this.l=!1,co(this,p[1]||"",!0),this.o=ho(p[2]||""),this.g=ho(p[3]||"",!0),uo(this,p[4]),this.h=ho(p[5]||"",!0),Ah(this,p[6]||"",!0),this.m=ho(p[7]||"")):(this.l=!1,this.i=new mo(null,this.l))}ar.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(fo(p,zg,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(fo(p,zg,!0),"@"),u.push(ao(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(fo(y,y.charAt(0)=="/"?gS:pS,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",fo(y,vS)),u.join("")},ar.prototype.resolve=function(u){const p=wn(this);let y=!!u.j;y?co(p,u.j):y=!!u.o,y?p.o=u.o:y=!!u.g,y?p.g=u.g:y=u.u!=null;var A=u.h;if(y)uo(p,u.u);else if(y=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var D=p.h.lastIndexOf("/");D!=-1&&(A=p.h.slice(0,D+1)+A)}if(D=A,D==".."||D==".")A="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){A=D.lastIndexOf("/",0)==0,D=D.split("/");const O=[];for(let U=0;U<D.length;){const ee=D[U++];ee=="."?A&&U==D.length&&O.push(""):ee==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),A&&U==D.length&&O.push("")):(O.push(ee),A=!0)}A=O.join("/")}else A=D}return y?p.h=A:y=u.i.toString()!=="",y?Ah(p,Hg(u.i)):y=!!u.m,y&&(p.m=u.m),p};function wn(u){return new ar(u)}function co(u,p,y){u.j=y?ho(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function uo(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Ah(u,p,y){p instanceof mo?(u.i=p,xS(u.i,u.l)):(y||(p=fo(p,yS)),u.i=new mo(p,u.l))}function Se(u,p,y){u.i.set(p,y)}function yl(u){return Se(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ho(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fo(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,mS),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function mS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var zg=/[#\/\?@]/g,pS=/[#\?:]/g,gS=/[#\?]/g,yS=/[#\?@]/g,vS=/#/g;function mo(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function os(u){u.g||(u.g=new Map,u.h=0,u.i&&fS(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=mo.prototype,t.add=function(u,p){os(this),this.i=null,u=Ys(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function Bg(u,p){os(u),p=Ys(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Ug(u,p){return os(u),p=Ys(u,p),u.g.has(p)}t.forEach=function(u,p){os(this),this.g.forEach(function(y,A){y.forEach(function(D){u.call(p,D,A,this)},this)},this)};function $g(u,p){os(u);let y=[];if(typeof p=="string")Ug(u,p)&&(y=y.concat(u.g.get(Ys(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)y=y.concat(u[p]);return y}t.set=function(u,p){return os(this),this.i=null,u=Ys(this,u),Ug(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=$g(this,u),u.length>0?String(u[0]):p):p};function Wg(u,p,y){Bg(u,p),y.length>0&&(u.i=null,u.g.set(Ys(u,p),g(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var y=p[A];const D=ao(y);y=$g(this,y);for(let O=0;O<y.length;O++){let U=D;y[O]!==""&&(U+="="+ao(y[O])),u.push(U)}}return this.i=u.join("&")};function Hg(u){const p=new mo;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Ys(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function xS(u,p){p&&!u.j&&(os(u),u.i=null,u.g.forEach(function(y,A){const D=A.toLowerCase();A!=D&&(Bg(this,A),Wg(this,D,y))},u)),u.j=p}function _S(u,p){const y=new oo;if(o.Image){const A=new Image;A.onload=d(lr,y,"TestLoadImage: loaded",!0,p,A),A.onerror=d(lr,y,"TestLoadImage: error",!1,p,A),A.onabort=d(lr,y,"TestLoadImage: abort",!1,p,A),A.ontimeout=d(lr,y,"TestLoadImage: timeout",!1,p,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else p(!1)}function wS(u,p){const y=new oo,A=new AbortController,D=setTimeout(()=>{A.abort(),lr(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:A.signal}).then(O=>{clearTimeout(D),O.ok?lr(y,"TestPingServer: ok",!0,p):lr(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(D),lr(y,"TestPingServer: error",!1,p)})}function lr(u,p,y,A,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),A(y)}catch{}}function bS(){this.g=new sS}function Ch(u){this.i=u.Sb||null,this.h=u.ab||!1}f(Ch,wg),Ch.prototype.g=function(){return new vl(this.i,this.h)};function vl(u,p){ht.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(vl,ht),t=vl.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,go(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,po(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,go(this)),this.g&&(this.readyState=3,go(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qg(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function qg(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?po(this):go(this),this.readyState==3&&qg(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,po(this))},t.Na=function(u){this.g&&(this.response=u,po(this))},t.ga=function(){this.g&&po(this)};function po(u){u.readyState=4,u.l=null,u.j=null,u.B=null,go(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function go(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Kg(u){let p="";return q(u,function(y,A){p+=A,p+=":",p+=y,p+=`\r
`}),p}function kh(u,p,y){e:{for(A in y){var A=!1;break e}A=!0}A||(y=Kg(y),typeof u=="string"?y!=null&&ao(y):Se(u,p,y))}function Me(u){ht.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Me,ht);var ES=/^https?$/i,SS=["POST","PUT"];t=Me.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Cg.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(O){Yg(this,O);return}if(u=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var D in A)y.set(D,A[D]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const O of A.keys())y.set(O,A.get(O));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(O=>O.toLowerCase()=="content-type"),D=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(SS,p,void 0)>=0)||A||D||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,U]of y)this.g.setRequestHeader(O,U);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(O){Yg(this,O)}};function Yg(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,Gg(u),xl(u)}function Gg(u){u.A||(u.A=!0,bt(u,"complete"),bt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,bt(this,"complete"),bt(this,"abort"),xl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xl(this,!0)),Me.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Qg(this):this.Xa())},t.Xa=function(){Qg(this)};function Qg(u){if(u.h&&typeof i<"u"){if(u.v&&cr(u)==4)setTimeout(u.Ca.bind(u),0);else if(bt(u,"readystatechange"),cr(u)==4){u.h=!1;try{const O=u.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var A;if(A=O===0){let U=String(u.D).match(Fg)[1]||null;!U&&o.self&&o.self.location&&(U=o.self.location.protocol.slice(0,-1)),A=!ES.test(U?U.toLowerCase():"")}y=A}if(y)bt(u,"complete"),bt(u,"success");else{u.o=6;try{var D=cr(u)>2?u.g.statusText:""}catch{D=""}u.l=D+" ["+u.ca()+"]",Gg(u)}}finally{xl(u)}}}}function xl(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,p||bt(u,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function cr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return cr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),rS(p)}};function Xg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function TS(u){const p={};u=(u.g&&cr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(C(u[A]))continue;var y=cS(u[A]);const D=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const O=p[D]||[];p[D]=O,O.push(y)}G(p,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yo(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function Jg(u){this.za=0,this.i=[],this.j=new oo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yo("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yo("baseRetryDelayMs",5e3,u),this.Za=yo("retryDelaySeedMs",1e4,u),this.Ta=yo("forwardChannelMaxRetries",2,u),this.va=yo("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Dg(u&&u.concurrentRequestLimit),this.Ba=new bS,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Jg.prototype,t.ka=8,t.I=1,t.connect=function(u,p,y,A){Et(0),this.W=u,this.H=p||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.J=ay(this,null,this.W),wl(this)};function Ph(u){if(Zg(u),u.I==3){var p=u.V++,y=wn(u.J);if(Se(y,"SID",u.M),Se(y,"RID",p),Se(y,"TYPE","terminate"),vo(u,y),p=new or(u,u.j,p),p.M=2,p.A=yl(wn(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=p.A,y=!0),y||(p.g=ly(p.j,null),p.g.ea(p.A)),p.F=Date.now(),gl(p)}oy(u)}function _l(u){u.g&&(Nh(u),u.g.cancel(),u.g=null)}function Zg(u){_l(u),u.v&&(o.clearTimeout(u.v),u.v=null),bl(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function wl(u){if(!Mg(u.h)&&!u.m){u.m=!0;var p=u.Ea;j||S(),V||(j(),V=!0),I.add(p,u),u.D=0}}function IS(u,p){return Og(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=io(c(u.Ea,u,p),iy(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const D=new or(this,this.j,u);let O=this.o;if(this.U&&(O?(O=de(O),zt(O,this.U)):O=this.U),this.u!==null||this.R||(D.J=O,O=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=ty(this,D,p),y=wn(this.J),Se(y,"RID",u),Se(y,"CVER",22),this.G&&Se(y,"X-HTTP-Session-Id",this.G),vo(this,y),O&&(this.R?p="headers="+ao(Kg(O))+"&"+p:this.u&&kh(y,this.u,O)),Ih(this.h,D),this.Ra&&Se(y,"TYPE","init"),this.S?(Se(y,"$req",p),Se(y,"SID","null"),D.U=!0,bh(D,y,null)):bh(D,y,p),this.I=2}}else this.I==3&&(u?ey(this,u):this.i.length==0||Mg(this.h)||ey(this))};function ey(u,p){var y;p?y=p.l:y=u.V++;const A=wn(u.J);Se(A,"SID",u.M),Se(A,"RID",y),Se(A,"AID",u.K),vo(u,A),u.u&&u.o&&kh(A,u.u,u.o),y=new or(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),p&&(u.i=p.G.concat(u.i)),p=ty(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ih(u.h,y),bh(y,A,p)}function vo(u,p){u.H&&q(u.H,function(y,A){Se(p,A,y)}),u.l&&q({},function(y,A){Se(p,A,y)})}function ty(u,p,y){y=Math.min(u.i.length,y);const A=u.l?c(u.l.Ka,u.l,u):null;e:{var D=u.i;let ee=-1;for(;;){const Ge=["count="+y];ee==-1?y>0?(ee=D[0].g,Ge.push("ofs="+ee)):ee=0:Ge.push("ofs="+ee);let _e=!0;for(let et=0;et<y;et++){var O=D[et].g;const bn=D[et].map;if(O-=ee,O<0)ee=Math.max(0,D[et].g-100),_e=!1;else try{O="req"+O+"_"||"";try{var U=bn instanceof Map?bn:Object.entries(bn);for(const[ls,ur]of U){let hr=ur;a(ur)&&(hr=yh(ur)),Ge.push(O+ls+"="+encodeURIComponent(hr))}}catch(ls){throw Ge.push(O+"type="+encodeURIComponent("_badmap")),ls}}catch{A&&A(bn)}}if(_e){U=Ge.join("&");break e}}U=void 0}return u=u.i.splice(0,y),p.G=u,U}function ny(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;j||S(),V||(j(),V=!0),I.add(p,u),u.A=0}}function Rh(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=io(c(u.Da,u),iy(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,ry(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=io(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),_l(this),ry(this))};function Nh(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function ry(u){u.g=new or(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=wn(u.na);Se(p,"RID","rpc"),Se(p,"SID",u.M),Se(p,"AID",u.K),Se(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&Se(p,"TO",u.ia),Se(p,"TYPE","xmlhttp"),vo(u,p),u.u&&u.o&&kh(p,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=yl(wn(p)),y.u=null,y.R=!0,Rg(y,u)}t.Va=function(){this.C!=null&&(this.C=null,_l(this),Rh(this),Et(19))};function bl(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function sy(u,p){var y=null;if(u.g==p){bl(u),Nh(u),u.g=null;var A=2}else if(Th(u.h,p))y=p.G,Vg(u.h,p),A=1;else return;if(u.I!=0){if(p.o)if(A==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var D=u.D;A=ml(),bt(A,new Ig(A,y)),wl(u)}else ny(u);else if(D=p.m,D==3||D==0&&p.X>0||!(A==1&&IS(u,p)||A==2&&Rh(u)))switch(y&&y.length>0&&(p=u.h,p.i=p.i.concat(y)),D){case 1:as(u,5);break;case 4:as(u,10);break;case 3:as(u,6);break;default:as(u,2)}}}function iy(u,p){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*p}function as(u,p){if(u.j.info("Error code "+p),p==2){var y=c(u.bb,u),A=u.Ua;const D=!A;A=new ar(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||co(A,"https"),yl(A),D?_S(A.toString(),y):wS(A.toString(),y)}else Et(2);u.I=0,u.l&&u.l.pa(p),oy(u),Zg(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function oy(u){if(u.I=0,u.ja=[],u.l){const p=Lg(u.h);(p.length!=0||u.i.length!=0)&&(x(u.ja,p),x(u.ja,u.i),u.h.i.length=0,g(u.i),u.i.length=0),u.l.oa()}}function ay(u,p,y){var A=y instanceof ar?wn(y):new ar(y);if(A.g!="")p&&(A.g=p+"."+A.g),uo(A,A.u);else{var D=o.location;A=D.protocol,p=p?p+"."+D.hostname:D.hostname,D=+D.port;const O=new ar(null);A&&co(O,A),p&&(O.g=p),D&&uo(O,D),y&&(O.h=y),A=O}return y=u.G,p=u.wa,y&&p&&Se(A,y,p),Se(A,"VER",u.ka),vo(u,A),A}function ly(u,p,y){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new Me(new Ch({ab:y})):new Me(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cy(){}t=cy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function El(){}El.prototype.g=function(u,p){return new Ut(u,p)};function Ut(u,p){ht.call(this),this.g=new Jg(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!C(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!C(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Gs(this)}f(Ut,ht),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Ph(this.g)},Ut.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=yh(u),u=y);p.i.push(new dS(p.Ya++,u)),p.I==3&&wl(p)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Ph(this.g),delete this.g,Ut.Z.N.call(this)};function uy(u){vh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}f(uy,vh);function hy(){xh.call(this),this.status=1}f(hy,xh);function Gs(u){this.g=u}f(Gs,cy),Gs.prototype.ra=function(){bt(this.g,"a")},Gs.prototype.qa=function(u){bt(this.g,new uy(u))},Gs.prototype.pa=function(u){bt(this.g,new hy)},Gs.prototype.oa=function(){bt(this.g,"b")},El.prototype.createWebChannel=El.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,a1=function(){return new El},o1=function(){return ml()},i1=ss,Df={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pl.NO_ERROR=0,pl.TIMEOUT=8,pl.HTTP_ERROR=6,vc=pl,Ag.COMPLETE="complete",s1=Ag,bg.EventType=ro,ro.OPEN="a",ro.CLOSE="b",ro.ERROR="c",ro.MESSAGE="d",ht.prototype.listen=ht.prototype.J,Fo=bg,Me.prototype.listenOnce=Me.prototype.K,Me.prototype.getLastError=Me.prototype.Ha,Me.prototype.getLastErrorCode=Me.prototype.ya,Me.prototype.getStatus=Me.prototype.ca,Me.prototype.getResponseJson=Me.prototype.La,Me.prototype.getResponseText=Me.prototype.la,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Fa,r1=Me}).apply(typeof Ul<"u"?Ul:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gi="12.8.0";function Hk(t){Gi=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new lp("@firebase/firestore");function ei(){return Ms.logLevel}function W(t,...e){if(Ms.logLevel<=oe.DEBUG){const n=e.map(up);Ms.debug(`Firestore (${Gi}): ${t}`,...n)}}function tr(t,...e){if(Ms.logLevel<=oe.ERROR){const n=e.map(up);Ms.error(`Firestore (${Gi}): ${t}`,...n)}}function Di(t,...e){if(Ms.logLevel<=oe.WARN){const n=e.map(up);Ms.warn(`Firestore (${Gi}): ${t}`,...n)}}function up(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,l1(t,r,n)}function l1(t,e,n){let r=`FIRESTORE (${Gi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw tr(r),new Error(r)}function he(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||l1(e,s,r)}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class Kk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Yk{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){he(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Is,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Is)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string",31837,{l:r}),new c1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class Gk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Qk{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Gk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rk(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){he(this.o===void 0,3512);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Jk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function Mf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return hd(s)===hd(i)?re(s,i):hd(s)?1:-1}return re(t.length,e.length)}const Zk=55296,eP=57343;function hd(t){const e=t.charCodeAt(0);return e>=Zk&&e<=eP}function Mi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="__name__";class Cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Y(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Cn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return re(e.length,n.length)}static compareSegments(e,n){const r=Cn.isNumericId(e),s=Cn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Cn.extractNumericId(e).compare(Cn.extractNumericId(n)):Mf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Or.fromString(e.substring(4,e.length-2))}}class be extends Cn{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new be(n)}static emptyPath(){return new be([])}}const tP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends Cn{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return tP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===W0}static keyField(){return new at([W0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new $(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new $(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(be.fromString(e))}static fromName(e){return new K(be.fromString(e).popFirst(5))}static empty(){return new K(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t,e,n){if(!n)throw new $(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nP(t,e,n,r){if(e===!0&&r===!0)throw new $(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function H0(t){if(!K.isDocumentKey(t))throw new $(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function q0(t){if(K.isDocumentKey(t))throw new $(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function h1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Hu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function As(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hu(t);throw new $(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t,e){const n={typeString:t};return e&&(n.value=e),n}function nl(t,e){if(!h1(t))throw new $(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new $(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=-62135596800,Y0=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Y0);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<K0)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Y0}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nl(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-K0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:He("string",Ae._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{static fromTimestamp(e){return new Q(e)}static min(){return new Q(new Ae(0,0))}static max(){return new Q(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=-1;function rP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Q.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new Ur(s,K.empty(),e)}function sP(t){return new Ur(t.readTime,t.key,Ma)}class Ur{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ur(Q.min(),K.empty(),Ma)}static max(){return new Ur(Q.max(),K.empty(),Ma)}}function iP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==oP)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function lP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=-1;function Ku(t){return t==null}function tu(t){return t===0&&1/t==-1/0}function cP(t){return typeof t=="number"&&Number.isInteger(t)&&!tu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="";function uP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=G0(e)),e=hP(t.get(n),e);return G0(e)}function hP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case d1:n+="";break;default:n+=i}}return n}function G0(t){return t+d1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ns(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function f1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $l(this.root,e,this.comparator,!1)}getReverseIterator(){return new $l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $l(this.root,e,this.comparator,!0)}}class $l{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ot.RED,this.left=s??ot.EMPTY,this.right=i??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ot(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ot.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new X0(this.data.getIterator())}getIteratorFrom(e){return new X0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class X0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new Ze(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new m1("Invalid base64 string: "+i):i}}(e);return new ut(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const dP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(t){if(he(!!t,39018),typeof t=="string"){let e=0;const n=dP.exec(t);if(he(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wr(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="server_timestamp",g1="__type__",y1="__previous_value__",v1="__local_write_time__";function fp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[g1])==null?void 0:r.stringValue)===p1}function Yu(t){const e=t.mapValue.fields[y1];return fp(e)?Yu(e):e}function Oa(t){const e=$r(t.mapValue.fields[v1].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n,r,s,i,o,a,l,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d,this.apiKey=f}}const nu="(default)";class Va{constructor(e,n){this.projectId=e,this.database=n||nu}static empty(){return new Va("","")}get isDefaultDatabase(){return this.database===nu}isEqual(e){return e instanceof Va&&e.projectId===this.projectId&&e.database===this.database}}function mP(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new $(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="__type__",pP="__max__",Wl={mapValue:{}},_1="__vector__",ru="value";function Hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fp(t)?4:yP(t)?9007199254740991:gP(t)?10:11:Y(28295,{value:t})}function Ln(t,e){if(t===e)return!0;const n=Hr(t);if(n!==Hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oa(t).isEqual(Oa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=$r(s.timestampValue),a=$r(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Wr(s.bytesValue).isEqual(Wr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ve(s.geoPointValue.latitude)===Ve(i.geoPointValue.latitude)&&Ve(s.geoPointValue.longitude)===Ve(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ve(s.integerValue)===Ve(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ve(s.doubleValue),a=Ve(i.doubleValue);return o===a?tu(o)===tu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Mi(t.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Q0(o)!==Q0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ln(o[l],a[l])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function La(t,e){return(t.values||[]).find(n=>Ln(n,e))!==void 0}function Oi(t,e){if(t===e)return 0;const n=Hr(t),r=Hr(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ve(i.integerValue||i.doubleValue),l=Ve(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return J0(t.timestampValue,e.timestampValue);case 4:return J0(Oa(t),Oa(e));case 5:return Mf(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Wr(i),l=Wr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=re(a[c],l[c]);if(d!==0)return d}return re(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=re(Ve(i.latitude),Ve(o.latitude));return a!==0?a:re(Ve(i.longitude),Ve(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Z0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,g,x,_;const a=i.fields||{},l=o.fields||{},c=(m=a[ru])==null?void 0:m.arrayValue,d=(g=l[ru])==null?void 0:g.arrayValue,f=re(((x=c==null?void 0:c.values)==null?void 0:x.length)||0,((_=d==null?void 0:d.values)==null?void 0:_.length)||0);return f!==0?f:Z0(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Wl.mapValue&&o===Wl.mapValue)return 0;if(i===Wl.mapValue)return 1;if(o===Wl.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const m=Mf(l[f],d[f]);if(m!==0)return m;const g=Oi(a[l[f]],c[d[f]]);if(g!==0)return g}return re(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{he:n})}}function J0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=$r(t),r=$r(e),s=re(n.seconds,r.seconds);return s!==0?s:re(n.nanos,r.nanos)}function Z0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Oi(n[s],r[s]);if(i)return i}return re(n.length,r.length)}function Vi(t){return Of(t)}function Of(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=$r(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Of(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Of(n.fields[o])}`;return s+"}"}(t.mapValue):Y(61005,{value:t})}function xc(t){switch(Hr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yu(t);return e?16+xc(e):16;case 5:return 2*t.stringValue.length;case 6:return Wr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+xc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ns(r.fields,(i,o)=>{s+=i.length+xc(o)}),s}(t.mapValue);default:throw Y(13486,{value:t})}}function ev(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vf(t){return!!t&&"integerValue"in t}function mp(t){return!!t&&"arrayValue"in t}function tv(t){return!!t&&"nullValue"in t}function nv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _c(t){return!!t&&"mapValue"in t}function gP(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[x1])==null?void 0:r.stringValue)===_1}function ia(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ns(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ia(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ia(t.arrayValue.values[n]);return e}return{...t}}function yP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_c(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(n)}setAll(e){let n=at.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ia(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());_c(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_c(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ns(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Dt(ia(this.value))}}function w1(t){const e=[];return ns(t.fields,(n,r)=>{const s=new at([n]);if(_c(r)){const i=w1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vt(e,0,Q.min(),Q.min(),Q.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new vt(e,1,n,Q.min(),r,s,0)}static newNoDocument(e,n){return new vt(e,2,n,Q.min(),Q.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,Q.min(),Q.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.position=e,this.inclusive=n}}function rv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Oi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function sv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ln(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n="asc"){this.field=e,this.dir=n}}function vP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b1=class{};class We extends b1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _P(e,n,r):n==="array-contains"?new EP(e,r):n==="in"?new SP(e,r):n==="not-in"?new TP(e,r):n==="array-contains-any"?new IP(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wP(e,r):new bP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Oi(n,this.value)):n!==null&&Hr(this.value)===Hr(n)&&this.matchesComparison(Oi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends b1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new _n(e,n)}matches(e){return E1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function E1(t){return t.op==="and"}function S1(t){return xP(t)&&E1(t)}function xP(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function Lf(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+Vi(t.value);if(S1(t))return t.filters.map(e=>Lf(e)).join(",");{const e=t.filters.map(n=>Lf(n)).join(",");return`${t.op}(${e})`}}function T1(t,e){return t instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.field.isEqual(s.field)&&Ln(r.value,s.value)}(t,e):t instanceof _n?function(r,s){return s instanceof _n&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&T1(o,s.filters[a]),!0):!1}(t,e):void Y(19439)}function I1(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${Vi(n.value)}`}(t):t instanceof _n?function(n){return n.op.toString()+" {"+n.getFilters().map(I1).join(" ,")+"}"}(t):"Filter"}class _P extends We{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class wP extends We{constructor(e,n){super(e,"in",n),this.keys=A1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class bP extends We{constructor(e,n){super(e,"not-in",n),this.keys=A1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function A1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class EP extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mp(n)&&La(n.arrayValue,this.value)}}class SP extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&La(this.value.arrayValue,n)}}class TP extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(La(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!La(this.value.arrayValue,n)}}class IP extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>La(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function iv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new AP(t,e,n,r,s,i,o)}function pp(t){const e=X(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ku(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vi(r)).join(",")),e.Te=n}return e.Te}function gp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!T1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sv(t.startAt,e.startAt)&&sv(t.endAt,e.endAt)}function Ff(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function CP(t,e,n,r,s,i,o,a){return new Ji(t,e,n,r,s,i,o,a)}function yp(t){return new Ji(t)}function ov(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kP(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function C1(t){return t.collectionGroup!==null}function oa(t){const e=X(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ze(at.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Fa(i,r))}),n.has(at.keyField().canonicalString())||e.Ie.push(new Fa(at.keyField(),r))}return e.Ie}function Dn(t){const e=X(t);return e.Ee||(e.Ee=PP(e,oa(t))),e.Ee}function PP(t,e){if(t.limitType==="F")return iv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Fa(s.field,i)});const n=t.endAt?new su(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new su(t.startAt.position,t.startAt.inclusive):null;return iv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zf(t,e){const n=t.filters.concat([e]);return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function RP(t,e){const n=t.explicitOrderBy.concat([e]);return new Ji(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Bf(t,e,n){return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gu(t,e){return gp(Dn(t),Dn(e))&&t.limitType===e.limitType}function k1(t){return`${pp(Dn(t))}|lt:${t.limitType}`}function ti(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>I1(s)).join(", ")}]`),Ku(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Vi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Vi(s)).join(",")),`Target(${r})`}(Dn(t))}; limitType=${t.limitType})`}function Qu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=rv(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,oa(r),s)||r.endAt&&!function(o,a,l){const c=rv(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,oa(r),s))}(t,e)}function NP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function P1(t){return(e,n)=>{let r=!1;for(const s of oa(t)){const i=jP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function jP(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Oi(l,c):Y(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ns(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return f1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=new De(K.comparator);function nr(){return DP}const R1=new De(K.comparator);function zo(...t){let e=R1;for(const n of t)e=e.insert(n.key,n);return e}function N1(t){let e=R1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ws(){return aa()}function j1(){return aa()}function aa(){return new Us(t=>t.toString(),(t,e)=>t.isEqual(e))}const MP=new De(K.comparator),OP=new Ze(K.comparator);function se(...t){let e=OP;for(const n of t)e=e.add(n);return e}const VP=new Ze(re);function LP(){return VP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tu(e)?"-0":e}}function D1(t){return{integerValue:""+t}}function FP(t,e){return cP(e)?D1(e):vp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this._=void 0}}function zP(t,e,n){return t instanceof za?function(s,i){const o={fields:{[g1]:{stringValue:p1},[v1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&fp(i)&&(i=Yu(i)),i&&(o.fields[y1]=i),{mapValue:o}}(n,e):t instanceof Ba?O1(t,e):t instanceof Ua?V1(t,e):function(s,i){const o=M1(s,i),a=av(o)+av(s.Ae);return Vf(o)&&Vf(s.Ae)?D1(a):vp(s.serializer,a)}(t,e)}function BP(t,e,n){return t instanceof Ba?O1(t,e):t instanceof Ua?V1(t,e):n}function M1(t,e){return t instanceof iu?function(r){return Vf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class za extends Xu{}class Ba extends Xu{constructor(e){super(),this.elements=e}}function O1(t,e){const n=L1(e);for(const r of t.elements)n.some(s=>Ln(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ua extends Xu{constructor(e){super(),this.elements=e}}function V1(t,e){let n=L1(e);for(const r of t.elements)n=n.filter(s=>!Ln(s,r));return{arrayValue:{values:n}}}class iu extends Xu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function av(t){return Ve(t.integerValue||t.doubleValue)}function L1(t){return mp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n){this.field=e,this.transform=n}}function $P(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ba&&s instanceof Ba||r instanceof Ua&&s instanceof Ua?Mi(r.elements,s.elements,Ln):r instanceof iu&&s instanceof iu?Ln(r.Ae,s.Ae):r instanceof za&&s instanceof za}(t.transform,e.transform)}class WP{constructor(e,n){this.version=e,this.transformResults=n}}class Mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ju{}function F1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new B1(t.key,Mn.none()):new rl(t.key,t.data,Mn.none());{const n=t.data,r=Dt.empty();let s=new Ze(at.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new rs(t.key,r,new Ht(s.toArray()),Mn.none())}}function HP(t,e,n){t instanceof rl?function(s,i,o){const a=s.value.clone(),l=cv(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof rs?function(s,i,o){if(!wc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=cv(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(z1(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function la(t,e,n,r){return t instanceof rl?function(i,o,a,l){if(!wc(i.precondition,o))return a;const c=i.value.clone(),d=uv(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof rs?function(i,o,a,l){if(!wc(i.precondition,o))return a;const c=uv(i.fieldTransforms,l,o),d=o.data;return d.setAll(z1(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return wc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function qP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=M1(r.transform,s||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,i))}return n||null}function lv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Mi(r,s,(i,o)=>$P(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rl extends Ju{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class rs extends Ju{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function z1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function cv(t,e,n){const r=new Map;he(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,BP(o,a,n[s]))}return r}function uv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,zP(i,o,e))}return r}class B1 extends Ju{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KP extends Ju{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&HP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=la(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=la(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=j1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=F1(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Mi(this.mutations,e.mutations,(n,r)=>lv(n,r))&&Mi(this.baseMutations,e.baseMutations,(n,r)=>lv(n,r))}}class xp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){he(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return MP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new xp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,ie;function XP(t){switch(t){case L.OK:return Y(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function U1(t){if(t===void 0)return tr("GRPC error has no .code"),L.UNKNOWN;switch(t){case Ue.OK:return L.OK;case Ue.CANCELLED:return L.CANCELLED;case Ue.UNKNOWN:return L.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return L.INTERNAL;case Ue.UNAVAILABLE:return L.UNAVAILABLE;case Ue.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ue.NOT_FOUND:return L.NOT_FOUND;case Ue.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ue.ABORTED:return L.ABORTED;case Ue.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ue.DATA_LOSS:return L.DATA_LOSS;default:return Y(39323,{code:t})}}(ie=Ue||(Ue={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=new Or([4294967295,4294967295],0);function hv(t){const e=JP().encode(t),n=new n1;return n.update(e),new Uint8Array(n.digest())}function dv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Or([n,r],0),new Or([s,i],0)]}class _p{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bo(`Invalid padding: ${n}`);if(r<0)throw new Bo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Or.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Or.fromNumber(r)));return s.compare(ZP)===1&&(s=new Or([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=hv(e),[r,s]=dv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new _p(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=hv(e),[r,s]=dv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,sl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zu(Q.min(),s,new De(re),nr(),se())}}class sl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new sl(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class $1{constructor(e,n){this.targetId=e,this.Ce=n}}class W1{constructor(e,n,r=ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class fv{constructor(){this.ve=0,this.Fe=mv(),this.Me=ut.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),n=se(),r=se();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y(38017,{changeType:i})}}),new sl(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=mv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,he(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class eR{constructor(e){this.Ge=e,this.ze=new Map,this.je=nr(),this.He=Hl(),this.Je=Hl(),this.Ze=new De(re)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ff(i))if(r===0){const o=new K(i.path);this.et(n,o,vt.newNoDocument(o,Q.min()))}else he(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Wr(r).toUint8Array()}catch(l){if(l instanceof m1)return Di("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new _p(o,s,i)}catch(l){return Di(l instanceof Bo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Ff(a.target)){const l=new K(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,vt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=se();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Zu(e,n,this.Ze,this.je,r);return this.je=nr(),this.He=Hl(),this.Je=Hl(),this.Ze=new De(re),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new fv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ze(re),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ze(re),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hl(){return new De(K.comparator)}function mv(){return new De(K.comparator)}const tR={asc:"ASCENDING",desc:"DESCENDING"},nR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rR={and:"AND",or:"OR"};class sR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Uf(t,e){return t.useProto3Json||Ku(e)?e:{value:e}}function ou(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iR(t,e){return ou(t,e.toTimestamp())}function On(t){return he(!!t,49232),Q.fromTimestamp(function(n){const r=$r(n);return new Ae(r.seconds,r.nanos)}(t))}function wp(t,e){return $f(t,e).canonicalString()}function $f(t,e){const n=function(s){return new be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function q1(t){const e=be.fromString(t);return he(X1(e),10190,{key:e.toString()}),e}function Wf(t,e){return wp(t.databaseId,e.path)}function dd(t,e){const n=q1(e);if(n.get(1)!==t.databaseId.projectId)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(Y1(n))}function K1(t,e){return wp(t.databaseId,e)}function oR(t){const e=q1(t);return e.length===4?be.emptyPath():Y1(e)}function Hf(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Y1(t){return he(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pv(t,e,n){return{name:Wf(t,e),fields:n.value.mapValue.fields}}function aR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(he(d===void 0||typeof d=="string",58123),ut.fromBase64String(d||"")):(he(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ut.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?L.UNKNOWN:U1(c.code);return new $(d,c.message||"")}(o);n=new W1(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=dd(t,r.document.name),i=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):Q.min(),a=new Dt({mapValue:{fields:r.document.fields}}),l=vt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new bc(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=dd(t,r.document),i=r.readTime?On(r.readTime):Q.min(),o=vt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new bc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=dd(t,r.document),i=r.removedTargetIds||[];n=new bc([],i,s,null)}else{if(!("filter"in e))return Y(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new QP(s,i),a=r.targetId;n=new $1(a,o)}}return n}function lR(t,e){let n;if(e instanceof rl)n={update:pv(t,e.key,e.value)};else if(e instanceof B1)n={delete:Wf(t,e.key)};else if(e instanceof rs)n={update:pv(t,e.key,e.data),updateMask:yR(e.fieldMask)};else{if(!(e instanceof KP))return Y(16599,{dt:e.type});n={verify:Wf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof za)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ba)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ua)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof iu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Y(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:iR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y(27497)}(t,e.precondition)),n}function cR(t,e){return t&&t.length>0?(he(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?On(s.updateTime):On(i);return o.isEqual(Q.min())&&(o=On(i)),new WP(o,s.transformResults||[])}(n,e))):[]}function uR(t,e){return{documents:[K1(t,e.path)]}}function hR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=K1(t,s);const i=function(c){if(c.length!==0)return Q1(_n.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:ni(m.field),direction:mR(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Uf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function dR(t){let e=oR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){he(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const m=G1(f);return m instanceof _n&&S1(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(x){return new Fa(ri(x.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Ku(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,g=f.values||[];return new su(g,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,g=f.values||[];return new su(g,m)}(n.endAt)),CP(e,s,o,i,a,"F",l,c)}function fR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function G1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ri(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ri(n.unaryFilter.field);return We.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ri(n.unaryFilter.field);return We.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ri(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(n){return We.create(ri(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _n.create(n.compositeFilter.filters.map(r=>G1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(t):Y(30097,{filter:t})}function mR(t){return tR[t]}function pR(t){return nR[t]}function gR(t){return rR[t]}function ni(t){return{fieldPath:t.canonicalString()}}function ri(t){return at.fromServerFormat(t.fieldPath)}function Q1(t){return t instanceof We?function(n){if(n.op==="=="){if(nv(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NAN"}};if(tv(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nv(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NOT_NAN"}};if(tv(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ni(n.field),op:pR(n.op),value:n.value}}}(t):t instanceof _n?function(n){const r=n.getFilters().map(s=>Q1(s));return r.length===1?r[0]:{compositeFilter:{op:gR(n.op),filters:r}}}(t):Y(54877,{filter:t})}function yR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function X1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function J1(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,s,i=Q.min(),o=Q.min(),a=ut.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.yt=e}}function xR(t){const e=dR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(){this.Sn=new wR}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ur.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ur.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class wR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Z1=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(Z1,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Li(0)}static ar(){return new Li(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="LruGarbageCollector",bR=1048576;function vv([t,e],[n,r]){const s=re(t,n);return s===0?re(e,r):s}class ER{constructor(e){this.Pr=e,this.buffer=new Ze(vv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();vv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){W(yv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xi(n)?W(yv,"Ignoring IndexedDB error during garbage collection: ",n):await Qi(n)}await this.Ar(3e5)})}}class TR{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(qu.ce);const r=new ER(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(gv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gv):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),ei()<=oe.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function IR(t,e){return new TR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.changes=new Us(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&la(r.mutation,s,Ht.empty(),Ae.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=zo();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ws();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=nr();const o=aa(),a=function(){return aa()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof rs)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),la(d.mutation,c,d.mutation.getFieldMask(),Ae.now())):o.set(c.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new CR(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=aa();let s=new De((o,a)=>o-a),i=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Ht.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(s.get(a.batchId)||se()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=j1();d.forEach(m=>{if(!i.has(m)){const g=F1(n.get(m),r.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return kP(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):C1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ws());let a=Ma,l=i;return o.next(c=>F.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,se())).next(d=>({batchId:a,changes:N1(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=zo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=zo();return this.indexManager.getCollectionParents(e,i).next(a=>F.forEach(a,l=>{const c=function(f,m){return new Ji(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,vt.newInvalidDocument(d)))});let a=zo();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&la(d.mutation,c,Ht.empty(),Ae.now()),Qu(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:On(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:xR(s.bundledQuery),readTime:On(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.overlays=new De(K.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ws();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ws(),i=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ws(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ws(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return F.resolve(a)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new GP(n,r));let i=this.Lr.get(n);i===void 0&&(i=se(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){this.kr=new Ze(tt.Kr),this.qr=new Ze(tt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new tt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new tt(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new K(new be([])),r=new tt(n,e),s=new tt(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new K(new be([])),r=new tt(n,e),s=new tt(n,e+1);let i=se();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new tt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return K.comparator(e.key,n.key)||re(e.Hr,n.Hr)}static Ur(e,n){return re(e.Hr,n.Hr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ze(tt.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new YP(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Jr=this.Jr.add(new tt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?dp:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tt(n,0),s=new tt(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(re);return n.forEach(s=>{const i=new tt(s,0),o=new tt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new tt(new K(i),0);let a=new Ze(re);return this.Jr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Hr)),!0)},o),F.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){he(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,s=>{const i=new tt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new tt(n,0),s=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.ti=e,this.docs=function(){return new De(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=nr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():vt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=nr();const o=n.path,a=new K(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||iP(sP(d),r)<=0||(s.has(d.key)||Qu(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y(9500)}ni(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new MR(this)}getSize(e){return F.resolve(this.size)}}class MR extends AR{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.persistence=e,this.ri=new Us(n=>pp(n),gp),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.ii=0,this.si=new bp,this.targetCount=0,this.oi=Li._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Li(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n){this._i={},this.overlays={},this.ai=new qu(0),this.ui=!1,this.ui=!0,this.ci=new NR,this.referenceDelegate=e(this),this.li=new OR(this),this.indexManager=new _R,this.remoteDocumentCache=function(s){return new DR(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new vR(n),this.Pi=new PR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new jR(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new VR(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class VR extends aP{constructor(e){super(),this.currentSequenceNumber=e}}class Ep{constructor(e){this.persistence=e,this.Ri=new bp,this.Ai=null}static Vi(e){return new Ep(e)}get di(){if(this.Ai)return this.Ai;throw Y(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,r=>{const s=K.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,Q.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class au{constructor(e,n){this.persistence=e,this.fi=new Us(r=>uP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=IR(this,n)}static Vi(e,n){return new au(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return F.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Q.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=xc(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=se(),s=se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Sp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return AC()?8:lP(SC())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new LR;return this.ys(e,n,o).next(a=>{if(i.result=a,this.As)return this.ws(e,n,o,a.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(ei()<=oe.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",ti(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(ei()<=oe.DEBUG&&W("QueryEngine","Query:",ti(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(ei()<=oe.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",ti(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):F.resolve())}gs(e,n){if(ov(n))return F.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Bf(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=se(...i);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(n,a);return this.Ss(n,c,o,l.readTime)?this.gs(e,Bf(n,null,"F")):this.Ds(e,c,n,l)}))})))}ps(e,n,r,s){return ov(n)||s.isEqual(Q.min())?F.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?F.resolve(null):(ei()<=oe.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ti(n)),this.Ds(e,o,n,rP(s,Ma)).next(a=>a))})}bs(e,n){let r=new Ze(P1(e));return n.forEach((s,i)=>{Qu(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return ei()<=oe.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",ti(n)),this.fs.getDocumentsMatchingQuery(e,n,Ur.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="LocalStore",zR=3e8;class BR{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new De(re),this.Fs=new Us(i=>pp(i),gp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function UR(t,e,n,r){return new BR(t,e,n,r)}async function tE(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=se();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ns:c,removedBatchIds:o,addedBatchIds:a}))})})}function $R(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,m=f.keys();let g=F.resolve();return m.forEach(x=>{g=g.next(()=>d.getEntry(l,x)).next(_=>{const T=c.docVersions.get(x);he(T!==null,48541),_.version.compareTo(T)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),d.addEntry(_)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function nE(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function WR(t,e){const n=X(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const a=[];e.targetChanges.forEach((d,f)=>{const m=s.get(f);if(!m)return;a.push(n.li.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.li.addMatchingKeys(i,d.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(ut.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(f,g),function(_,T,w){return _.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=zR?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,g,d)&&a.push(n.li.updateTargetData(i,g))});let l=nr(),c=se();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(HR(i,o,e.documentUpdates).next(d=>{l=d.Bs,c=d.Ls})),!r.isEqual(Q.min())){const d=n.li.getLastRemoteSnapshotVersion(i).next(f=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.vs=s,i))}function HR(t,e,n){let r=se(),s=se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=nr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Q.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W(Tp,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Bs:o,Ls:s}})}function qR(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=dp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KR(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function qf(t,e,n){const r=X(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Xi(o))throw o;W(Tp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function xv(t,e,n){const r=X(t);let s=Q.min(),i=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const f=X(l),m=f.Fs.get(d);return m!==void 0?F.resolve(f.vs.get(m)):f.li.getTargetData(c,d)}(r,o,Dn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:Q.min(),n?i:se())).next(a=>(YR(r,NP(e),a),{documents:a,ks:i})))}function YR(t,e,n){let r=t.Ms.get(e)||Q.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class _v{constructor(){this.activeTargetIds=LP()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GR{constructor(){this.vo=new _v,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new _v,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="ConnectivityMonitor";class bv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){W(wv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){W(wv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function Kf(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="RestConnection",XR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class JR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===nu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Kf(),a=this.Qo(e,n.toUriEncodedString());W(fd,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,s,i);const{host:c}=new URL(a),d=ap(c);return this.zo(e,a,l,r,d).then(f=>(W(fd,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Di(fd,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=XR[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection",Ao=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class bi extends JR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!bi.c_){const e=o1();Ao(e,i1.STAT_EVENT,n=>{n.stat===Df.PROXY?W(mt,"STAT_EVENT: detected buffering proxy"):n.stat===Df.NOPROXY&&W(mt,"STAT_EVENT: detected no buffering proxy")}),bi.c_=!0}}zo(e,n,r,s,i){const o=Kf();return new Promise((a,l)=>{const c=new r1;c.setWithCredentials(!0),c.listenOnce(s1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case vc.NO_ERROR:const f=c.getResponseJson();W(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case vc.TIMEOUT:W(mt,`RPC '${e}' ${o} timed out`),l(new $(L.DEADLINE_EXCEEDED,"Request time out"));break;case vc.HTTP_ERROR:const m=c.getStatus();if(W(mt,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const x=g==null?void 0:g.error;if(x&&x.status&&x.message){const _=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(x.status);l(new $(_,x.message))}else l(new $(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new $(L.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{W(mt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);W(mt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Kf(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const c=i.join("");W(mt,`Creating RPC '${e}' stream ${s}: ${c}`,a);const d=o.createWebChannel(c,a);this.I_(d);let f=!1,m=!1;const g=new ZR({Ho:x=>{m?W(mt,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(f||(W(mt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),f=!0),W(mt,`RPC '${e}' stream ${s} sending:`,x),d.send(x))},Jo:()=>d.close()});return Ao(d,Fo.EventType.OPEN,()=>{m||(W(mt,`RPC '${e}' stream ${s} transport opened.`),g.i_())}),Ao(d,Fo.EventType.CLOSE,()=>{m||(m=!0,W(mt,`RPC '${e}' stream ${s} transport closed`),g.o_(),this.E_(d))}),Ao(d,Fo.EventType.ERROR,x=>{m||(m=!0,Di(mt,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),g.o_(new $(L.UNAVAILABLE,"The operation could not be completed")))}),Ao(d,Fo.EventType.MESSAGE,x=>{var _;if(!m){const T=x.data[0];he(!!T,16349);const w=T,v=(w==null?void 0:w.error)||((_=w[0])==null?void 0:_.error);if(v){W(mt,`RPC '${e}' stream ${s} received error:`,v);const b=v.status;let R=function(I){const S=Ue[I];if(S!==void 0)return U1(S)}(b),j=v.message;R===void 0&&(R=L.INTERNAL,j="Unknown error status: "+b+" with message "+v.message),m=!0,g.o_(new $(R,j)),d.close()}else W(mt,`RPC '${e}' stream ${s} received:`,T),g.__(T)}}),bi.u_(),setTimeout(()=>{g.s_()},0),g}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return a1()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t){return new bi(t)}function md(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t){return new sR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bi.c_=!1;class rE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="PersistentStream";class sE{constructor(e,n,r,s,i,o,a,l){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(tr(n.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new $(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(Ev,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(W(Ev,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tN extends sE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=aR(this.serializer,e),r=function(i){if(!("targetChange"in i))return Q.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?On(o.readTime):Q.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Hf(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Ff(l)?{documents:uR(i,l)}:{query:hR(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=H1(i,o.resumeToken);const c=Uf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Q.min())>0){a.readTime=ou(i,o.snapshotVersion.toTimestamp());const c=Uf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=fR(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Hf(this.serializer),n.removeTarget=e,this.K_(n)}}class nN extends sE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return he(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){he(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=cR(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Hf(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lR(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{}class sN extends rN{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,$f(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(L.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,$f(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function iN(t,e,n,r){return new sN(t,e,n,r)}class oN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tr(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="RemoteStore";class aN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{$s(this)&&(W(Os,"Restarting streams for network reachability change."),await async function(l){const c=X(l);c.Ea.add(4),await il(c),c.Va.set("Unknown"),c.Ea.delete(4),await th(c)}(this))})}),this.Va=new oN(r,s)}}async function th(t){if($s(t))for(const e of t.Ra)await e(!0)}async function il(t){for(const e of t.Ra)await e(!1)}function iE(t,e){const n=X(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),kp(n)?Cp(n):Zi(n).O_()&&Ap(n,e))}function Ip(t,e){const n=X(t),r=Zi(n);n.Ia.delete(e),r.O_()&&oE(n,e),n.Ia.size===0&&(r.O_()?r.L_():$s(n)&&n.Va.set("Unknown"))}function Ap(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zi(t).Z_(e)}function oE(t,e){t.da.$e(e),Zi(t).X_(e)}function Cp(t){t.da=new eR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Zi(t).start(),t.Va.ua()}function kp(t){return $s(t)&&!Zi(t).x_()&&t.Ia.size>0}function $s(t){return X(t).Ea.size===0}function aE(t){t.da=void 0}async function lN(t){t.Va.set("Online")}async function cN(t){t.Ia.forEach((e,n)=>{Ap(t,e)})}async function uN(t,e){aE(t),kp(t)?(t.Va.ha(e),Cp(t)):t.Va.set("Unknown")}async function hN(t,e,n){if(t.Va.set("Online"),e instanceof W1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.da.removeTarget(a))}(t,e)}catch(r){W(Os,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lu(t,r)}else if(e instanceof bc?t.da.Xe(e):e instanceof $1?t.da.st(e):t.da.tt(e),!n.isEqual(Q.min()))try{const r=await nE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.da.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(ut.EMPTY_BYTE_STRING,d.snapshotVersion)),oE(i,l);const f=new br(d.target,l,c,d.sequenceNumber);Ap(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W(Os,"Failed to raise snapshot:",r),await lu(t,r)}}async function lu(t,e,n){if(!Xi(e))throw e;t.Ea.add(1),await il(t),t.Va.set("Offline"),n||(n=()=>nE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(Os,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await th(t)})}function lE(t,e){return e().catch(n=>lu(t,n,e))}async function nh(t){const e=X(t),n=qr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:dp;for(;dN(e);)try{const s=await qR(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,fN(e,s)}catch(s){await lu(e,s)}cE(e)&&uE(e)}function dN(t){return $s(t)&&t.Ta.length<10}function fN(t,e){t.Ta.push(e);const n=qr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function cE(t){return $s(t)&&!qr(t).x_()&&t.Ta.length>0}function uE(t){qr(t).start()}async function mN(t){qr(t).ra()}async function pN(t){const e=qr(t);for(const n of t.Ta)e.ea(n.mutations)}async function gN(t,e,n){const r=t.Ta.shift(),s=xp.from(r,e,n);await lE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await nh(t)}async function yN(t,e){e&&qr(t).Y_&&await async function(r,s){if(function(o){return XP(o)&&o!==L.ABORTED}(s.code)){const i=r.Ta.shift();qr(r).B_(),await lE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await nh(r)}}(t,e),cE(t)&&uE(t)}async function Sv(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),W(Os,"RemoteStore received new credentials");const r=$s(n);n.Ea.add(3),await il(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await th(n)}async function vN(t,e){const n=X(t);e?(n.Ea.delete(2),await th(n)):e||(n.Ea.add(2),await il(n),n.Va.set("Unknown"))}function Zi(t){return t.ma||(t.ma=function(n,r,s){const i=X(n);return i.sa(),new tN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:lN.bind(null,t),Yo:cN.bind(null,t),t_:uN.bind(null,t),J_:hN.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),kp(t)?Cp(t):t.Va.set("Unknown")):(await t.ma.stop(),aE(t))})),t.ma}function qr(t){return t.fa||(t.fa=function(n,r,s){const i=X(n);return i.sa(),new nN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:mN.bind(null,t),t_:yN.bind(null,t),ta:pN.bind(null,t),na:gN.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await nh(t)):(await t.fa.stop(),t.Ta.length>0&&(W(Os,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Pp(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rp(t,e){if(tr("AsyncQueue",`${e}: ${t}`),Xi(t))return new $(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{static emptySet(e){return new Ei(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=zo(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ei)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ei;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this.ga=new De(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Y(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fi{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fi(e,n,Ei.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class _N{constructor(){this.queries=Iv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=Iv(),i.forEach((o,a)=>{for(const l of a.ba)l.onError(r)})})(this,new $(L.ABORTED,"Firestore shutting down"))}}function Iv(){return new Us(t=>k1(t),Gu)}async function wN(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new xN,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Rp(o,`Initialization of query '${ti(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Np(n)}async function bN(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function EN(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ba)a.Fa(s)&&(r=!0);o.wa=s}}r&&Np(n)}function SN(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Np(t){t.Ca.forEach(e=>{e.next()})}var Yf,Av;(Av=Yf||(Yf={})).Ma="default",Av.Cache="cache";class TN{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.key=e}}class dE{constructor(e){this.key=e}}class IN{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=se(),this.mutatedKeys=se(),this.eu=P1(e),this.tu=new Ei(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Tv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const m=s.get(d),g=Qu(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;m&&g?m.data.isEqual(g.data)?x!==_&&(r.track({type:3,doc:g}),T=!0):this.su(m,g)||(r.track({type:2,doc:g}),T=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),T=!0):m&&!g&&(r.track({type:1,doc:m}),T=!0,(l||c)&&(a=!0)),T&&(g?(o=o.add(g),i=_?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Ss:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,f)=>function(g,x){const _=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Vt:T})}};return _(g)-_(x)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Ya.size===0&&this.current&&!s?1:0,c=l!==this.Xa;return this.Xa=l,o.length!==0||c?{snapshot:new Fi(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new dE(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new hE(r))}),n}cu(e){this.Za=e.ks,this.Ya=se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Fi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const jp="SyncEngine";class AN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class CN{constructor(e){this.key=e,this.hu=!1}}class kN{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Us(a=>k1(a),Gu),this.Iu=new Map,this.Eu=new Set,this.Ru=new De(K.comparator),this.Au=new Map,this.Vu=new bp,this.du={},this.mu=new Map,this.fu=Li.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PN(t,e,n=!0){const r=vE(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await fE(r,e,n,!0),s}async function RN(t,e){const n=vE(t);await fE(n,e,!0,!1)}async function fE(t,e,n,r){const s=await KR(t.localStore,Dn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await NN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&iE(t.remoteStore,s),a}async function NN(t,e,n,r,s){t.pu=(f,m,g)=>async function(_,T,w,v){let b=T.view.ru(w);b.Ss&&(b=await xv(_.localStore,T.query,!1).then(({documents:I})=>T.view.ru(I,b)));const R=v&&v.targetChanges.get(T.targetId),j=v&&v.targetMismatches.get(T.targetId)!=null,V=T.view.applyChanges(b,_.isPrimaryClient,R,j);return kv(_,T.targetId,V.au),V.snapshot}(t,f,m,g);const i=await xv(t.localStore,e,!0),o=new IN(e,i.ks),a=o.ru(i.documents),l=sl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);kv(t,n,c.au);const d=new AN(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function jN(t,e,n){const r=X(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Gu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ip(r.remoteStore,s.targetId),Gf(r,s.targetId)}).catch(Qi)):(Gf(r,s.targetId),await qf(r.localStore,s.targetId,!0))}async function DN(t,e){const n=X(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ip(n.remoteStore,r.targetId))}async function MN(t,e,n){const r=UN(t);try{const s=await function(o,a){const l=X(o),c=Ae.now(),d=a.reduce((g,x)=>g.add(x.key),se());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=nr(),_=se();return l.xs.getEntries(g,d).next(T=>{x=T,x.forEach((w,v)=>{v.isValidDocument()||(_=_.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,x)).next(T=>{f=T;const w=[];for(const v of a){const b=qP(v,f.get(v.key).overlayedDocument);b!=null&&w.push(new rs(v.key,b,w1(b.value.mapValue),Mn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(T=>{m=T;const w=T.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(g,T.batchId,w)})}).then(()=>({batchId:m.batchId,changes:N1(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.du[o.currentUser.toKey()];c||(c=new De(re)),c=c.insert(a,l),o.du[o.currentUser.toKey()]=c}(r,s.batchId,n),await ol(r,s.changes),await nh(r.remoteStore)}catch(s){const i=Rp(s,"Failed to persist write");n.reject(i)}}async function mE(t,e){const n=X(t);try{const r=await WR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(he(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?he(o.hu,14607):s.removedDocuments.size>0&&(he(o.hu,42227),o.hu=!1))}),await ol(n,r,e)}catch(r){await Qi(r)}}function Cv(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=X(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const m of f.ba)m.va(a)&&(c=!0)}),c&&Np(l)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ON(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new De(K.comparator);o=o.insert(i,vt.newNoDocument(i,Q.min()));const a=se().add(i),l=new Zu(Q.min(),new Map,new De(re),o,a);await mE(r,l),r.Ru=r.Ru.remove(i),r.Au.delete(e),Dp(r)}else await qf(r.localStore,e,!1).then(()=>Gf(r,e,n)).catch(Qi)}async function VN(t,e){const n=X(t),r=e.batch.batchId;try{const s=await $R(n.localStore,e);gE(n,r,null),pE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ol(n,s)}catch(s){await Qi(s)}}async function LN(t,e,n){const r=X(t);try{const s=await function(o,a){const l=X(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(he(f!==null,37113),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);gE(r,e,n),pE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ol(r,s)}catch(s){await Qi(s)}}function pE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function gE(t,e,n){const r=X(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Gf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||yE(t,r)})}function yE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Ip(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Dp(t))}function kv(t,e,n){for(const r of n)r instanceof hE?(t.Vu.addReference(r.key,e),FN(t,r)):r instanceof dE?(W(jp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||yE(t,r.key)):Y(19791,{wu:r})}function FN(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(W(jp,"New document in limbo: "+n),t.Eu.add(r),Dp(t))}function Dp(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(be.fromString(e)),r=t.fu.next();t.Au.set(r,new CN(n)),t.Ru=t.Ru.insert(n,r),iE(t.remoteStore,new br(Dn(yp(n.path)),r,"TargetPurposeLimboResolution",qu.ce))}}async function ol(t,e,n){const r=X(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=Sp.Es(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(l,c){const d=X(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(c,m=>F.forEach(m.Ts,g=>d.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>F.forEach(m.Is,g=>d.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Xi(f))throw f;W(Tp,"Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const g=d.vs.get(m),x=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(x);d.vs=d.vs.insert(m,_)}}}(r.localStore,i))}async function zN(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){W(jp,"User change. New user:",e.toKey());const r=await tE(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new $(L.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ol(n,r.Ns)}}function BN(t,e){const n=X(t),r=n.Au.get(e);if(r&&r.hu)return se().add(r.key);{let s=se();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function vE(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ON.bind(null,e),e.Pu.J_=EN.bind(null,e.eventManager),e.Pu.yu=SN.bind(null,e.eventManager),e}function UN(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LN.bind(null,e),e}class cu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UR(this.persistence,new FR,e.initialUser,this.serializer)}Cu(e){return new eE(Ep.Vi,this.serializer)}Du(e){return new GR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cu.provider={build:()=>new cu};class $N extends cu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){he(this.persistence.referenceDelegate instanceof au,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new SR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new eE(r=>au.Vi(r,n),this.serializer)}}class Qf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zN.bind(null,this.syncEngine),await vN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _N}()}createDatastore(e){const n=eh(e.databaseInfo.databaseId),r=eN(e.databaseInfo);return iN(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new aN(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Cv(this.syncEngine,n,0),function(){return bv.v()?new bv:new QR}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const f=new kN(s,i,o,a,l,c);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);W(Os,"RemoteStore shutting down."),i.Ea.add(5),await il(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Qf.provider={build:()=>new Qf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="FirestoreClient";class HN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=hp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W(Kr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(Kr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Rp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function pd(t,e){t.asyncQueue.verifyOperationInProgress(),W(Kr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await tE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Pv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qN(t);W(Kr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Sv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Sv(e.remoteStore,s)),t._onlineComponents=e}async function qN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(Kr,"Using user provided OfflineComponentProvider");try{await pd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Di("Error using user provided cache. Falling back to memory cache: "+n),await pd(t,new cu)}}else W(Kr,"Using default OfflineComponentProvider"),await pd(t,new $N(void 0));return t._offlineComponents}async function xE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(Kr,"Using user provided OnlineComponentProvider"),await Pv(t,t._uninitializedComponentsProvider._online)):(W(Kr,"Using default OnlineComponentProvider"),await Pv(t,new Qf))),t._onlineComponents}function KN(t){return xE(t).then(e=>e.syncEngine)}async function Rv(t){const e=await xE(t),n=e.eventManager;return n.onListen=PN.bind(null,e.syncEngine),n.onUnlisten=jN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DN.bind(null,e.syncEngine),n}function YN(t,e,n,r){const s=new WN(r),i=new TN(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>wN(await Rv(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>bN(await Rv(t),i))}}function GN(t,e){const n=new Is;return t.asyncQueue.enqueueAndForget(async()=>MN(await KN(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="ComponentProvider",Nv=new Map;function XN(t,e,n,r,s){return new fP(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,_E(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="firestore.googleapis.com",jv=!0;class Dv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wE,this.ssl=jv}else this.host=e.host,this.ssl=e.ssl??jv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Z1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bR)throw new $(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_E(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qk;switch(r.type){case"firstParty":return new Qk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Nv.get(n);r&&(W(QN,"Removing Datastore"),Nv.delete(n),r.terminate())}(this),Promise.resolve()}}function JN(t,e,n,r={}){var c;t=As(t,rh);const s=ap(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(xC(`https://${a}`),EC("Firestore",!0)),i.host!==wE&&i.host!==a&&Di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!ja(l,o)&&(t._setSettings(l),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=gt.MOCK_USER;else{d=_C(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new $(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new gt(m)}t._authCredentials=new Kk(new c1(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ws(this.firestore,e,this._query)}}class qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qe(this.firestore,e,this._key)}toJSON(){return{type:qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(nl(n,qe._jsonSchema))return new qe(e,r||null,new K(be.fromString(n.referencePath)))}}qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:He("string",qe._jsonSchemaVersion),referencePath:He("string")};class Vr extends Ws{constructor(e,n,r){super(e,n,yp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new K(e))}withConverter(e){return new Vr(this.firestore,e,this._path)}}function Mv(t,e,...n){if(t=Gt(t),u1("collection","path",e),t instanceof rh){const r=be.fromString(e,...n);return q0(r),new Vr(t,null,r)}{if(!(t instanceof qe||t instanceof Vr))throw new $(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return q0(r),new Vr(t.firestore,null,r)}}function bE(t,e,...n){if(t=Gt(t),arguments.length===1&&(e=hp.newId()),u1("doc","path",e),t instanceof rh){const r=be.fromString(e,...n);return H0(r),new qe(t,null,new K(r))}{if(!(t instanceof qe||t instanceof Vr))throw new $(L.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return H0(r),new qe(t.firestore,t instanceof Vr?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="AsyncQueue";class Vv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rE(this,"async_queue_retry"),this._c=()=>{const r=md();r&&W(Ov,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=md();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=md();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Is;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Xi(e))throw e;W(Ov,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,tr("INTERNAL UNHANDLED ERROR: ",Lv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Pp.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Y(47125,{Pc:Lv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Lv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class $a extends rh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Vv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vv(e),this._firestoreClient=void 0,await e}}}function ZN(t,e){const n=typeof t=="object"?t:Zb(),r=typeof t=="string"?t:nu,s=tl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=yC("firestore");i&&JN(s,...i)}return s}function EE(t){if(t._terminated)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ej(t),t._firestoreClient}function ej(t){var r,s,i,o;const e=t._freezeSettings(),n=XN(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new HN(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nn(ut.fromBase64String(e))}catch(n){throw new $(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nn(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nl(e,nn._jsonSchema))return nn.fromBase64String(e.bytes)}}nn._jsonSchemaVersion="firestore/bytes/1.0",nn._jsonSchema={type:He("string",nn._jsonSchemaVersion),bytes:He("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vn._jsonSchemaVersion}}static fromJSON(e){if(nl(e,Vn._jsonSchema))return new Vn(e.latitude,e.longitude)}}Vn._jsonSchemaVersion="firestore/geoPoint/1.0",Vn._jsonSchema={type:He("string",Vn._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nl(e,vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new vn(e.vectorValues);throw new $(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vn._jsonSchemaVersion="firestore/vectorValue/1.0",vn._jsonSchema={type:He("string",vn._jsonSchemaVersion),vectorValues:He("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=/^__.*__$/;class nj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new rl(e,this.data,n,this.fieldTransforms)}}class SE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function TE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{dataSource:t})}}class Op{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Op({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return uu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(TE(this.dataSource)&&tj.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class rj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||eh(e)}createContext(e,n,r,s=!1){return new Op({dataSource:e,methodName:n,targetDoc:r,path:at.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vp(t){const e=t._freezeSettings(),n=eh(t._databaseId);return new rj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sj(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);Fp("Data must be an object, but it was:",o,r);const a=IE(r,o);let l,c;if(i.merge)l=new Ht(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const m=zi(e,f,n);if(!o.contains(m))throw new $(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);kE(d,m)||d.push(m)}l=new Ht(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new nj(new Dt(a),l,c)}class ih extends sh{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ih}}class Lp extends sh{_toFieldTransform(e){return new UP(e.path,new za)}isEqual(e){return e instanceof Lp}}function ij(t,e,n,r){const s=t.createContext(1,e,n);Fp("Data must be an object, but it was:",s,r);const i=[],o=Dt.empty();ns(r,(l,c)=>{const d=CE(e,l,n);c=Gt(c);const f=s.childContextForFieldPath(d);if(c instanceof ih)i.push(d);else{const m=al(c,f);m!=null&&(i.push(d),o.set(d,m))}});const a=new Ht(i);return new SE(o,a,s.fieldTransforms)}function oj(t,e,n,r,s,i){const o=t.createContext(1,e,n),a=[zi(e,r,n)],l=[s];if(i.length%2!=0)throw new $(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(zi(e,i[m])),l.push(i[m+1]);const c=[],d=Dt.empty();for(let m=a.length-1;m>=0;--m)if(!kE(c,a[m])){const g=a[m];let x=l[m];x=Gt(x);const _=o.childContextForFieldPath(g);if(x instanceof ih)c.push(g);else{const T=al(x,_);T!=null&&(c.push(g),d.set(g,T))}}const f=new Ht(c);return new SE(d,f,o.fieldTransforms)}function aj(t,e,n,r=!1){return al(n,t.createContext(r?4:3,e))}function al(t,e){if(AE(t=Gt(t)))return Fp("Unsupported field value:",e,t),IE(t,e);if(t instanceof sh)return function(r,s){if(!TE(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=al(a,s.childContextForArray(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ae.fromDate(r);return{timestampValue:ou(s.serializer,i)}}if(r instanceof Ae){const i=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ou(s.serializer,i)}}if(r instanceof Vn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nn)return{bytesValue:H1(s.serializer,r._byteString)};if(r instanceof qe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:wp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vn)return function(o,a){const l=o instanceof vn?o.toArray():o;return{mapValue:{fields:{[x1]:{stringValue:_1},[ru]:{arrayValue:{values:l.map(d=>{if(typeof d!="number")throw a.createError("VectorValues must only contain numeric values.");return vp(a.serializer,d)})}}}}}}(r,s);if(J1(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Hu(r)}`)}(t,e)}function IE(t,e){const n={};return f1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ns(t,(r,s)=>{const i=al(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function AE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Vn||t instanceof nn||t instanceof qe||t instanceof sh||t instanceof vn||J1(t))}function Fp(t,e,n){if(!AE(n)||!h1(n)){const r=Hu(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function zi(t,e,n){if((e=Gt(e))instanceof Mp)return e._internalPath;if(typeof e=="string")return CE(t,e);throw uu("Field path arguments must be of type string or ",t,!1,void 0,n)}const lj=new RegExp("[~\\*/\\[\\]]");function CE(t,e,n){if(e.search(lj)>=0)throw uu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mp(...e.split("."))._internalPath}catch{throw uu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new $(L.INVALID_ARGUMENT,a+t+l)}function kE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{convertValue(e,n="none"){switch(Hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ns(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[ru].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ve(o.doubleValue));return new vn(n)}convertGeoPoint(e){return new Vn(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oa(e));default:return null}}convertTimestamp(e){const n=$r(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);he(X1(r),9688,{name:e});const s=new Va(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||tr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE extends cj{constructor(e){super(),this.firestore=e}convertBytes(e){return new nn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function Fv(){return new Lp("serverTimestamp")}const zv="@firebase/firestore",Bv="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(zi("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uj extends RE{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zp{}class NE extends zp{}function dj(t,e,...n){let r=[];e instanceof zp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Up).length,a=i.filter(l=>l instanceof Bp).length;if(o>1||o>0&&a>0)throw new $(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Bp extends NE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bp(e,n,r)}_apply(e){const n=this._parse(e);return jE(e._query,n),new Ws(e.firestore,e.converter,zf(e._query,n))}_parse(e){const n=Vp(e.firestore);return function(i,o,a,l,c,d,f){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new $(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Wv(f,d);const x=[];for(const _ of f)x.push($v(l,i,_));m={arrayValue:{values:x}}}else m=$v(l,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Wv(f,d),m=aj(a,o,f,d==="in"||d==="not-in");return We.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Up extends zp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Up(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)jE(o,l),o=zf(o,l)}(e._query,n),new Ws(e.firestore,e.converter,zf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $p extends NE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $p(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new $(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fa(i,o)}(e._query,this._field,this._direction);return new Ws(e.firestore,e.converter,RP(e._query,n))}}function fj(t,e="asc"){const n=e,r=zi("orderBy",t);return $p._create(r,n)}function $v(t,e,n){if(typeof(n=Gt(n))=="string"){if(n==="")throw new $(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!C1(e)&&n.indexOf("/")!==-1)throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(be.fromString(n));if(!K.isDocumentKey(r))throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ev(t,new K(r))}if(n instanceof qe)return ev(t,n._key);throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hu(n)}.`)}function Wv(t,e){if(!Array.isArray(t)||t.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jE(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function mj(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Uo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cs extends RE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zi("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Cs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Cs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cs._jsonSchema={type:He("string",Cs._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};class Ec extends Cs{data(e={}){return super.data(e)}}class Si{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Uo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ec(this._firestore,this._userDataWriter,r.key,r,new Uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Ec(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Uo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Ec(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Uo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:pj(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Si._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Si._jsonSchemaVersion="firestore/querySnapshot/1.0",Si._jsonSchema={type:He("string",Si._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};function gj(t,e,n,...r){t=As(t,qe);const s=As(t.firestore,$a),i=Vp(s);let o;return o=typeof(e=Gt(e))=="string"||e instanceof Mp?oj(i,"updateDoc",t._key,e,n,r):ij(i,"updateDoc",t._key,e),DE(s,[o.toMutation(t._key,Mn.exists(!0))])}function yj(t,e){const n=As(t.firestore,$a),r=bE(t),s=mj(t.converter,e),i=Vp(t.firestore);return DE(n,[sj(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Mn.exists(!1))]).then(()=>r)}function vj(t,...e){var c,d,f;t=Gt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Uv(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Uv(e[r])){const m=e[r];e[r]=(c=m.next)==null?void 0:c.bind(m),e[r+1]=(d=m.error)==null?void 0:d.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let i,o,a;if(t instanceof qe)o=As(t.firestore,$a),a=yp(t._key.path),i={next:m=>{e[r]&&e[r](xj(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=As(t,Ws);o=As(m.firestore,$a),a=m._query;const g=new PE(o);i={next:x=>{e[r]&&e[r](new Si(o,g,m,x))},error:e[r+1],complete:e[r+2]},hj(t._query)}const l=EE(o);return YN(l,a,s,i)}function DE(t,e){const n=EE(t);return GN(n,e)}function xj(t,e,n){const r=n.docs.get(e._key),s=new PE(t);return new Cs(t,s,e._key,r,new Uo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){Hk(Dk),Br(new Zn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new $a(new Yk(r.getProvider("auth-internal")),new Xk(o,r.getProvider("app-check-internal")),mP(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),jn(zv,Bv,e),jn(zv,Bv,"esm2020")})();var _j="firebase",wj="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn(_j,wj,"app");const ME="@firebase/installations",Wp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=1e4,VE=`w:${Wp}`,LE="FIS_v2",bj="https://firebaseinstallations.googleapis.com/v1",Ej=60*60*1e3,Sj="installations",Tj="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vs=new Wu(Sj,Tj,Ij);function FE(t){return t instanceof ts&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE({projectId:t}){return`${bj}/projects/${t}/installations`}function BE(t){return{token:t.token,requestStatus:2,expiresIn:Cj(t.expiresIn),creationTime:Date.now()}}async function UE(t,e){const r=(await e.json()).error;return Vs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function $E({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Aj(t,{refreshToken:e}){const n=$E(t);return n.append("Authorization",kj(e)),n}async function WE(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Cj(t){return Number(t.replace("s","000"))}function kj(t){return`${LE} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=zE(t),s=$E(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:LE,appId:t.appId,sdkVersion:VE},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await WE(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:BE(c.authToken)}}else throw await UE("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=/^[cdef][\w-]{21}$/,Xf="";function jj(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Dj(t);return Nj.test(n)?n:Xf}catch{return Xf}}function Dj(t){return Rj(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=new Map;function KE(t,e){const n=oh(t);YE(n,e),Mj(n,e)}function YE(t,e){const n=qE.get(t);if(n)for(const r of n)r(e)}function Mj(t,e){const n=Oj();n&&n.postMessage({key:t,fid:e}),Vj()}let bs=null;function Oj(){return!bs&&"BroadcastChannel"in self&&(bs=new BroadcastChannel("[Firebase] FID Change"),bs.onmessage=t=>{YE(t.data.key,t.data.fid)}),bs}function Vj(){qE.size===0&&bs&&(bs.close(),bs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="firebase-installations-database",Fj=1,Ls="firebase-installations-store";let gd=null;function Hp(){return gd||(gd=Xb(Lj,Fj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ls)}}})),gd}async function hu(t,e){const n=oh(t),s=(await Hp()).transaction(Ls,"readwrite"),i=s.objectStore(Ls),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&KE(t,e.fid),e}async function GE(t){const e=oh(t),r=(await Hp()).transaction(Ls,"readwrite");await r.objectStore(Ls).delete(e),await r.done}async function ah(t,e){const n=oh(t),s=(await Hp()).transaction(Ls,"readwrite"),i=s.objectStore(Ls),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&KE(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qp(t){let e;const n=await ah(t.appConfig,r=>{const s=zj(r),i=Bj(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Xf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function zj(t){const e=t||{fid:jj(),registrationStatus:0};return QE(e)}function Bj(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Vs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Uj(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:$j(t)}:{installationEntry:e}}async function Uj(t,e){try{const n=await Pj(t,e);return hu(t.appConfig,n)}catch(n){throw FE(n)&&n.customData.serverCode===409?await GE(t.appConfig):await hu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function $j(t){let e=await Hv(t.appConfig);for(;e.registrationStatus===1;)await HE(100),e=await Hv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await qp(t);return r||n}return e}function Hv(t){return ah(t,e=>{if(!e)throw Vs.create("installation-not-found");return QE(e)})}function QE(t){return Wj(t)?{fid:t.fid,registrationStatus:0}:t}function Wj(t){return t.registrationStatus===1&&t.registrationTime+OE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hj({appConfig:t,heartbeatServiceProvider:e},n){const r=qj(t,n),s=Aj(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:VE,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await WE(()=>fetch(r,a));if(l.ok){const c=await l.json();return BE(c)}else throw await UE("Generate Auth Token",l)}function qj(t,{fid:e}){return`${zE(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kp(t,e=!1){let n;const r=await ah(t.appConfig,i=>{if(!XE(i))throw Vs.create("not-registered");const o=i.authToken;if(!e&&Gj(o))return i;if(o.requestStatus===1)return n=Kj(t,e),i;{if(!navigator.onLine)throw Vs.create("app-offline");const a=Xj(i);return n=Yj(t,a),a}});return n?await n:r.authToken}async function Kj(t,e){let n=await qv(t.appConfig);for(;n.authToken.requestStatus===1;)await HE(100),n=await qv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Kp(t,e):r}function qv(t){return ah(t,e=>{if(!XE(e))throw Vs.create("not-registered");const n=e.authToken;return Jj(n)?{...e,authToken:{requestStatus:0}}:e})}async function Yj(t,e){try{const n=await Hj(t,e),r={...e,authToken:n};return await hu(t.appConfig,r),n}catch(n){if(FE(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await GE(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await hu(t.appConfig,r)}throw n}}function XE(t){return t!==void 0&&t.registrationStatus===2}function Gj(t){return t.requestStatus===2&&!Qj(t)}function Qj(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Ej}function Xj(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Jj(t){return t.requestStatus===1&&t.requestTime+OE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zj(t){const e=t,{installationEntry:n,registrationPromise:r}=await qp(e);return r?r.catch(console.error):Kp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(t,e=!1){const n=t;return await tD(n),(await Kp(n,e)).token}async function tD(t){const{registrationPromise:e}=await qp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){if(!t||!t.options)throw yd("App Configuration");if(!t.name)throw yd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw yd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function yd(t){return Vs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="installations",rD="installations-internal",sD=t=>{const e=t.getProvider("app").getImmediate(),n=nD(e),r=tl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},iD=t=>{const e=t.getProvider("app").getImmediate(),n=tl(e,JE).getImmediate();return{getId:()=>Zj(n),getToken:s=>eD(n,s)}};function oD(){Br(new Zn(JE,sD,"PUBLIC")),Br(new Zn(rD,iD,"PRIVATE"))}oD();jn(ME,Wp);jn(ME,Wp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du="analytics",aD="firebase_id",lD="origin",cD=60*1e3,uD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At=new lp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Kt=new Wu("analytics","Analytics",hD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t){if(!t.startsWith(Yp)){const e=Kt.create("invalid-gtag-resource",{gtagURL:t});return At.warn(e.message),""}return t}function ZE(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function fD(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function mD(t,e){const n=fD("firebase-js-sdk-policy",{createScriptURL:dD}),r=document.createElement("script"),s=`${Yp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function pD(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function gD(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await ZE(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){At.error(a)}t("config",s,i)}async function yD(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await ZE(n);for(const l of o){const c=a.find(f=>f.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){At.error(i)}}function vD(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await yD(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await gD(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){At.error(a)}}return s}function xD(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=vD(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function _D(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Yp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=30,bD=1e3;class ED{constructor(e={},n=bD){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const e2=new ED;function SD(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function TD(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:SD(n)},s=uD.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let a="";try{const l=await i.json();(o=l.error)!=null&&o.message&&(a=l.error.message)}catch{}throw Kt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:a})}return i.json()}async function ID(t,e=e2,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Kt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Kt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new kD;return setTimeout(async()=>{a.abort()},cD),t2({appId:r,apiKey:s,measurementId:i},o,a,e)}async function t2(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=e2){var a;const{appId:i,measurementId:o}=t;try{await AD(r,e)}catch(l){if(o)return At.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:i,measurementId:o};throw l}try{const l=await TD(t);return s.deleteThrottleMetadata(i),l}catch(l){const c=l;if(!CD(c)){if(s.deleteThrottleMetadata(i),o)return At.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw l}const d=Number((a=c==null?void 0:c.customData)==null?void 0:a.httpStatus)===503?j0(n,s.intervalMillis,wD):j0(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(i,f),At.debug(`Calling attemptFetch again in ${d} millis`),t2(t,f,r,s)}}function AD(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Kt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function CD(t){if(!(t instanceof ts)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class kD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function PD(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}async function RD(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(){if(Kb())try{await Yb()}catch(t){return At.warn(Kt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return At.warn(Kt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function jD(t,e,n,r,s,i,o){const a=ID(t);a.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&At.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>At.error(m)),e.push(a);const l=ND().then(m=>{if(m)return r.getId()}),[c,d]=await Promise.all([a,l]);_D(i)||mD(i,c.measurementId),s("js",new Date);const f=(o==null?void 0:o.config)??{};return f[lD]="firebase",f.update=!0,d!=null&&(f[aD]=d),s("config",c.measurementId,f),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.app=e}_delete(){return delete Ti[this.app.options.appId],Promise.resolve()}}let Ti={},Kv=[];const Yv={};let vd="dataLayer",MD="gtag",Gv,Gp,Qv=!1;function OD(){const t=[];if(IC()&&t.push("This is a browser extension environment."),CC()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Kt.create("invalid-analytics-context",{errorInfo:e});At.warn(n.message)}}function VD(t,e,n){OD();const r=t.options.appId;if(!r)throw Kt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)At.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Kt.create("no-api-key");if(Ti[r]!=null)throw Kt.create("already-exists",{id:r});if(!Qv){pD(vd);const{wrappedGtag:i,gtagCore:o}=xD(Ti,Kv,Yv,vd,MD);Gp=i,Gv=o,Qv=!0}return Ti[r]=jD(t,Kv,Yv,e,Gv,vd,n),new DD(t)}function LD(t=Zb()){t=Gt(t);const e=tl(t,du);return e.isInitialized()?e.getImmediate():FD(t)}function FD(t,e={}){const n=tl(t,du);if(n.isInitialized()){const s=n.getImmediate();if(ja(e,n.getOptions()))return s;throw Kt.create("already-initialized")}return n.initialize({options:e})}function zD(t,e,n){t=Gt(t),RD(Gp,Ti[t.app.options.appId],e,n).catch(r=>At.error(r))}function BD(t,e,n,r){t=Gt(t),PD(Gp,Ti[t.app.options.appId],e,n,r).catch(s=>At.error(s))}const Xv="@firebase/analytics",Jv="0.10.19";function UD(){Br(new Zn(du,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return VD(r,s,n)},"PUBLIC")),Br(new Zn("analytics-internal",t,"PRIVATE")),jn(Xv,Jv),jn(Xv,Jv,"esm2020");function t(e){try{const n=e.getProvider(du).getImmediate();return{logEvent:(r,s,i)=>BD(n,r,s,i),setUserProperties:(r,s)=>zD(n,r,s)}}catch(n){throw Kt.create("interop-component-reg-failed",{reason:n})}}}UD();const $D={apiKey:"AIzaSyAakkO8DNURC9LPCUBxVk94CFoMaE5_8RU",authDomain:"srm-hostel-system.firebaseapp.com",projectId:"srm-hostel-system",storageBucket:"srm-hostel-system.firebasestorage.app",messagingSenderId:"335578553501",appId:"1:335578553501:web:eb88fd6a90458f62918874",measurementId:"G-NB0XPHPH7P"};let xd=null,ps=null;try{xd=Jb($D),ps=ZN(xd);const t=LD(xd);console.log(" Firebase initialized successfully")}catch(t){console.error(" Firebase initialization failed:",t),console.log(" App will continue without Firebase")}function ge(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Fn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function WD(t,e){const n=ge(t);return isNaN(e)?Fn(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function HD(t,e){const n=+ge(t);return Fn(t,n+e)}const n2=6048e5,qD=864e5,KD=36e5,Kl=43200,Zv=1440;function YD(t,e){return HD(t,e*KD)}let GD={};function ll(){return GD}function Wa(t,e){var a,l,c,d;const n=ll(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=ge(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function fu(t){return Wa(t,{weekStartsOn:1})}function r2(t){const e=ge(t),n=e.getFullYear(),r=Fn(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=fu(r),i=Fn(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=fu(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function ex(t){const e=ge(t);return e.setHours(0,0,0,0),e}function mu(t){const e=ge(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function QD(t,e){const n=ex(t),r=ex(e),s=+n-mu(n),i=+r-mu(r);return Math.round((s-i)/qD)}function XD(t){const e=r2(t),n=Fn(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),fu(n)}function Sc(t,e){const n=ge(t),r=ge(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function JD(t){return Fn(t,Date.now())}function ZD(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function eM(t){if(!ZD(t)&&typeof t!="number")return!1;const e=ge(t);return!isNaN(Number(e))}function tM(t,e){const n=ge(t),r=ge(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function nM(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function rM(t,e){return+ge(t)-+ge(e)}function sM(t){const e=ge(t);return e.setHours(23,59,59,999),e}function iM(t){const e=ge(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function oM(t){const e=ge(t);return+sM(e)==+iM(e)}function aM(t,e){const n=ge(t),r=ge(e),s=Sc(n,r),i=Math.abs(tM(n,r));let o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let a=Sc(n,r)===-s;oM(ge(t))&&i===1&&Sc(t,r)===1&&(a=!1),o=s*(i-Number(a))}return o===0?0:o}function lM(t,e,n){const r=rM(t,e)/1e3;return nM(n==null?void 0:n.roundingMethod)(r)}function cM(t){const e=ge(t),n=Fn(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const uM={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},hM=(t,e,n)=>{let r;const s=uM[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function _d(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const dM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pM={date:_d({formats:dM,defaultWidth:"full"}),time:_d({formats:fM,defaultWidth:"full"}),dateTime:_d({formats:mM,defaultWidth:"full"})},gM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},yM=(t,e,n,r)=>gM[t];function Co(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const vM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},xM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_M={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},EM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},SM=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},TM={ordinalNumber:SM,era:Co({values:vM,defaultWidth:"wide"}),quarter:Co({values:xM,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Co({values:_M,defaultWidth:"wide"}),day:Co({values:wM,defaultWidth:"wide"}),dayPeriod:Co({values:bM,defaultWidth:"wide",formattingValues:EM,defaultFormattingWidth:"wide"})};function ko(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?AM(a,f=>f.test(o)):IM(a,f=>f.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function IM(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function AM(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function CM(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const kM=/^(\d+)(th|st|nd|rd)?/i,PM=/\d+/i,RM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},NM={any:[/^b/i,/^(a|c)/i]},jM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},DM={any:[/1/i,/2/i,/3/i,/4/i]},MM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},OM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},VM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},LM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},FM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},BM={ordinalNumber:CM({matchPattern:kM,parsePattern:PM,valueCallback:t=>parseInt(t,10)}),era:ko({matchPatterns:RM,defaultMatchWidth:"wide",parsePatterns:NM,defaultParseWidth:"any"}),quarter:ko({matchPatterns:jM,defaultMatchWidth:"wide",parsePatterns:DM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ko({matchPatterns:MM,defaultMatchWidth:"wide",parsePatterns:OM,defaultParseWidth:"any"}),day:ko({matchPatterns:VM,defaultMatchWidth:"wide",parsePatterns:LM,defaultParseWidth:"any"}),dayPeriod:ko({matchPatterns:FM,defaultMatchWidth:"any",parsePatterns:zM,defaultParseWidth:"any"})},s2={code:"en-US",formatDistance:hM,formatLong:pM,formatRelative:yM,localize:TM,match:BM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function UM(t){const e=ge(t);return QD(e,cM(e))+1}function $M(t){const e=ge(t),n=+fu(e)-+XD(e);return Math.round(n/n2)+1}function i2(t,e){var d,f,m,g;const n=ge(t),r=n.getFullYear(),s=ll(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=Fn(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=Wa(o,e),l=Fn(t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=Wa(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function WM(t,e){var a,l,c,d;const n=ll(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,s=i2(t,e),i=Fn(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Wa(i,e)}function HM(t,e){const n=ge(t),r=+Wa(n,e)-+WM(n,e);return Math.round(r/n2)+1}function fe(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const fr={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return fe(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):fe(n+1,2)},d(t,e){return fe(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return fe(t.getHours()%12||12,e.length)},H(t,e){return fe(t.getHours(),e.length)},m(t,e){return fe(t.getMinutes(),e.length)},s(t,e){return fe(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return fe(s,e.length)}},Xs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},tx={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return fr.y(t,e)},Y:function(t,e,n,r){const s=i2(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return fe(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):fe(i,e.length)},R:function(t,e){const n=r2(t);return fe(n,e.length)},u:function(t,e){const n=t.getFullYear();return fe(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return fe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return fe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return fr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return fe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=HM(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):fe(s,e.length)},I:function(t,e,n){const r=$M(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):fe(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):fr.d(t,e)},D:function(t,e,n){const r=UM(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):fe(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return fe(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return fe(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return fe(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Xs.noon:r===0?s=Xs.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Xs.evening:r>=12?s=Xs.afternoon:r>=4?s=Xs.morning:s=Xs.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return fr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):fr.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):fe(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):fe(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):fr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):fr.s(t,e)},S:function(t,e){return fr.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return rx(r);case"XXXX":case"XX":return gs(r);case"XXXXX":case"XXX":default:return gs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return rx(r);case"xxxx":case"xx":return gs(r);case"xxxxx":case"xxx":default:return gs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+nx(r,":");case"OOOO":default:return"GMT"+gs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+nx(r,":");case"zzzz":default:return"GMT"+gs(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return fe(r,e.length)},T:function(t,e,n){const r=t.getTime();return fe(r,e.length)}};function nx(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+fe(i,2)}function rx(t,e){return t%60===0?(t>0?"-":"+")+fe(Math.abs(t)/60,2):gs(t,e)}function gs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=fe(Math.trunc(r/60),2),i=fe(r%60,2);return n+s+e+i}const sx=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},o2=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},qM=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return sx(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",sx(r,e)).replace("{{time}}",o2(s,e))},KM={p:o2,P:qM},YM=/^D+$/,GM=/^Y+$/,QM=["D","DD","YY","YYYY"];function XM(t){return YM.test(t)}function JM(t){return GM.test(t)}function ZM(t,e,n){const r=e4(t,e,n);if(console.warn(r),QM.includes(t))throw new RangeError(r)}function e4(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const t4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,n4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,r4=/^'([^]*?)'?$/,s4=/''/g,i4=/[a-zA-Z]/;function o4(t,e,n){var d,f,m,g;const r=ll(),s=r.locale??s2,i=r.firstWeekContainsDate??((f=(d=r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,a=ge(t);if(!eM(a))throw new RangeError("Invalid time value");let l=e.match(n4).map(x=>{const _=x[0];if(_==="p"||_==="P"){const T=KM[_];return T(x,s.formatLong)}return x}).join("").match(t4).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const _=x[0];if(_==="'")return{isToken:!1,value:a4(x)};if(tx[_])return{isToken:!0,value:x};if(_.match(i4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(x=>{if(!x.isToken)return x.value;const _=x.value;(JM(_)||XM(_))&&ZM(_,e,String(t));const T=tx[_[0]];return T(a,_,s.localize,c)}).join("")}function a4(t){const e=t.match(r4);return e?e[1].replace(s4,"'"):t}function l4(t,e,n){const r=ll(),s=(n==null?void 0:n.locale)??r.locale??s2,i=2520,o=Sc(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let l,c;o>0?(l=ge(e),c=ge(t)):(l=ge(t),c=ge(e));const d=lM(c,l),f=(mu(c)-mu(l))/1e3,m=Math.round((d-f)/60);let g;if(m<2)return n!=null&&n.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,a):d<10?s.formatDistance("lessThanXSeconds",10,a):d<20?s.formatDistance("lessThanXSeconds",20,a):d<40?s.formatDistance("halfAMinute",0,a):d<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):m===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",m,a);if(m<45)return s.formatDistance("xMinutes",m,a);if(m<90)return s.formatDistance("aboutXHours",1,a);if(m<Zv){const x=Math.round(m/60);return s.formatDistance("aboutXHours",x,a)}else{if(m<i)return s.formatDistance("xDays",1,a);if(m<Kl){const x=Math.round(m/Zv);return s.formatDistance("xDays",x,a)}else if(m<Kl*2)return g=Math.round(m/Kl),s.formatDistance("aboutXMonths",g,a)}if(g=aM(c,l),g<12){const x=Math.round(m/Kl);return s.formatDistance("xMonths",x,a)}else{const x=g%12,_=Math.trunc(g/12);return x<3?s.formatDistance("aboutXYears",_,a):x<9?s.formatDistance("overXYears",_,a):s.formatDistance("almostXYears",_+1,a)}}function c4(t,e){return l4(t,JD(t),e)}function Tt(t,e){return WD(t,-e)}function pu(t,e){return YD(t,-e)}const ix=[{id:"#2847",title:"Water leakage in bathroom",description:"Continuous dripping from ceiling tap",category:"Plumbing",location:"KARRI - Block A - Room 245",status:"In Progress",priority:"Emergency",reportedBy:"Rahul Kumar",reportedAt:pu(new Date,2),assignedTo:"Maintenance Team A",icon:"",isPublic:!0},{id:"#2846",title:"Corridor lights not working",description:"Complete darkness in evening hours",category:"Electrical",location:"PARRI - Block B - Floor 3",status:"Assigned",priority:"High",reportedBy:"Priya Sharma",reportedAt:pu(new Date,5),assignedTo:"Electrical Team",icon:"",isPublic:!0},{id:"#2845",title:"Common bathroom not cleaned",description:"Needs immediate attention",category:"Cleanliness",location:"OARRI - Block A - Floor 2",status:"Reported",priority:"Medium",reportedBy:"Amit Singh",reportedAt:Tt(new Date,1),assignedTo:null,icon:"",isPublic:!1},{id:"#2844",title:"WiFi not working in room",description:"Unable to connect to network",category:"Internet/WiFi",location:"MANARONJITHM - Block A - 156",status:"Resolved",priority:"Low",reportedBy:"Sneha Patel",reportedAt:Tt(new Date,2),assignedTo:"IT Support",icon:"",isPublic:!0},{id:"#2843",title:"Broken bed frame",description:"Safety hazard, needs replacement",category:"Furniture",location:"SANSSAI - Block B - 312",status:"In Progress",priority:"Medium",reportedBy:"Vikram Reddy",reportedAt:Tt(new Date,3),assignedTo:"Furniture Team",icon:"",isPublic:!0}],u4=[{id:1,title:"Water Supply Maintenance",content:"Water supply will be temporarily unavailable tomorrow from 10 AM to 2 PM for maintenance work.",priority:"High",targetHostel:"All",createdAt:pu(new Date,3),isPinned:!0,author:"Hostel Administration"},{id:2,title:"Pest Control Drive",content:"Monthly pest control will be conducted this weekend. Please keep your rooms accessible.",priority:"Medium",targetHostel:"KARRI",createdAt:Tt(new Date,1),isPinned:!1,author:"KARRI Warden"},{id:3,title:"WiFi Password Update",content:"New WiFi password: SRM2026@Hostel. Please update your devices.",priority:"Low",targetHostel:"All",createdAt:Tt(new Date,2),isPinned:!1,author:"IT Department"}],h4=[{id:1,type:"lost",title:"Black Laptop Bag",description:"Contains important documents and charger",location:"Library - 2nd Floor",reportedAt:pu(new Date,6),reportedBy:"Anonymous",contact:"hidden",status:"Active",image:null},{id:2,type:"found",title:"Blue Water Bottle",description:"Found near the mess hall",location:"Mess Hall - Ground Floor",reportedAt:Tt(new Date,1),reportedBy:"Cleaning Staff",contact:"Contact Warden",status:"Available",image:null},{id:3,type:"lost",title:"Silver Watch",description:"Casio digital watch with metal strap",location:"Sports Complex",reportedAt:Tt(new Date,2),reportedBy:"Rohit M.",contact:"rohit.m@srmist.edu.in",status:"Active",image:null}],d4=[{id:1,name:"Rajesh Kumar",role:"Plumber",department:"Maintenance",hostelArea:"KARRI - Block A",phone:"(+91) 98765-43210",email:"rajesh.plumber@srmhostel.edu.in",status:"Available",avatar:null,hiredDate:Tt(new Date,365),statusColor:"green"},{id:2,name:"Suresh Patel",role:"Electrician",department:"Maintenance",hostelArea:"PARRI - Block B",phone:"(+91) 98765-43211",email:"suresh.electrician@srmhostel.edu.in",status:"Busy",avatar:null,hiredDate:Tt(new Date,280),statusColor:"red"},{id:3,name:"Mohan Singh",role:"Carpenter",department:"Maintenance",hostelArea:"OARRI - Block C",phone:"(+91) 98765-43212",email:"mohan.carpenter@srmhostel.edu.in",status:"Available",avatar:null,hiredDate:Tt(new Date,450),statusColor:"green"},{id:4,name:"Lakshmi Devi",role:"Housekeeping",department:"Maintenance",hostelArea:"MANARONJITHM - All Blocks",phone:"(+91) 98765-43213",email:"lakshmi.housekeeping@srmhostel.edu.in",status:"Available",avatar:null,hiredDate:Tt(new Date,200),statusColor:"green"},{id:5,name:"Vinod Sharma",role:"Pest Control",department:"Maintenance",hostelArea:"All Hostels",phone:"(+91) 98765-43214",email:"vinod.pestcontrol@srmhostel.edu.in",status:"Busy",avatar:null,hiredDate:Tt(new Date,150),statusColor:"red"},{id:6,name:"Arun Reddy",role:"AC/Fan Repair",department:"Maintenance",hostelArea:"SANSSAI - Block A & B",phone:"(+91) 98765-43215",email:"arun.acrepair@srmhostel.edu.in",status:"Available",avatar:null,hiredDate:Tt(new Date,320),statusColor:"green"},{id:7,name:"Kiran Tech",role:"WiFi Technician",department:"IT Support",hostelArea:"All Hostels",phone:"(+91) 98765-43216",email:"kiran.wifi@srmhostel.edu.in",status:"Available",avatar:null,hiredDate:Tt(new Date,90),statusColor:"green"},{id:8,name:"Ravi Security",role:"Security Guard",department:"Security",hostelArea:"KARRI - Main Gate",phone:"(+91) 98765-43217",email:"ravi.security@srmhostel.edu.in",status:"Available",avatar:null,hiredDate:Tt(new Date,500),statusColor:"green"}],a2=[{name:"Plumbing",icon:"",description:"Water & Drainage",count:52},{name:"Electrical",icon:"",description:"Lights & Power",count:45},{name:"Cleanliness",icon:"",description:"Cleaning Issues",count:78},{name:"Internet/WiFi",icon:"",description:"Connectivity",count:34},{name:"Furniture",icon:"",description:"Beds & Tables",count:25},{name:"Security",icon:"",description:"Safety & Locks",count:18},{name:"AC/Fan",icon:"",description:"Cooling Issues",count:31},{name:"Other",icon:"",description:"Miscellaneous",count:12}],l2=["KARRI","PARRI","OARRI","MANARONJITHM","SANSSAI"],f4=["Block A","Block B","Block C"],m4=["Low","Medium","High","Emergency"],c2=M.createContext(),cl=()=>{const t=M.useContext(c2);if(!t)throw new Error("useIssues must be used within an IssuesProvider");return t},wd=t=>({Plumbing:"",Electrical:"",Cleanliness:"","Internet/WiFi":"",Furniture:"",Security:"","AC/Fan":"",Other:""})[t]||"",p4=({children:t})=>{const[e,n]=M.useState([]),[r,s]=M.useState(!0),[i,o]=M.useState(null),[a,l]=M.useState(!1);M.useEffect(()=>{if(!ps){console.log(" Firebase not available, using mock data"),n(ix),s(!1),l(!1);return}console.log(" Setting up Firebase real-time listener"),l(!0);const v=Mv(ps,"issues"),b=dj(v,fj("createdAt","desc")),R=vj(b,j=>{const V=[];j.forEach(I=>{var E,k;const S=I.data();V.push({id:I.id,...S,reportedAt:((E=S.createdAt)==null?void 0:E.toDate())||new Date,createdAt:((k=S.createdAt)==null?void 0:k.toDate())||new Date,title:S.description?S.description.split(" ").slice(0,5).join(" ")+"...":"Issue Report",location:`${S.hostel} - ${S.block} - Room ${S.room}`,icon:wd(S.category)})}),console.log(` Loaded ${V.length} issues from Firestore`),n(V),s(!1),o(null)},j=>{console.error(" Firestore error, falling back to mock data:",j),n(ix),s(!1),o(null),l(!1)});return()=>R()},[]);const c=async(v,b)=>{try{if(a&&ps){const R={category:v.category,hostel:v.hostel,block:v.block,room:v.room,priority:v.priority,description:v.description,status:"Reported",reportedBy:(b==null?void 0:b.name)||"Student User",createdAt:Fv(),isPublic:v.isPublic||!1,assignedTo:null},j=await yj(Mv(ps,"issues"),R);return console.log(" Issue added to Firestore:",j.id),{id:j.id,...R,title:R.description.split(" ").slice(0,5).join(" ")+"...",location:`${R.hostel} - ${R.block} - Room ${R.room}`,icon:wd(R.category),reportedAt:new Date,createdAt:new Date}}else{const R={id:"#"+Math.floor(Math.random()*9e3+1e3),category:v.category,hostel:v.hostel,block:v.block,room:v.room,priority:v.priority,description:v.description,status:"Reported",reportedBy:(b==null?void 0:b.name)||"Student User",reportedAt:new Date,createdAt:new Date,isPublic:v.isPublic||!1,assignedTo:null,title:v.description.split(" ").slice(0,5).join(" ")+"...",location:`${v.hostel} - ${v.block} - Room ${v.room}`,icon:wd(v.category)};return n(j=>[R,...j]),console.log(" Issue added to local state:",R.id),R}}catch(R){throw console.error(" Error adding issue:",R),new Error("Failed to submit issue. Please try again.")}},d=async(v,b,R=null)=>{try{if(a&&ps){const j=bE(ps,"issues",v),V={status:b,updatedAt:Fv()};R&&(V.assignedTo=R),await gj(j,V),console.log(" Issue status updated in Firestore:",v)}else n(j=>j.map(V=>V.id===v?{...V,status:b,assignedTo:R}:V)),console.log(" Issue status updated in local state:",v)}catch(j){throw console.error(" Error updating issue status:",j),new Error("Failed to update issue status.")}},f=()=>e,m=v=>e.filter(b=>b.reportedBy===v),g=(v=5)=>e.slice(0,v),x=v=>v==="All"?e:e.filter(b=>b.status===v),_=()=>{const v=e.length,b=e.filter(j=>j.status==="Reported"||j.status==="Assigned"||j.status==="In Progress").length,R=e.filter(j=>j.status==="Resolved").length;return{total:v,pending:b,resolved:R,categories:T()}},T=()=>{const v={};return e.forEach(b=>{v[b.category]=(v[b.category]||0)+1}),Object.entries(v).map(([b,R])=>({name:b,count:R,percentage:e.length>0?Math.round(R/e.length*100):0}))},w={issues:e,loading:r,error:i,useFirebase:a,addIssue:c,updateIssueStatus:d,getAdminIssues:f,getStudentIssues:m,getRecentIssues:g,getIssuesByStatus:x,getIssueStats:_,getCategoryStats:T};return h.jsx(c2.Provider,{value:w,children:t})},u2=M.createContext(),Qp=()=>{const t=M.useContext(u2);if(!t)throw new Error("useSearch must be used within a SearchProvider");return t},g4=({children:t})=>{const[e,n]=M.useState(""),[r,s]=M.useState(""),i=M.useCallback(m=>{n(m);const g=setTimeout(()=>{s(m)},300);return()=>clearTimeout(g)},[]),o=M.useCallback(()=>{n(""),s("")},[]),a=M.useCallback(m=>{if(!r.trim())return m;const g=r.toLowerCase();return m.filter(x=>x.title.toLowerCase().includes(g)||x.id.toLowerCase().includes(g)||x.location.toLowerCase().includes(g)||x.reportedBy.toLowerCase().includes(g)||x.description.toLowerCase().includes(g)||x.category.toLowerCase().includes(g))},[r]),l=M.useCallback(m=>{if(!r.trim())return m;const g=r.toLowerCase();return m.filter(x=>x.title.toLowerCase().includes(g)||x.status.toLowerCase().includes(g)||x.category.toLowerCase().includes(g)||x.description.toLowerCase().includes(g))},[r]),c=M.useCallback(m=>{if(!r.trim())return m;const g=r.toLowerCase();return m.filter(x=>x.title.toLowerCase().includes(g)||x.content.toLowerCase().includes(g)||x.author.toLowerCase().includes(g)||x.targetHostel.toLowerCase().includes(g))},[r]),d=M.useCallback(m=>{if(!r.trim())return m;const g=r.toLowerCase();return m.filter(x=>x.title.toLowerCase().includes(g)||x.description.toLowerCase().includes(g)||x.location.toLowerCase().includes(g)||x.reportedBy.toLowerCase().includes(g))},[r]),f={searchTerm:e,debouncedSearchTerm:r,updateSearchTerm:i,clearSearch:o,filterAdminIssues:a,filterStudentIssues:l,filterAnnouncements:c,filterLostAndFound:d,hasActiveSearch:r.trim().length>0};return h.jsx(u2.Provider,{value:f,children:t})},y4=()=>{const{loading:t,error:e,useFirebase:n,issues:r}=cl();return null};var v4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_4=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...l},c)=>M.createElement("svg",{ref:c,...v4,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${x4(t)}`,...l},[...e.map(([d,f])=>M.createElement(d,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var le=_4;const w4=le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),b4=le("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),h2=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),E4=le("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),S4=le("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),d2=le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),T4=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),I4=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),A4=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),C4=le("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),k4=le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ox=le("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),P4=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),R4=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),ax=le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),lx=le("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),N4=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),j4=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Xp=le("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Jf=le("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),cx=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),D4=le("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),M4=le("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),O4=le("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),V4=le("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]),ul=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ux=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Bi=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),hx=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),L4=le("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),f2=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),m2=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),eo=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),F4=t=>o4(new Date(t),"MMM dd, yyyy"),hl=t=>c4(new Date(t),{addSuffix:!0}),Ce=(t,e="success")=>{const n=document.createElement("div");n.className=`fixed bottom-5 right-5 bg-white p-4 rounded-lg shadow-lg z-50 animate-slide-in max-w-sm ${e==="success"?"border-l-4 border-green-500":"border-l-4 border-red-500"}`,n.innerHTML=`
    <div class="flex items-center gap-3">
      <div class="text-xl">
        ${e==="success"?"":""}
      </div>
      <div class="text-sm font-medium text-gray-800">
        ${t}
      </div>
    </div>
  `,document.body.appendChild(n),setTimeout(()=>{n.remove()},3e3)},Jp=t=>({Reported:"bg-yellow-100 text-yellow-800",Assigned:"bg-blue-100 text-blue-800","In Progress":"bg-purple-100 text-purple-800",Resolved:"bg-green-100 text-green-800",Closed:"bg-gray-100 text-gray-800"})[t]||"bg-gray-100 text-gray-800",p2=t=>({Low:"bg-blue-100 text-blue-800",Medium:"bg-yellow-100 text-yellow-800",High:"bg-orange-100 text-orange-800",Emergency:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",z4=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState(!1),[o,a]=M.useState(!1),[l,c]=M.useState(!1),{login:d,user:f}=Jt(),m=$u();M.useEffect(()=>{f&&m(f.role==="admin"?"/admin":"/student")},[f,m]);const g=async _=>{_.preventDefault(),a(!0);try{const T=t.includes("admin")||t.includes("@srm.edu.in")?"admin":"student";await d(t,n,T),Ce("Login successful!","success"),m(T==="admin"?"/admin":"/student")}catch{Ce("Login failed. Please try again.","error")}finally{a(!1)}},x=_=>{_==="admin"?(e("admin@srm.edu.in"),r("admin123")):(e("student@srmist.edu.in"),r("student123"))};return h.jsxs("div",{className:"min-h-screen grid lg:grid-cols-2",children:[h.jsxs("div",{className:"hidden lg:flex bg-gradient-to-br from-gray-50 to-gray-100 p-16 flex-col justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-12 h-12 bg-srm-blue rounded-xl flex items-center justify-center text-white font-bold text-xl",children:"S"}),h.jsx("div",{className:"font-manrope font-bold text-2xl text-srm-blue",children:"SRM Hostel"})]}),h.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[h.jsxs("h1",{className:"font-manrope font-bold text-5xl leading-tight mb-6",children:["Hostel Maintenance",h.jsx("br",{}),h.jsx("span",{className:"text-srm-blue",children:"Made Simple."})]}),h.jsx("p",{className:"text-xl text-gray-600 mb-12 max-w-lg leading-relaxed",children:"Report issues instantly, track resolution status in real-time, and enjoy a better living experience on campus."}),h.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-12",children:[h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[h.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center text-2xl mb-4",children:""}),h.jsx("h3",{className:"font-bold mb-2",children:"Quick Reporting"}),h.jsx("p",{className:"text-sm text-gray-600",children:"Report plumbing, electrical, or other issues in seconds."})]}),h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[h.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center text-2xl mb-4",children:""}),h.jsx("h3",{className:"font-bold mb-2",children:"Real-time Tracking"}),h.jsx("p",{className:"text-sm text-gray-600",children:"Stay updated on the status of your complaints."})]})]})]}),h.jsxs("div",{className:"flex gap-8",children:[h.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-semibold",children:[h.jsx("div",{className:"w-5 h-5 bg-green-600 rounded-full flex items-center justify-center text-white text-xs",children:""}),"24/7 Support"]}),h.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-semibold",children:[h.jsx("div",{className:"w-5 h-5 bg-green-600 rounded-full flex items-center justify-center text-white text-xs",children:""}),"Fast Resolution"]}),h.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-semibold",children:[h.jsx("div",{className:"w-5 h-5 bg-green-600 rounded-full flex items-center justify-center text-white text-xs",children:""}),"Official Portal"]})]})]}),h.jsxs("div",{className:"flex flex-col items-center justify-center p-8 lg:p-16 bg-white",children:[h.jsxs("div",{className:"w-full max-w-md",children:[h.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-2xl flex items-center justify-center text-4xl mx-auto mb-8",children:""}),h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"font-manrope font-bold text-3xl mb-2",children:"Welcome Back"}),h.jsx("p",{className:"text-gray-600",children:"Sign in to access your dashboard"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[h.jsx("button",{type:"button",onClick:()=>x("admin"),className:"px-4 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors",children:"Demo Admin"}),h.jsx("button",{type:"button",onClick:()=>x("student"),className:"px-4 py-2 bg-green-50 text-green-700 rounded-lg text-sm font-medium hover:bg-green-100 transition-colors",children:"Demo Student"})]}),h.jsxs("form",{onSubmit:g,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),h.jsx("input",{type:"email",value:t,onChange:_=>e(_.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none transition-colors",placeholder:"Enter your email",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:s?"text":"password",value:n,onChange:_=>r(_.target.value),className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none transition-colors",placeholder:"Enter your password",required:!0}),h.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?h.jsx(C4,{size:20}):h.jsx(k4,{size:20})})]})]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",id:"remember",checked:l,onChange:_=>c(_.target.checked),className:"w-4 h-4 text-srm-blue border-gray-300 rounded focus:ring-srm-blue"}),h.jsx("label",{htmlFor:"remember",className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),h.jsx("button",{type:"submit",disabled:o,className:"w-full bg-srm-blue text-white py-3 px-4 rounded-xl font-semibold hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:o?h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("div",{className:"loading"}),"Signing in..."]}):"Sign In"})]}),h.jsx("div",{className:"mt-8 text-center",children:h.jsx("p",{className:"text-sm text-gray-600",children:"By logging in, you agree to the Hostel Rules & Regulations."})})]}),h.jsxs("div",{className:"mt-8 flex items-center gap-2 text-sm text-gray-500",children:[h.jsx("span",{children:"*"}),"SRM"]})]})]})},Hs=({onMobileMenuToggle:t,onSidebarToggle:e,isSidebarCollapsed:n})=>{const{user:r,logout:s}=Jt(),{searchTerm:i,updateSearchTerm:o,clearSearch:a}=Qp(),l=$u(),c=(r==null?void 0:r.role)==="student",d=c?"/student":"/admin",f=_=>{o(_.target.value)},m=_=>{_.key==="Enter"&&_.preventDefault()},g=()=>{l(c?"/student/announcements":"/admin/announcements")},x=()=>{window.confirm("Are you sure you want to logout?")&&s()};return h.jsxs("nav",{className:"bg-white border-b-2 border-gray-200 px-6 py-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("button",{onClick:t,className:"lg:hidden p-2 rounded-lg hover:bg-gray-100",children:h.jsx(cx,{size:20})}),h.jsx("button",{onClick:e,className:"hidden lg:block p-2 rounded-lg hover:bg-gray-100",children:h.jsx(cx,{size:20})}),h.jsxs(Jc,{to:d,className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-srm-blue rounded-xl flex items-center justify-center text-white font-bold text-lg",children:""}),h.jsxs("div",{children:[h.jsx("h1",{className:"font-manrope font-bold text-lg text-srm-blue",children:"SRM HOSTEL"}),h.jsx("p",{className:"text-xs text-gray-500",children:(r==null?void 0:r.role)==="admin"?"Admin Portal":"Student Portal"})]})]}),h.jsxs("div",{className:"hidden md:flex relative",children:[h.jsx(Bi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),h.jsx("input",{type:"text",placeholder:"Search issues, hostels, students...",value:i,onChange:f,onKeyPress:m,className:"pl-12 pr-4 py-3 w-full max-w-md border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none"}),i&&h.jsx("button",{onClick:a,className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:""})]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx("button",{onClick:g,className:"p-3 rounded-xl border-2 border-gray-200 hover:border-srm-blue transition-colors",children:h.jsx(h2,{size:18})}),h.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:"8"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:r==null?void 0:r.avatar,alt:r==null?void 0:r.name,className:"w-10 h-10 rounded-full"}),h.jsxs("div",{className:"hidden sm:block",children:[h.jsx("p",{className:"font-semibold text-sm",children:r==null?void 0:r.name}),h.jsx("p",{className:"text-xs text-gray-500 capitalize",children:r==null?void 0:r.role})]}),h.jsx("button",{onClick:x,className:"p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-red-500 transition-colors",children:h.jsx(N4,{size:18})})]})]})]}),h.jsx("div",{className:"md:hidden mt-4",children:h.jsxs("div",{className:"relative",children:[h.jsx(Bi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),h.jsx("input",{type:"text",placeholder:"Search...",value:i,onChange:f,onKeyPress:m,className:"pl-12 pr-4 py-3 w-full border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none"}),i&&h.jsx("button",{onClick:a,className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:""})]})})]})},qs=({isOpen:t,onClose:e,isCollapsed:n,onToggleCollapse:r})=>{const{user:s}=Jt(),i=Yi(),o=(s==null?void 0:s.role)==="student",c=o?[{icon:lx,label:"Dashboard",path:"/student",badge:null},{icon:ox,label:"My Issues",path:"/student/issues",badge:"3"},{icon:Jf,label:"Announcements",path:"/student/announcements",badge:null},{icon:Bi,label:"Lost & Found",path:"/student/lost-found",badge:null},{icon:hx,label:"Settings",path:"/student/settings",badge:null}]:[{icon:lx,label:"Dashboard",path:"/admin",badge:null},{icon:ox,label:"All Issues",path:"/admin/issues",badge:"67"},{icon:Jf,label:"Announcements",path:"/admin/announcements",badge:null},{icon:Bi,label:"Lost & Found",path:"/admin/lost-found",badge:null},{icon:m2,label:"Staff",path:"/admin/staff",badge:null},{icon:E4,label:"Hostels",path:"/admin/hostels",badge:null},{icon:hx,label:"Settings",path:"/admin/settings",badge:null}],d=f=>i.pathname===f;return h.jsxs(h.Fragment,{children:[t&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:e}),h.jsx("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50
        ${n&&!t?"w-16 lg:w-16":"w-72"}
        bg-gradient-to-b from-srm-blue to-blue-900
        transform transition-all duration-300 ease-in-out
        ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:h.jsxs("div",{className:"p-4 h-full overflow-y-auto",children:[h.jsx("button",{onClick:e,className:"lg:hidden absolute top-4 right-4 text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg",children:h.jsx(eo,{size:20})}),h.jsxs("div",{className:`flex items-center gap-3 mb-8 pb-6 border-b border-white border-opacity-20 ${n&&!t?"justify-center":""}`,children:[h.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 backdrop-blur-sm rounded-xl flex items-center justify-center text-white font-bold text-xl flex-shrink-0",children:""}),(!n||t)&&h.jsxs("div",{className:"min-w-0",children:[h.jsx("h3",{className:"font-manrope font-bold text-lg text-white truncate",children:"SRM HOSTEL"}),h.jsx("p",{className:"text-sm text-white text-opacity-70 truncate",children:o?"Student Portal":"Admin Portal"})]}),h.jsx("button",{onClick:r,className:"hidden lg:block ml-auto text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg flex-shrink-0",children:n?h.jsx(I4,{size:16}):h.jsx(T4,{size:16})})]}),h.jsxs("nav",{className:"space-y-2",children:[(!n||t)&&h.jsx("div",{className:"text-xs font-bold text-white text-opacity-60 uppercase tracking-wider mb-4",children:"Main"}),c.map(f=>{const m=f.icon;return h.jsxs(Jc,{to:f.path,onClick:e,className:`
                    flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group
                    ${d(f.path)?"bg-white bg-opacity-20 text-white shadow-lg":"text-white text-opacity-80 hover:bg-white hover:bg-opacity-10 hover:text-white"}
                    ${n&&!t?"justify-center":""}
                  `,title:n&&!t?f.label:"",children:[h.jsx(m,{size:20,className:"flex-shrink-0"}),(!n||t)&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"font-medium truncate",children:f.label}),f.badge&&h.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full font-bold flex-shrink-0",children:f.badge})]}),n&&!t&&f.badge&&h.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:f.badge})]},f.path)})]}),(!n||t)&&h.jsx("div",{className:"mt-8 pt-6 border-t border-white border-opacity-20",children:h.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white bg-opacity-10 rounded-xl",children:[h.jsx("img",{src:s==null?void 0:s.avatar,alt:s==null?void 0:s.name,className:"w-10 h-10 rounded-full flex-shrink-0"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"font-semibold text-white text-sm truncate",children:s==null?void 0:s.name}),h.jsx("p",{className:"text-white text-opacity-70 text-xs capitalize",children:s==null?void 0:s.role}),o&&(s==null?void 0:s.hostel)&&h.jsxs("p",{className:"text-white text-opacity-60 text-xs truncate",children:[s.hostel," - ",s.block," - ",s.room]})]})]})})]})})]})},g2=({isOpen:t,onClose:e,selectedCategory:n=""})=>{const{user:r}=Jt(),{addIssue:s}=cl(),[i,o]=M.useState({category:n,hostel:(r==null?void 0:r.hostel)||"",block:(r==null?void 0:r.block)||"",room:(r==null?void 0:r.room)||"",priority:"",description:"",isPublic:!1}),[a,l]=M.useState([]),[c,d]=M.useState(!1),f=_=>{const{name:T,value:w,type:v,checked:b}=_.target;o(R=>({...R,[T]:v==="checkbox"?b:w}))},m=_=>{const T=Array.from(_.target.files);if(T.length+a.length>5){Ce("Maximum 5 images allowed","error");return}l(w=>[...w,...T])},g=_=>{l(T=>T.filter((w,v)=>v!==_))},x=async _=>{_.preventDefault(),d(!0);try{const T=await s(i,r);Ce(`Issue ${T.id} reported successfully! You will receive updates via email.`,"success"),o({category:"",hostel:(r==null?void 0:r.hostel)||"",block:(r==null?void 0:r.block)||"",room:(r==null?void 0:r.room)||"",priority:"",description:"",isPublic:!1}),l([]),e()}catch(T){Ce(T.message||"Failed to report issue. Please try again.","error")}finally{d(!1)}};return t?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-modal-slide-in",children:[h.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[h.jsx("h3",{className:"font-sora font-bold text-2xl",children:"Report New Issue"}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx(eo,{size:24})})]}),h.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category *"}),h.jsxs("select",{name:"category",value:i.category,onChange:f,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none",required:!0,children:[h.jsx("option",{value:"",children:"Select Category"}),a2.map(_=>h.jsxs("option",{value:_.name,children:[_.icon," ",_.name]},_.name))]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Hostel *"}),h.jsxs("select",{name:"hostel",value:i.hostel,onChange:f,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none",required:!0,children:[h.jsx("option",{value:"",children:"Select Hostel"}),l2.map(_=>h.jsx("option",{value:_,children:_},_))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Block *"}),h.jsxs("select",{name:"block",value:i.block,onChange:f,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none",required:!0,children:[h.jsx("option",{value:"",children:"Select Block"}),f4.map(_=>h.jsx("option",{value:_,children:_},_))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Room Number *"}),h.jsx("input",{type:"text",name:"room",value:i.room,onChange:f,placeholder:"e.g., 205",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority *"}),h.jsxs("select",{name:"priority",value:i.priority,onChange:f,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none",required:!0,children:[h.jsx("option",{value:"",children:"Select Priority"}),m4.map(_=>h.jsx("option",{value:_,children:_},_))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Issue Description *"}),h.jsx("textarea",{name:"description",value:i.description,onChange:f,placeholder:"Describe the issue in detail...",rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none resize-vertical",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Upload Photos (Optional)"}),h.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-srm-blue transition-colors",children:[h.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:m,className:"hidden",id:"file-upload"}),h.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[h.jsx(d2,{size:48,className:"mx-auto text-gray-400 mb-4"}),h.jsx("div",{className:"text-gray-600 mb-2",children:"Click to upload images"}),h.jsx("div",{className:"text-sm text-gray-500",children:"Maximum 5 images, up to 10MB each"})]})]}),a.length>0&&h.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-4",children:a.map((_,T)=>h.jsxs("div",{className:"relative",children:[h.jsx("img",{src:URL.createObjectURL(_),alt:`Preview ${T+1}`,className:"w-full h-24 object-cover rounded-lg"}),h.jsx("button",{type:"button",onClick:()=>g(T),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm hover:bg-red-600",children:""})]},T))})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("input",{type:"checkbox",id:"isPublic",name:"isPublic",checked:i.isPublic,onChange:f,className:"w-4 h-4 text-srm-blue border-gray-300 rounded focus:ring-srm-blue"}),h.jsx("label",{htmlFor:"isPublic",className:"text-sm text-gray-700",children:"Make this issue public (visible to all students)"})]}),h.jsx("button",{type:"submit",disabled:c,className:"w-full bg-srm-blue text-white py-4 px-6 rounded-xl font-semibold hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("div",{className:"loading"}),"Submitting Issue..."]}):"Submit Issue Report"})]})]})}):null},B4=()=>{const{filterStudentIssues:t,hasActiveSearch:e,debouncedSearchTerm:n}=Qp(),{getStudentIssues:r,loading:s,error:i}=cl(),{user:o}=Jt(),[a,l]=M.useState(!1),[c,d]=M.useState(!0),[f,m]=M.useState(!1),[g,x]=M.useState(""),_=r(o==null?void 0:o.name).slice(0,3),T=t(_),w=(v="")=>{x(v),m(!0)};return h.jsxs("div",{className:`main-layout bg-gray-50 ${c?"":"sidebar-expanded"}`,children:[h.jsx(qs,{isOpen:a,onClose:()=>l(!1),isCollapsed:c,onToggleCollapse:()=>d(!c)}),h.jsxs("div",{className:"main-content-area",children:[h.jsx(Hs,{onMobileMenuToggle:()=>l(!0),onSidebarToggle:()=>d(!c),isSidebarCollapsed:c}),h.jsxs("main",{className:"p-6",children:[h.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl p-8 mb-8 text-white",children:h.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between",children:[h.jsxs("div",{className:"mb-6 lg:mb-0",children:[h.jsx("h1",{className:"font-sora font-bold text-3xl mb-2",children:"Report Your Hostel Issues"}),h.jsx("p",{className:"text-lg opacity-90",children:"Quick and easy issue reporting for better hostel maintenance"})]}),h.jsxs("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-2xl p-6 text-center",children:[h.jsx("div",{className:"font-sora font-bold text-3xl mb-1",children:"24/7"}),h.jsx("div",{className:"text-sm",children:"Support Available"})]})]})}),h.jsx("div",{className:"mb-8",children:h.jsxs("button",{onClick:()=>w(),className:"w-full lg:w-auto bg-srm-blue text-white px-8 py-4 rounded-xl font-semibold hover:bg-blue-800 transition-colors flex items-center justify-center gap-3 text-lg",children:[h.jsx(ul,{size:24}),"Report New Issue"]})}),h.jsxs("div",{className:"mb-8",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsx("h2",{className:"font-sora font-bold text-2xl text-gray-800",children:"Select Issue Category"}),h.jsx(Jc,{to:"/student/issues",className:"text-srm-blue hover:text-blue-800 font-semibold flex items-center gap-2",children:"View All "})]}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:a2.map(v=>h.jsx("div",{onClick:()=>w(v.name),className:"bg-white p-6 rounded-2xl shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer hover:-translate-y-2 border-3 border-transparent hover:border-srm-blue group",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform",children:v.icon}),h.jsx("h3",{className:"font-sora font-bold text-lg mb-2 text-gray-800",children:v.name}),h.jsx("p",{className:"text-sm text-gray-600",children:v.description})]})},v.name))})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm",children:[h.jsx("div",{className:"p-6 border-b border-gray-200",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h2",{className:"font-sora font-bold text-xl text-gray-800",children:"My Recent Issues"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:"px-4 py-2 bg-srm-blue text-white rounded-lg text-sm font-medium",children:"All"}),h.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm font-medium hover:bg-gray-200",children:"Pending"}),h.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm font-medium hover:bg-gray-200",children:"Resolved"})]})]})}),h.jsx("div",{className:"p-6 space-y-4",children:s?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Loading your issues..."}),h.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch your data."})]}):i?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Error loading issues"}),h.jsx("p",{className:"text-gray-600",children:i})]}):T.length===0&&e?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No results found"}),h.jsxs("p",{className:"text-gray-600 mb-4",children:['No issues match "',n,'". Try adjusting your search terms.']})]}):T.length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No issues reported yet"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Start by reporting your first issue"}),h.jsx("button",{onClick:()=>w(),className:"bg-srm-blue text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-800 transition-colors",children:"Report Issue"})]}):h.jsxs(h.Fragment,{children:[T.map(v=>h.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[h.jsx("div",{className:"w-16 h-16 bg-white rounded-xl flex items-center justify-center text-2xl shadow-sm",children:v.icon}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:"font-semibold text-lg mb-1",children:v.title}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[" ",v.location]}),h.jsxs("span",{className:"flex items-center gap-1",children:[" ",hl(v.reportedAt)]}),h.jsxs("span",{className:"flex items-center gap-1",children:[" ",v.priority," Priority"]})]})]}),h.jsx("div",{children:h.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium ${Jp(v.status)}`,children:v.status})})]},v.id)),h.jsx("div",{className:"text-center pt-4",children:h.jsx(Jc,{to:"/student/issues",className:"text-srm-blue hover:text-blue-800 font-semibold",children:"View All My Issues "})})]})})]})]})]}),f&&h.jsx(g2,{isOpen:f,onClose:()=>m(!1),selectedCategory:g})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function dl(t){return t+.5|0}const Er=(t,e,n)=>Math.max(Math.min(t,n),e);function $o(t){return Er(dl(t*2.55),0,255)}function Lr(t){return Er(dl(t*255),0,255)}function Hn(t){return Er(dl(t/2.55)/100,0,1)}function dx(t){return Er(dl(t*100),0,100)}const Zt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Zf=[..."0123456789ABCDEF"],U4=t=>Zf[t&15],$4=t=>Zf[(t&240)>>4]+Zf[t&15],Yl=t=>(t&240)>>4===(t&15),W4=t=>Yl(t.r)&&Yl(t.g)&&Yl(t.b)&&Yl(t.a);function H4(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Zt[t[1]]*17,g:255&Zt[t[2]]*17,b:255&Zt[t[3]]*17,a:e===5?Zt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Zt[t[1]]<<4|Zt[t[2]],g:Zt[t[3]]<<4|Zt[t[4]],b:Zt[t[5]]<<4|Zt[t[6]],a:e===9?Zt[t[7]]<<4|Zt[t[8]]:255})),n}const q4=(t,e)=>t<255?e(t):"";function K4(t){var e=W4(t)?U4:$4;return t?"#"+e(t.r)+e(t.g)+e(t.b)+q4(t.a,e):void 0}const Y4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function y2(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function G4(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Q4(t,e,n){const r=y2(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function X4(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Zp(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,d;return i!==o&&(d=i-o,c=a>.5?d/(2-i-o):d/(i+o),l=X4(n,r,s,d,i),l=l*60+.5),[l|0,c||0,a]}function eg(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Lr)}function tg(t,e,n){return eg(y2,t,e,n)}function J4(t,e,n){return eg(Q4,t,e,n)}function Z4(t,e,n){return eg(G4,t,e,n)}function v2(t){return(t%360+360)%360}function eO(t){const e=Y4.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?$o(+e[5]):Lr(+e[5]));const s=v2(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=J4(s,i,o):e[1]==="hsv"?r=Z4(s,i,o):r=tg(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function tO(t,e){var n=Zp(t);n[0]=v2(n[0]+e),n=tg(n),t.r=n[0],t.g=n[1],t.b=n[2]}function nO(t){if(!t)return;const e=Zp(t),n=e[0],r=dx(e[1]),s=dx(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Hn(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const fx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},mx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function rO(){const t={},e=Object.keys(mx),n=Object.keys(fx);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,fx[i]);i=parseInt(mx[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Gl;function sO(t){Gl||(Gl=rO(),Gl.transparent=[0,0,0,0]);const e=Gl[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const iO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function oO(t){const e=iO.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?$o(o):Er(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?$o(r):Er(r,0,255)),s=255&(e[4]?$o(s):Er(s,0,255)),i=255&(e[6]?$o(i):Er(i,0,255)),{r,g:s,b:i,a:n}}}function aO(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Hn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const bd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Js=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function lO(t,e,n){const r=Js(Hn(t.r)),s=Js(Hn(t.g)),i=Js(Hn(t.b));return{r:Lr(bd(r+n*(Js(Hn(e.r))-r))),g:Lr(bd(s+n*(Js(Hn(e.g))-s))),b:Lr(bd(i+n*(Js(Hn(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Ql(t,e,n){if(t){let r=Zp(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=tg(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function x2(t,e){return t&&Object.assign(e||{},t)}function px(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Lr(t[3]))):(e=x2(t,{r:0,g:0,b:0,a:1}),e.a=Lr(e.a)),e}function cO(t){return t.charAt(0)==="r"?oO(t):eO(t)}class Ha{constructor(e){if(e instanceof Ha)return e;const n=typeof e;let r;n==="object"?r=px(e):n==="string"&&(r=H4(e)||sO(e)||cO(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=x2(this._rgb);return e&&(e.a=Hn(e.a)),e}set rgb(e){this._rgb=px(e)}rgbString(){return this._valid?aO(this._rgb):void 0}hexString(){return this._valid?K4(this._rgb):void 0}hslString(){return this._valid?nO(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=lO(this._rgb,e._rgb,n)),this}clone(){return new Ha(this.rgb)}alpha(e){return this._rgb.a=Lr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=dl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ql(this._rgb,2,e),this}darken(e){return Ql(this._rgb,2,-e),this}saturate(e){return Ql(this._rgb,1,e),this}desaturate(e){return Ql(this._rgb,1,-e),this}rotate(e){return tO(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function zn(){}const uO=(()=>{let t=0;return()=>t++})();function _t(t){return t==null}function rt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ce(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function rr(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Sn(t,e){return rr(t)?t:e}function pe(t,e){return typeof t>"u"?e:t}const hO=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,_2=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ie(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function me(t,e,n,r){let s,i,o;if(rt(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(ce(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function gu(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function yu(t){if(rt(t))return t.map(yu);if(ce(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=yu(t[n[s]]);return e}return t}function w2(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function dO(t,e,n,r){if(!w2(t))return;const s=e[t],i=n[t];ce(s)&&ce(i)?qa(s,i,r):e[t]=yu(i)}function qa(t,e,n){const r=rt(e)?e:[e],s=r.length;if(!ce(t))return t;n=n||{};const i=n.merger||dO;let o;for(let a=0;a<s;++a){if(o=r[a],!ce(o))continue;const l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)i(l[c],t,o,n)}return t}function ca(t,e){return qa(t,e,{merger:fO})}function fO(t,e,n){if(!w2(t))return;const r=e[t],s=n[t];ce(r)&&ce(s)?ca(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=yu(s))}const gx={"":t=>t,x:t=>t.x,y:t=>t.y};function mO(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function pO(t){const e=mO(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Ka(t,e){return(gx[e]||(gx[e]=pO(e)))(t)}function ng(t){return t.charAt(0).toUpperCase()+t.slice(1)}const vu=t=>typeof t<"u",Yr=t=>typeof t=="function",yx=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function gO(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const we=Math.PI,Ke=2*we,xu=Number.POSITIVE_INFINITY,yO=we/180,Je=we/2,cs=we/4,vx=we*2/3,xx=Math.sign;function vO(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function xO(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function _u(t){return!xO(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Es(t){return t*(we/180)}function _O(t){return t*(180/we)}function b2(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*we&&(i+=Ke),{angle:i,distance:s}}function wO(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function kn(t){return(t%Ke+Ke)%Ke}function wu(t,e,n,r){const s=kn(t),i=kn(e),o=kn(n),a=kn(i-s),l=kn(o-s),c=kn(s-i),d=kn(s-o);return s===i||s===o||r&&i===o||a>l&&c<d}function sn(t,e,n){return Math.max(e,Math.min(n,t))}function bO(t){return sn(t,-32768,32767)}function Wo(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function rg(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const em=(t,e,n,r)=>rg(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),EO=(t,e,n)=>rg(t,n,r=>t[r][e]>=n);function SO(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const E2=["push","pop","shift","splice","unshift"];function TO(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),E2.forEach(n=>{const r="_onData"+ng(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function _x(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(E2.forEach(i=>{delete t[i]}),delete t._chartjs)}function IO(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const S2=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function T2(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,S2.call(window,()=>{r=!1,t.apply(e,n)}))}}function AO(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const sg=t=>t==="start"?"left":t==="end"?"right":"center",pt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,CO=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,Xl=t=>t===0||t===1,wx=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ke/n)),bx=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ke/n)+1,ua={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Je)+1,easeOutSine:t=>Math.sin(t*Je),easeInOutSine:t=>-.5*(Math.cos(we*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Xl(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Xl(t)?t:wx(t,.075,.3),easeOutElastic:t=>Xl(t)?t:bx(t,.075,.3),easeInOutElastic(t){return Xl(t)?t:t<.5?.5*wx(t*2,.1125,.45):.5+.5*bx(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ua.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ua.easeInBounce(t*2)*.5:ua.easeOutBounce(t*2-1)*.5+.5};function I2(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Ex(t){return I2(t)?t:new Ha(t)}function Ed(t){return I2(t)?t:new Ha(t).saturate(.5).darken(.1).hexString()}const kO=["x","y","borderWidth","radius","tension"],PO=["color","borderColor","backgroundColor"];function RO(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:PO},numbers:{type:"number",properties:kO}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function NO(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Sx=new Map;function jO(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Sx.get(n);return r||(r=new Intl.NumberFormat(t,e),Sx.set(n,r)),r}function DO(t,e,n){return jO(e,n).format(t)}const MO={values(t){return rt(t)?t:""+t}};var OO={formatters:MO};function VO(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:OO.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Fs=Object.create(null),tm=Object.create(null);function ha(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Sd(t,e,n){return typeof e=="string"?qa(ha(t,e),n):qa(ha(t,""),e)}class LO{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Ed(s.backgroundColor),this.hoverBorderColor=(r,s)=>Ed(s.borderColor),this.hoverColor=(r,s)=>Ed(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Sd(this,e,n)}get(e){return ha(this,e)}describe(e,n){return Sd(tm,e,n)}override(e,n){return Sd(Fs,e,n)}route(e,n,r,s){const i=ha(this,e),o=ha(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return ce(l)?Object.assign({},c,l):pe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Fe=new LO({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[RO,NO,VO]);function FO(t){return!t||_t(t.size)||_t(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Tx(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function us(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function Ix(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Ax(t,e,n,r){A2(t,e,n,r,null)}function A2(t,e,n,r,s){let i,o,a,l,c,d,f,m;const g=e.pointStyle,x=e.rotation,_=e.radius;let T=(x||0)*yO;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(T),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),g){default:s?t.ellipse(n,r,s/2,_,0,0,Ke):t.arc(n,r,_,0,Ke),t.closePath();break;case"triangle":d=s?s/2:_,t.moveTo(n+Math.sin(T)*d,r-Math.cos(T)*_),T+=vx,t.lineTo(n+Math.sin(T)*d,r-Math.cos(T)*_),T+=vx,t.lineTo(n+Math.sin(T)*d,r-Math.cos(T)*_),t.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(T+cs)*l,f=Math.cos(T+cs)*(s?s/2-c:l),a=Math.sin(T+cs)*l,m=Math.sin(T+cs)*(s?s/2-c:l),t.arc(n-f,r-a,c,T-we,T-Je),t.arc(n+m,r-o,c,T-Je,T),t.arc(n+f,r+a,c,T,T+Je),t.arc(n-m,r+o,c,T+Je,T+we),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*_,d=s?s/2:l,t.rect(n-d,r-l,2*d,2*l);break}T+=cs;case"rectRot":f=Math.cos(T)*(s?s/2:_),o=Math.cos(T)*_,a=Math.sin(T)*_,m=Math.sin(T)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+m,r-o),t.lineTo(n+f,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":T+=cs;case"cross":f=Math.cos(T)*(s?s/2:_),o=Math.cos(T)*_,a=Math.sin(T)*_,m=Math.sin(T)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":f=Math.cos(T)*(s?s/2:_),o=Math.cos(T)*_,a=Math.sin(T)*_,m=Math.sin(T)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),T+=cs,f=Math.cos(T)*(s?s/2:_),o=Math.cos(T)*_,a=Math.sin(T)*_,m=Math.sin(T)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=s?s/2:Math.cos(T)*_,a=Math.sin(T)*_,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(T)*(s?s/2:_),r+Math.sin(T)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function C2(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function ig(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function og(t){t.restore()}function zO(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_t(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function BO(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function UO(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ya(t,e,n,r,s,i={}){const o=rt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,zO(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&UO(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),_t(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),BO(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function nm(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*we,we,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,we,Je,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Je,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Je,!0),t.lineTo(n+o.topLeft,r)}const $O=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,WO=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function HO(t,e){const n=(""+t).match($O);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const qO=t=>+t||0;function ag(t,e){const n={},r=ce(e),s=r?Object.keys(e):e,i=ce(t)?r?o=>pe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=qO(i(o));return n}function KO(t){return ag(t,{top:"y",right:"x",bottom:"y",left:"x"})}function da(t){return ag(t,["topLeft","topRight","bottomLeft","bottomRight"])}function un(t){const e=KO(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function xt(t,e){t=t||{},e=e||Fe.font;let n=pe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=pe(t.style,e.style);r&&!(""+r).match(WO)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:pe(t.family,e.family),lineHeight:HO(pe(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:pe(t.weight,e.weight),string:""};return s.string=FO(s),s}function Jl(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function YO(t,e,n){const{min:r,max:s}=t,i=_2(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function to(t,e){return Object.assign(Object.create(t),e)}function lg(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=N2("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>lg([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return P2(a,l,()=>nV(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return kx(a).includes(l)},ownKeys(a){return kx(a)},set(a,l,c){const d=a._storage||(a._storage=s());return a[l]=d[l]=c,delete a._keys,!0}})}function Ui(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:k2(t,r),setContext:i=>Ui(t,i,n,r),override:i=>Ui(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return P2(i,o,()=>QO(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function k2(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Yr(n)?n:()=>n,isIndexable:Yr(r)?r:()=>r}}const GO=(t,e)=>t?t+ng(e):e,cg=(t,e)=>ce(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function P2(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function QO(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return Yr(a)&&o.isScriptable(e)&&(a=XO(e,a,t,n)),rt(a)&&a.length&&(a=JO(e,a,t,o.isIndexable)),cg(e,a)&&(a=Ui(a,s,i&&i[e],o)),a}function XO(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),cg(t,l)&&(l=ug(s._scopes,s,t,l)),l}function JO(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(ce(e[0])){const l=e,c=s._scopes.filter(d=>d!==l);e=[];for(const d of l){const f=ug(c,s,t,d);e.push(Ui(f,i,o&&o[t],a))}}return e}function R2(t,e,n){return Yr(t)?t(e,n):t}const ZO=(t,e)=>t===!0?e:typeof t=="string"?Ka(e,t):void 0;function eV(t,e,n,r,s){for(const i of e){const o=ZO(n,i);if(o){t.add(o);const a=R2(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function ug(t,e,n,r){const s=e._rootScopes,i=R2(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=Cx(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=Cx(a,o,i,l,r),l===null)?!1:lg(Array.from(a),[""],s,i,()=>tV(e,n,r))}function Cx(t,e,n,r,s){for(;n;)n=eV(t,e,n,r,s);return n}function tV(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return rt(s)&&ce(n)?n:s||{}}function nV(t,e,n,r){let s;for(const i of e)if(s=N2(GO(i,t),n),typeof s<"u")return cg(t,s)?ug(n,r,t,s):s}function N2(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function kx(t){let e=t._keys;return e||(e=t._keys=rV(t._scopes)),e}function rV(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}function hg(){return typeof window<"u"&&typeof document<"u"}function dg(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function bu(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const lh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function sV(t,e){return lh(t).getPropertyValue(e)}const iV=["top","right","bottom","left"];function ks(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=iV[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const oV=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function aV(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(oV(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ys(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=lh(n),i=s.boxSizing==="border-box",o=ks(s,"padding"),a=ks(s,"border","width"),{x:l,y:c,box:d}=aV(t,n),f=o.left+(d&&a.left),m=o.top+(d&&a.top);let{width:g,height:x}=e;return i&&(g-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-f)/g*n.width/r),y:Math.round((c-m)/x*n.height/r)}}function lV(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&dg(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=lh(i),l=ks(a,"border","width"),c=ks(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=bu(a.maxWidth,i,"clientWidth"),s=bu(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||xu,maxHeight:s||xu}}const Sr=t=>Math.round(t*10)/10;function cV(t,e,n,r){const s=lh(t),i=ks(s,"margin"),o=bu(s.maxWidth,t,"clientWidth")||xu,a=bu(s.maxHeight,t,"clientHeight")||xu,l=lV(t,e,n);let{width:c,height:d}=l;if(s.boxSizing==="content-box"){const m=ks(s,"border","width"),g=ks(s,"padding");c-=g.width+m.width,d-=g.height+m.height}return c=Math.max(0,c-i.width),d=Math.max(0,r?c/r:d-i.height),c=Sr(Math.min(c,o,l.maxWidth)),d=Sr(Math.min(d,a,l.maxHeight)),c&&!d&&(d=Sr(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,c=Sr(Math.floor(d*r))),{width:c,height:d}}function Px(t,e,n){const r=e||1,s=Sr(t.height*r),i=Sr(t.width*r);t.height=Sr(t.height),t.width=Sr(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const uV=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};hg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Rx(t,e){const n=sV(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}const hV=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},dV=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ii(t,e,n){return t?hV(e,n):dV()}function j2(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function D2(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Zl(t,e,n){return t.options.clip?t[n]:e[n]}function fV(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Zl(n,e,"left"),right:Zl(n,e,"right"),top:Zl(r,e,"top"),bottom:Zl(r,e,"bottom")}:e}function mV(t,e){const n=e._clip;if(n.disabled)return!1;const r=fV(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class pV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=S2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Bn=new pV;const Nx="transparent",gV={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Ex(t||Nx),s=r.valid&&Ex(e||Nx);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class yV{constructor(e,n,r,s){const i=n[r];s=Jl([e.to,s,i,e.from]);const o=Jl([e.from,i,s]);this._active=!0,this._fn=e.fn||gV[e.type||typeof o],this._easing=ua[e.easing]||ua.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Jl([e.to,n,s,e.from]),this._from=Jl([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class M2{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ce(e))return;const n=Object.keys(Fe.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!ce(i))return;const o={};for(const a of n)o[a]=i[a];(rt(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=xV(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&vV(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const d=n[c];let f=i[c];const m=r.get(c);if(f)if(m&&f.active()){f.update(m,d,a);continue}else f.cancel();if(!m||!m.duration){e[c]=d;continue}i[c]=f=new yV(m,e,c,d),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Bn.add(this._chart,r),!0}}function vV(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function xV(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function jx(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function _V(t,e,n){if(n===!1)return!1;const r=jx(t,n),s=jx(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function wV(t){let e,n,r,s;return ce(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function O2(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function Dx(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let d=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(d=!0,r.all)continue;break}c=t.values[l],rr(c)&&(i||e===0||xx(e)===xx(c))&&(e+=c)}return!d&&!r.all?0:e}function bV(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,d;for(l=0,c=o.length;l<c;++l)d=o[l],a[l]={[s]:d,[i]:t[d]};return a}function Td(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function EV(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function SV(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function TV(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Mx(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function Ox(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,d=EV(i,o,r),f=e.length;let m;for(let g=0;g<f;++g){const x=e[g],{[l]:_,[c]:T}=x,w=x._stacks||(x._stacks={});m=w[c]=TV(s,d,_),m[a]=T,m._top=Mx(m,o,!0,r.type),m._bottom=Mx(m,o,!1,r.type);const v=m._visualValues||(m._visualValues={});v[a]=T}}function Id(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function IV(t,e){return to(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function AV(t,e,n){return to(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Po(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Ad=t=>t==="reset"||t==="none",Vx=(t,e)=>e?t:Object.assign({},t),CV=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:O2(n,!0),values:null};class fa{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Td(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Po(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,m,g,x)=>f==="x"?m:f==="r"?x:g,i=n.xAxisID=pe(r.xAxisID,Id(e,"x")),o=n.yAxisID=pe(r.yAxisID,Id(e,"y")),a=n.rAxisID=pe(r.rAxisID,Id(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),d=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&_x(this._data,this),e._stacked&&Po(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ce(n)){const s=this._cachedMeta;this._data=bV(n,s)}else if(r!==n){if(r){_x(r,this);const s=this._cachedMeta;Po(s),s._parsed=[]}n&&Object.isExtensible(n)&&TO(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Td(n.vScale,n),n.stack!==r.stack&&(s=!0,Po(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(Ox(this,n._parsed),n._stacked=Td(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],d,f,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{rt(s[e])?m=this.parseArrayData(r,s,e,n):ce(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);const g=()=>f[a]===null||c&&f[a]<c[a];for(d=0;d<n;++d)r._parsed[d+e]=f=m[d],l&&(g()&&(l=!1),c=f);r._sorted=l}o&&Ox(this,m)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),d=i===o,f=new Array(s);let m,g,x;for(m=0,g=s;m<g;++m)x=m+r,f[m]={[a]:d||i.parse(c[x],x),[l]:o.parse(n[x],x)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,d,f;for(l=0,c=s;l<c;++l)d=l+r,f=n[d],a[l]={x:i.parse(f[0],d),y:o.parse(f[1],d)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let d,f,m,g;for(d=0,f=s;d<f;++d)m=d+r,g=n[m],c[d]={x:i.parse(Ka(g,a),m),y:o.parse(Ka(g,l),m)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:O2(s,!0),values:n._stacks[e.axis]._visualValues};return Dx(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=Dx(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=CV(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=SV(a);let m,g;function x(){g=s[m];const _=g[a.axis];return!rr(g[e.axis])||d>_||f<_}for(m=0;m<o&&!(!x()&&(this.updateRangeFromParsed(c,e,g,l),i));++m);if(i){for(m=o-1;m>=0;--m)if(!x()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],rr(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=wV(pe(this.options.clip,_V(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,i,a,l),d=a;d<a+l;++d){const f=s[d];f.hidden||(f.active&&c?o.push(f):f.draw(e,i))}for(d=0;d<o.length;++d)o[d].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=AV(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=IV(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&vu(r);if(a)return Vx(a,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],m=c.getOptionScopes(this.getDataset(),d),g=Object.keys(Fe.elements[e]),x=()=>this.getContext(r,s,n),_=c.resolveNamedOptions(m,g,x,f);return _.$shared&&(_.$shared=l,i[o]=Object.freeze(Vx(_,l))),_}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,n),m=d.getOptionScopes(this.getDataset(),f);l=d.createResolver(m,this.getContext(e,r,n))}const c=new M2(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Ad(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){Ad(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!Ad(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Po(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}te(fa,"defaults",{}),te(fa,"datasetElementType",null),te(fa,"dataElementType",null);function kV(t,e,n){let r=1,s=1,i=0,o=0;if(e<Ke){const a=t,l=a+e,c=Math.cos(a),d=Math.sin(a),f=Math.cos(l),m=Math.sin(l),g=(b,R,j)=>wu(b,a,l,!0)?1:Math.max(R,R*n,j,j*n),x=(b,R,j)=>wu(b,a,l,!0)?-1:Math.min(R,R*n,j,j*n),_=g(0,c,f),T=g(Je,d,m),w=x(we,c,f),v=x(we+Je,d,m);r=(_-w)/2,s=(T-v)/2,i=-(_+w)/2,o=-(T+v)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class Ho extends fa{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(ce(r[e])){const{key:l="value"}=this._parsing;i=c=>+Ka(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=i(o)}}_getRotation(){return Es(this.options.rotation-90)}_getCircumference(){return Es(this.options.circumference)}_getRotationExtents(){let e=Ke,n=-Ke;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(hO(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:d,rotation:f}=this._getRotationExtents(),{ratioX:m,ratioY:g,offsetX:x,offsetY:_}=kV(f,d,l),T=(r.width-o)/m,w=(r.height-o)/g,v=Math.max(Math.min(T,w)/2,0),b=_2(this.options.radius,v),R=Math.max(b*l,0),j=(b-R)/this._getVisibleDatasetWeightTotal();this.offsetX=x*b,this.offsetY=_*b,s.total=this.calculateTotal(),this.outerRadius=b-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/Ke)}updateElements(e,n,r,s){const i=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,d=(a.left+a.right)/2,f=(a.top+a.bottom)/2,m=i&&c.animateScale,g=m?0:this.innerRadius,x=m?0:this.outerRadius,{sharedOptions:_,includeOptions:T}=this._getSharedOptions(n,s);let w=this._getRotation(),v;for(v=0;v<n;++v)w+=this._circumference(v,i);for(v=n;v<n+r;++v){const b=this._circumference(v,i),R=e[v],j={x:d+this.offsetX,y:f+this.offsetY,startAngle:w,endAngle:w+b,circumference:b,outerRadius:x,innerRadius:g};T&&(j.options=_||this.resolveDataElementOptions(v,R.active?"active":s)),w+=b,this.updateElement(R,v,j,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Ke*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=DO(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,o,a,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(pe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}te(Ho,"id","doughnut"),te(Ho,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),te(Ho,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),te(Ho,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const f=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:f.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:s,pointStyle:r,borderRadius:o&&(a||f.borderRadius),index:c}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class rm extends Ho{}te(rm,"id","pie"),te(rm,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function hs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class fg{constructor(e){te(this,"options");this.options=e||{}}static override(e){Object.assign(fg.prototype,e)}init(){}formats(){return hs()}parse(){return hs()}format(){return hs()}add(){return hs()}diff(){return hs()}startOf(){return hs()}endOf(){return hs()}}var PV={_date:fg};function RV(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?EO:em;if(r){if(s._sharedOptions){const d=i[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const m=c(i,e,n-f),g=c(i,e,n+f);return{lo:m.lo,hi:g.hi}}}}else{const d=c(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:m}=t,g=m.slice(0,d.lo+1).reverse().findIndex(_=>!_t(_[f.axis]));d.lo-=Math.max(0,g);const x=m.slice(d.hi).findIndex(_=>!_t(_[f.axis]));d.hi+=Math.max(0,x)}return d}}return{lo:0,hi:i.length-1}}function ch(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:d}=i[a],{lo:f,hi:m}=RV(i[a],e,o,s);for(let g=f;g<=m;++g){const x=d[g];x.skip||r(x,c,g)}}}function NV(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Cd(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||ch(t,n,e,function(a,l,c){!s&&!C2(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function jV(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:f}=b2(o,{x:e.x,y:e.y});wu(f,c,d)&&s.push({element:o,datasetIndex:a,index:l})}return ch(t,n,e,i),s}function DV(t,e,n,r,s,i){let o=[];const a=NV(n);let l=Number.POSITIVE_INFINITY;function c(d,f,m){const g=d.inRange(e.x,e.y,s);if(r&&!g)return;const x=d.getCenterPoint(s);if(!(!!i||t.isPointInArea(x))&&!g)return;const T=a(e,x);T<l?(o=[{element:d,datasetIndex:f,index:m}],l=T):T===l&&o.push({element:d,datasetIndex:f,index:m})}return ch(t,n,e,c),o}function kd(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?jV(t,e,n,s):DV(t,e,n,r,s,i)}function Lx(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ch(t,n,e,(l,c,d)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var MV={modes:{index(t,e,n,r){const s=ys(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Cd(t,s,i,r,o):kd(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const d=a[0].index,f=c.data[d];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:d})}),l):[]},dataset(t,e,n,r){const s=ys(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Cd(t,s,i,r,o):kd(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(t,e,n,r){const s=ys(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Cd(t,s,i,r,o)},nearest(t,e,n,r){const s=ys(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return kd(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=ys(e,t);return Lx(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=ys(e,t);return Lx(t,s,"y",n.intersect,r)}}};const V2=["left","top","right","bottom"];function Ro(t,e){return t.filter(n=>n.pos===e)}function Fx(t,e){return t.filter(n=>V2.indexOf(n.pos)===-1&&n.box.axis===e)}function No(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function OV(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function VV(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!V2.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function LV(t,e){const n=VV(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=d?d*s:l&&e.availableHeight)}return n}function FV(t){const e=OV(t),n=No(e.filter(c=>c.box.fullSize),!0),r=No(Ro(e,"left"),!0),s=No(Ro(e,"right")),i=No(Ro(e,"top"),!0),o=No(Ro(e,"bottom")),a=Fx(e,"x"),l=Fx(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Ro(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function zx(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function L2(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function zV(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!ce(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&L2(o,i.getPadding());const a=Math.max(0,e.outerWidth-zx(o,t,"left","right")),l=Math.max(0,e.outerHeight-zx(o,t,"top","bottom")),c=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function BV(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function UV(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function qo(t,e,n,r){const s=[];let i,o,a,l,c,d;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,UV(a.horizontal,e));const{same:f,other:m}=zV(e,n,a,r);c|=f&&s.length,d=d||m,l.fullSize||s.push(a)}return c&&qo(s,e,n,r)||d}function ec(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function Bx(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*d,m=c.size||l.height;vu(c.start)&&(o=c.start),l.fullSize?ec(l,s.left,o,n.outerWidth-s.right-s.left,m):ec(l,e.left+c.placed,o,f,m),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*d,m=c.size||l.width;vu(c.start)&&(i=c.start),l.fullSize?ec(l,i,s.top,m,n.outerHeight-s.bottom-s.top):ec(l,i,e.top+c.placed,m,f),c.start=i,c.placed+=f,i=l.right}}e.x=i,e.y=o}var on={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=un(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=FV(t.boxes),l=a.vertical,c=a.horizontal;me(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const d=l.reduce((_,T)=>T.box.options&&T.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),m=Object.assign({},s);L2(m,un(r));const g=Object.assign({maxPadding:m,w:i,h:o,x:s.left,y:s.top},s),x=LV(l.concat(c),f);qo(a.fullSize,g,f,x),qo(l,g,f,x),qo(c,g,f,x)&&qo(l,g,f,x),BV(g),Bx(a.leftAndTop,g,f,x),g.x+=g.w,g.y+=g.h,Bx(a.rightAndBottom,g,f,x),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},me(a.chartArea,_=>{const T=_.box;Object.assign(T,t.chartArea),T.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class F2{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class $V extends F2{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Tc="$chartjs",WV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ux=t=>t===null||t==="";function HV(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Tc]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Ux(s)){const i=Rx(t,"width");i!==void 0&&(t.width=i)}if(Ux(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Rx(t,"height");i!==void 0&&(t.height=i)}return t}const z2=uV?{passive:!0}:!1;function qV(t,e,n){t&&t.addEventListener(e,n,z2)}function KV(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,z2)}function YV(t,e){const n=WV[t.type]||t.type,{x:r,y:s}=ys(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Eu(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function GV(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Eu(a.addedNodes,r),o=o&&!Eu(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function QV(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Eu(a.removedNodes,r),o=o&&!Eu(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Ga=new Map;let $x=0;function B2(){const t=window.devicePixelRatio;t!==$x&&($x=t,Ga.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function XV(t,e){Ga.size||window.addEventListener("resize",B2),Ga.set(t,e)}function JV(t){Ga.delete(t),Ga.size||window.removeEventListener("resize",B2)}function ZV(t,e,n){const r=t.canvas,s=r&&dg(r);if(!s)return;const i=T2((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||i(c,d)});return o.observe(s),XV(t,i),o}function Pd(t,e,n){n&&n.disconnect(),e==="resize"&&JV(t)}function e6(t,e,n){const r=t.canvas,s=T2(i=>{t.ctx!==null&&n(YV(i,t))},t);return qV(r,e,s),s}class t6 extends F2{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(HV(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Tc])return!1;const r=n[Tc].initial;["height","width"].forEach(i=>{const o=r[i];_t(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Tc],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:GV,detach:QV,resize:ZV}[n]||e6;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:Pd,detach:Pd,resize:Pd}[n]||KV)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return cV(e,n,r,s)}isAttached(e){const n=e&&dg(e);return!!(n&&n.isConnected)}}function n6(t){return!hg()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?$V:t6}class Gr{constructor(){te(this,"x");te(this,"y");te(this,"active",!1);te(this,"options");te(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return _u(this.x)&&_u(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}te(Gr,"defaults",{}),te(Gr,"defaultRoutes");function r6(t,e){const n=t.options.ticks,r=s6(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?o6(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return a6(e,c,i,o/s),c;const d=i6(i,e,s);if(o>0){let f,m;const g=o>1?Math.round((l-a)/(o-1)):null;for(tc(e,c,d,_t(g)?0:a-g,a),f=0,m=o-1;f<m;f++)tc(e,c,d,i[f],i[f+1]);return tc(e,c,d,l,_t(g)?e.length:l+g),c}return tc(e,c,d),c}function s6(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function i6(t,e,n){const r=l6(t),s=e.length/n;if(!r)return Math.max(s,1);const i=vO(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function o6(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function a6(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function tc(t,e,n,r,s){const i=pe(r,0),o=Math.min(pe(s,t.length),t.length);let a=0,l,c,d;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),d=i;d<0;)a++,d=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===d&&(e.push(t[c]),a++,d=Math.round(i+a*n))}function l6(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const c6=t=>t==="left"?"right":t==="right"?"left":t,Wx=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Hx=(t,e)=>Math.min(e||t,t);function qx(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function u6(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function h6(t,e){me(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function jo(t){return t.drawTicks?t.tickLength:0}function Kx(t,e){if(!t.display)return 0;const n=xt(t.font,e),r=un(t.padding);return(rt(t.text)?t.text.length:1)*n.lineHeight+r.height}function d6(t,e){return to(t,{scale:e,type:"scale"})}function f6(t,e,n){return to(t,{tick:n,index:e,type:"tick"})}function m6(t,e,n){let r=sg(t);return(n&&e!=="right"||!n&&e==="right")&&(r=c6(r)),r}function p6(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:d}=l;let f=0,m,g,x;const _=o-s,T=a-i;if(t.isHorizontal()){if(g=pt(r,i,a),ce(n)){const w=Object.keys(n)[0],v=n[w];x=d[w].getPixelForValue(v)+_-e}else n==="center"?x=(c.bottom+c.top)/2+_-e:x=Wx(t,n,e);m=a-i}else{if(ce(n)){const w=Object.keys(n)[0],v=n[w];g=d[w].getPixelForValue(v)-T+e}else n==="center"?g=(c.left+c.right)/2-T+e:g=Wx(t,n,e);x=pt(r,o,s),f=n==="left"?-Je:Je}return{titleX:g,titleY:x,maxWidth:m,rotation:f}}class uh extends Gr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Sn(e,Number.POSITIVE_INFINITY),n=Sn(n,Number.NEGATIVE_INFINITY),r=Sn(r,Number.POSITIVE_INFINITY),s=Sn(s,Number.NEGATIVE_INFINITY),{min:Sn(e,r),max:Sn(n,s),minDefined:rr(e),maxDefined:rr(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Sn(n,Sn(r,n)),max:Sn(r,Sn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ie(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=YO(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?qx(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=r6(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ie(this.options.afterUpdate,[this])}beforeSetDimensions(){Ie(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ie(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ie(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ie(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Ie(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Ie(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ie(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Hx(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),f=d.widest.width,m=d.highest.height,g=sn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),f+6>a&&(a=g/(r-(e.offset?.5:1)),l=this.maxHeight-jo(e.grid)-n.padding-Kx(e.title,this.chart.options.font),c=Math.sqrt(f*f+m*m),o=_O(Math.min(Math.asin(sn((d.highest.height+6)/a,-1,1)),Math.asin(sn(l/c,-1,1))-Math.asin(sn(m/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ie(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ie(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Kx(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=jo(i)+l):(e.height=this.maxHeight,e.width=jo(i)+l),r.display&&this.ticks.length){const{first:c,last:d,widest:f,highest:m}=this._getLabelSizes(),g=r.padding*2,x=Es(this.labelRotation),_=Math.cos(x),T=Math.sin(x);if(a){const w=r.mirror?0:T*f.width+_*m.height;e.height=Math.min(this.maxHeight,e.height+w+g)}else{const w=r.mirror?0:_*f.width+T*m.height;e.width=Math.min(this.maxWidth,e.width+w+g)}this._calculatePadding(c,d,T,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,g=0;l?c?(m=s*e.width,g=r*n.height):(m=r*e.height,g=s*n.width):i==="start"?g=n.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,g=n.width/2),this.paddingLeft=Math.max((m-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((g-f+o)*this.width/(this.width-f),0)}else{let d=n.height/2,f=e.height/2;i==="start"?(d=0,f=e.height):i==="end"&&(d=n.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ie(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)_t(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=qx(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/Hx(n,r));let c=0,d=0,f,m,g,x,_,T,w,v,b,R,j;for(f=0;f<n;f+=l){if(x=e[f].label,_=this._resolveTickFontOptions(f),s.font=T=_.string,w=i[T]=i[T]||{data:{},gc:[]},v=_.lineHeight,b=R=0,!_t(x)&&!rt(x))b=Tx(s,w.data,w.gc,b,x),R=v;else if(rt(x))for(m=0,g=x.length;m<g;++m)j=x[m],!_t(j)&&!rt(j)&&(b=Tx(s,w.data,w.gc,b,j),R+=v);o.push(b),a.push(R),c=Math.max(b,c),d=Math.max(R,d)}h6(i,n);const V=o.indexOf(c),I=a.indexOf(d),S=E=>({width:o[E]||0,height:a[E]||0});return{first:S(0),last:S(n-1),widest:S(V),highest:S(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return bO(this._alignToPixels?us(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=f6(this.getContext(),e,r))}return this.$context||(this.$context=d6(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Es(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=jo(i),g=[],x=a.setContext(this.getContext()),_=x.display?x.width:0,T=_/2,w=function(ue){return us(r,ue,_)};let v,b,R,j,V,I,S,E,k,P,N,C;if(o==="top")v=w(this.bottom),I=this.bottom-m,E=v-T,P=w(e.top)+T,C=e.bottom;else if(o==="bottom")v=w(this.top),P=e.top,C=w(e.bottom)-T,I=v+T,E=this.top+m;else if(o==="left")v=w(this.right),V=this.right-m,S=v-T,k=w(e.left)+T,N=e.right;else if(o==="right")v=w(this.left),k=e.left,N=w(e.right)-T,V=v+T,S=this.left+m;else if(n==="x"){if(o==="center")v=w((e.top+e.bottom)/2+.5);else if(ce(o)){const ue=Object.keys(o)[0],xe=o[ue];v=w(this.chart.scales[ue].getPixelForValue(xe))}P=e.top,C=e.bottom,I=v+T,E=I+m}else if(n==="y"){if(o==="center")v=w((e.left+e.right)/2);else if(ce(o)){const ue=Object.keys(o)[0],xe=o[ue];v=w(this.chart.scales[ue].getPixelForValue(xe))}V=v-T,S=V-m,k=e.left,N=e.right}const J=pe(s.ticks.maxTicksLimit,f),Z=Math.max(1,Math.ceil(f/J));for(b=0;b<f;b+=Z){const ue=this.getContext(b),xe=i.setContext(ue),B=a.setContext(ue),q=xe.lineWidth,G=xe.color,de=B.dash||[],ve=B.dashOffset,zt=xe.tickWidth,Be=xe.tickColor,Bt=xe.tickBorderDash||[],Ye=xe.tickBorderDashOffset;R=u6(this,b,l),R!==void 0&&(j=us(r,R,q),c?V=S=k=N=j:I=E=P=C=j,g.push({tx1:V,ty1:I,tx2:S,ty2:E,x1:k,y1:P,x2:N,y2:C,width:q,color:G,borderDash:de,borderDashOffset:ve,tickWidth:zt,tickColor:Be,tickBorderDash:Bt,tickBorderDashOffset:Ye}))}return this._ticksLength=f,this._borderValue=v,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:f}=i,m=jo(r.grid),g=m+d,x=f?-d:g,_=-Es(this.labelRotation),T=[];let w,v,b,R,j,V,I,S,E,k,P,N,C="middle";if(s==="top")V=this.bottom-x,I=this._getXAxisLabelAlignment();else if(s==="bottom")V=this.top+x,I=this._getXAxisLabelAlignment();else if(s==="left"){const Z=this._getYAxisLabelAlignment(m);I=Z.textAlign,j=Z.x}else if(s==="right"){const Z=this._getYAxisLabelAlignment(m);I=Z.textAlign,j=Z.x}else if(n==="x"){if(s==="center")V=(e.top+e.bottom)/2+g;else if(ce(s)){const Z=Object.keys(s)[0],ue=s[Z];V=this.chart.scales[Z].getPixelForValue(ue)+g}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")j=(e.left+e.right)/2-g;else if(ce(s)){const Z=Object.keys(s)[0],ue=s[Z];j=this.chart.scales[Z].getPixelForValue(ue)}I=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?C="top":l==="end"&&(C="bottom"));const J=this._getLabelSizes();for(w=0,v=a.length;w<v;++w){b=a[w],R=b.label;const Z=i.setContext(this.getContext(w));S=this.getPixelForTick(w)+i.labelOffset,E=this._resolveTickFontOptions(w),k=E.lineHeight,P=rt(R)?R.length:1;const ue=P/2,xe=Z.color,B=Z.textStrokeColor,q=Z.textStrokeWidth;let G=I;o?(j=S,I==="inner"&&(w===v-1?G=this.options.reverse?"left":"right":w===0?G=this.options.reverse?"right":"left":G="center"),s==="top"?c==="near"||_!==0?N=-P*k+k/2:c==="center"?N=-J.highest.height/2-ue*k+k:N=-J.highest.height+k/2:c==="near"||_!==0?N=k/2:c==="center"?N=J.highest.height/2-ue*k:N=J.highest.height-P*k,f&&(N*=-1),_!==0&&!Z.showLabelBackdrop&&(j+=k/2*Math.sin(_))):(V=S,N=(1-P)*k/2);let de;if(Z.showLabelBackdrop){const ve=un(Z.backdropPadding),zt=J.heights[w],Be=J.widths[w];let Bt=N-ve.top,Ye=0-ve.left;switch(C){case"middle":Bt-=zt/2;break;case"bottom":Bt-=zt;break}switch(I){case"center":Ye-=Be/2;break;case"right":Ye-=Be;break;case"inner":w===v-1?Ye-=Be:w>0&&(Ye-=Be/2);break}de={left:Ye,top:Bt,width:Be+ve.width,height:zt+ve.height,color:Z.backdropColor}}T.push({label:R,font:E,textOffset:N,options:{rotation:_,color:xe,strokeColor:B,strokeWidth:q,textAlign:G,textBaseline:C,translation:[j,V],backdrop:de}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Es(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,d;return n==="left"?s?(d=this.right+i,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d=this.left)):n==="right"?s?(d=this.left+i,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,f,m;this.isHorizontal()?(c=us(e,this.left,o)-o/2,d=us(e,this.right,a)+a/2,f=m=l):(f=us(e,this.top,o)-o/2,m=us(e,this.bottom,a)+a/2,c=d=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,f),n.lineTo(d,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&ig(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,d=o.textOffset;Ya(r,c,0,d,l,a)}s&&og(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=xt(r.font),o=un(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||ce(n)?(l+=o.bottom,rt(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:d,maxWidth:f,rotation:m}=p6(this,l,n,a);Ya(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:m,textAlign:m6(a,n,s),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=pe(e.grid&&e.grid.z,-1),s=pe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==uh.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return xt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class nc{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;v6(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,g6(e,o,r),this.override&&Fe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in Fe[s]&&(delete Fe[s][r],this.override&&delete Fs[r])}}function g6(t,e,n){const r=qa(Object.create(null),[n?Fe.get(n):{},Fe.get(e),t.defaults]);Fe.set(e,r),t.defaultRoutes&&y6(e,t.defaultRoutes),t.descriptors&&Fe.describe(e,t.descriptors)}function y6(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Fe.route(i,s,l,a)})}function v6(t){return"id"in t&&"defaults"in t}class x6{constructor(){this.controllers=new nc(fa,"datasets",!0),this.elements=new nc(Gr,"elements"),this.plugins=new nc(Object,"plugins"),this.scales=new nc(uh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):me(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=ng(e);Ie(r["before"+s],[],r),n[e](r),Ie(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var An=new x6;class _6{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Ie(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){_t(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=pe(r.options&&r.options.plugins,{}),i=w6(r);return s===!1&&!n?[]:E6(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function w6(t){const e={},n=[],r=Object.keys(An.plugins.items);for(let i=0;i<r.length;i++)n.push(An.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function b6(t,e){return!e&&t===!1?null:t===!0?{}:t}function E6(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=b6(r[l],s);c!==null&&i.push({plugin:a,options:S6(t.config,{plugin:a,local:n[l]},c,o)})}return i}function S6(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sm(t,e){const n=Fe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function T6(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function I6(t,e){return t===e?"_index_":"_value_"}function Yx(t){if(t==="x"||t==="y"||t==="r")return t}function A6(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function im(t,...e){if(Yx(t))return t;for(const n of e){const r=n.axis||A6(n.position)||t.length>1&&Yx(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Gx(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function C6(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Gx(t,"x",n[0])||Gx(t,"y",n[0])}return{}}function k6(t,e){const n=Fs[t.type]||{scales:{}},r=e.scales||{},s=sm(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ce(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=im(o,a,C6(o,t),Fe.scales[a.type]),c=I6(l,s),d=n.scales||{};i[o]=ca(Object.create(null),[{axis:l},a,d[l],d[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||sm(a,e),d=(Fs[a]||{}).scales||{};Object.keys(d).forEach(f=>{const m=T6(f,l),g=o[m+"AxisID"]||m;i[g]=i[g]||Object.create(null),ca(i[g],[{axis:m},r[g],d[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];ca(a,[Fe.scales[a.type],Fe.scale])}),i}function U2(t){const e=t.options||(t.options={});e.plugins=pe(e.plugins,{}),e.scales=k6(t,e)}function $2(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function P6(t){return t=t||{},t.data=$2(t.data),U2(t),t}const Qx=new Map,W2=new Set;function rc(t,e){let n=Qx.get(t);return n||(n=e(),Qx.set(t,n),W2.add(n)),n}const Do=(t,e,n)=>{const r=Ka(e,n);r!==void 0&&t.add(r)};class R6{constructor(e){this._config=P6(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=$2(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),U2(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return rc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return rc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return rc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return rc(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(f=>Do(l,e,f))),d.forEach(f=>Do(l,s,f)),d.forEach(f=>Do(l,Fs[i]||{},f)),d.forEach(f=>Do(l,Fe,f)),d.forEach(f=>Do(l,tm,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),W2.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Fs[n]||{},Fe.datasets[n]||{},{type:n},Fe,tm]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Xx(this._resolverCache,e,s);let l=o;if(j6(o,n)){i.$shared=!1,r=Yr(r)?r():r;const c=this.createResolver(e,r,a);l=Ui(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Xx(this._resolverCache,e,r);return ce(n)?Ui(i,n,void 0,s):i}}function Xx(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:lg(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const N6=t=>ce(t)&&Object.getOwnPropertyNames(t).some(e=>Yr(t[e]));function j6(t,e){const{isScriptable:n,isIndexable:r}=k2(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(Yr(a)||N6(a))||o&&rt(a))return!0}return!1}var D6="4.5.1";const M6=["top","bottom","left","right","chartArea"];function Jx(t,e){return t==="top"||t==="bottom"||M6.indexOf(t)===-1&&e==="x"}function Zx(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function e_(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ie(n&&n.onComplete,[t],e)}function O6(t){const e=t.chart,n=e.options.animation;Ie(n&&n.onProgress,[t],e)}function H2(t){return hg()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ic={},t_=t=>{const e=H2(t);return Object.values(Ic).filter(n=>n.canvas===e).pop()};function V6(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function L6(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var mr;let hh=(mr=class{static register(...e){An.add(...e),n_()}static unregister(...e){An.remove(...e),n_()}constructor(e,n){const r=this.config=new R6(n),s=H2(e),i=t_(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||n6(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;if(this.id=uO(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _6,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=AO(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Ic[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Bn.listen(this,"complete",e_),Bn.listen(this,"progress",O6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return _t(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return An}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Px(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ix(this.canvas,this.ctx),this}stop(){return Bn.stop(this),this}resize(e,n){Bn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Px(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ie(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};me(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=im(o,a),c=l==="r",d=l==="x";return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),me(i,o=>{const a=o.options,l=a.id,c=im(l,a),d=pe(a.type,o.dtype);(a.position===void 0||Jx(a.position,c)!==Jx(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===d)f=r[l];else{const m=An.getScale(d);f=new m({id:l,type:d,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),me(s,(o,a)=>{o||delete r[a]}),me(r,o=>{on.configure(this,o,o.options),on.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Zx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||sm(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=An.getController(a),{datasetElementType:c,dataElementType:d}=Fe.datasets[a];Object.assign(l,{dataElementType:An.getElement(d),datasetElementType:c&&An.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){me(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:f}=this.getDatasetMeta(c),m=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(m),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||me(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Zx("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){me(this.scales,e=>{on.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!yx(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;V6(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!yx(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;on.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],me(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Yr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Bn.has(this)?this.attached&&!Bn.running(this)&&Bn.start(this):(this.draw(),e_({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=mV(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&ig(n,s),e.controller.draw(),s&&og(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return C2(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=MV.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=to(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);vu(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Bn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ix(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ic[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};me(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){me(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},me(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!gu(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(d=>!c.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=gO(e),c=L6(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Ie(i.onHover,[e,a,this],this),l&&Ie(i.onClick,[e,a,this],this));const d=!gu(a,s);return(d||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,d}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},te(mr,"defaults",Fe),te(mr,"instances",Ic),te(mr,"overrides",Fs),te(mr,"registry",An),te(mr,"version",D6),te(mr,"getChart",t_),mr);function n_(){return me(hh.instances,t=>t._plugins.invalidate())}function F6(t,e,n){const{startAngle:r,x:s,y:i,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:d}=l,f=Math.min(c/o,kn(r-n));if(t.beginPath(),t.arc(s,i,o-c/2,r+f/2,n-f/2),a>0){const m=Math.min(c/a,kn(r-n));t.arc(s,i,a+c/2,n-m/2,r+m/2,!0)}else{const m=Math.min(c/2,o*kn(r-n));if(d==="round")t.arc(s,i,m,n-we/2,r+we/2,!0);else if(d==="bevel"){const g=2*m*m,x=-g*Math.cos(n+we/2)+s,_=-g*Math.sin(n+we/2)+i,T=g*Math.cos(r+we/2)+s,w=g*Math.sin(r+we/2)+i;t.lineTo(x,_),t.lineTo(T,w)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function z6(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(i,o,a,r-c,n+c),l>s?(c=s/l,t.arc(i,o,l,n+c,r-c,!0)):t.arc(i,o,s,n+Je,r-Je),t.closePath(),t.clip()}function B6(t){return ag(t,["outerStart","outerEnd","innerStart","innerEnd"])}function U6(t,e,n,r){const s=B6(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,r*e/2),a=l=>{const c=(n-Math.min(i,l))*r/2;return sn(l,0,Math.min(i,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:sn(s.innerStart,0,o),innerEnd:sn(s.innerEnd,0,o)}}function Zs(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Su(t,e,n,r,s,i){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=e,f=Math.max(e.outerRadius+r+n-c,0),m=d>0?d+r+n+c:0;let g=0;const x=s-l;if(r){const Z=d>0?d-r:0,ue=f>0?f-r:0,xe=(Z+ue)/2,B=xe!==0?x*xe/(xe+r):x;g=(x-B)/2}const _=Math.max(.001,x*f-n/we)/f,T=(x-_)/2,w=l+T+g,v=s-T-g,{outerStart:b,outerEnd:R,innerStart:j,innerEnd:V}=U6(e,m,f,v-w),I=f-b,S=f-R,E=w+b/I,k=v-R/S,P=m+j,N=m+V,C=w+j/P,J=v-V/N;if(t.beginPath(),i){const Z=(E+k)/2;if(t.arc(o,a,f,E,Z),t.arc(o,a,f,Z,k),R>0){const q=Zs(S,k,o,a);t.arc(q.x,q.y,R,k,v+Je)}const ue=Zs(N,v,o,a);if(t.lineTo(ue.x,ue.y),V>0){const q=Zs(N,J,o,a);t.arc(q.x,q.y,V,v+Je,J+Math.PI)}const xe=(v-V/m+(w+j/m))/2;if(t.arc(o,a,m,v-V/m,xe,!0),t.arc(o,a,m,xe,w+j/m,!0),j>0){const q=Zs(P,C,o,a);t.arc(q.x,q.y,j,C+Math.PI,w-Je)}const B=Zs(I,w,o,a);if(t.lineTo(B.x,B.y),b>0){const q=Zs(I,E,o,a);t.arc(q.x,q.y,b,w-Je,E)}}else{t.moveTo(o,a);const Z=Math.cos(E)*f+o,ue=Math.sin(E)*f+a;t.lineTo(Z,ue);const xe=Math.cos(k)*f+o,B=Math.sin(k)*f+a;t.lineTo(xe,B)}t.closePath()}function $6(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){Su(t,e,n,r,l,s);for(let c=0;c<i;++c)t.fill();isNaN(a)||(l=o+(a%Ke||Ke))}return Su(t,e,n,r,l,s),t.fill(),l}function W6(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:d,borderDash:f,borderDashOffset:m,borderRadius:g}=l,x=l.borderAlign==="inner";if(!c)return;t.setLineDash(f||[]),t.lineDashOffset=m,x?(t.lineWidth=c*2,t.lineJoin=d||"round"):(t.lineWidth=c,t.lineJoin=d||"bevel");let _=e.endAngle;if(i){Su(t,e,n,r,_,s);for(let T=0;T<i;++T)t.stroke();isNaN(a)||(_=o+(a%Ke||Ke))}x&&z6(t,e,_),l.selfJoin&&_-o>=we&&g===0&&d!=="miter"&&F6(t,e,_),i||(Su(t,e,n,r,_,s),t.stroke())}class Ko extends Gr{constructor(n){super();te(this,"circumference");te(this,"endAngle");te(this,"fullCircles");te(this,"innerRadius");te(this,"outerRadius");te(this,"pixelMargin");te(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:o,distance:a}=b2(i,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:f,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),g=(this.options.spacing+this.options.borderWidth)/2,x=pe(m,c-l),_=wu(o,l,c)&&l!==c,T=x>=Ke||_,w=Wo(a,d+g,f+g);return T&&w}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:d}=this.options,f=(i+o)/2,m=(a+l+d+c)/2;return{x:r+Math.cos(f)*m,y:s+Math.sin(f)*m}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>Ke?Math.floor(s/Ke):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(we,s||0)),d=i*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,$6(n,this,d,o,a),W6(n,this,d,o,a),n.restore()}}te(Ko,"id","arc"),te(Ko,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),te(Ko,"defaultRoutes",{backgroundColor:"backgroundColor"}),te(Ko,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});const r_=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},H6=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class s_ extends Gr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ie(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=xt(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=r_(r,i);let c,d;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,i,a,l)+10):(d=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let m=-1,g=-d;return this.legendItems.forEach((x,_)=>{const T=r+n/2+i.measureText(x.text).width;(_===0||c[c.length-1]+T+2*a>o)&&(f+=d,c[c.length-(_>0?0:1)]=0,g+=d,m++),l[_]={left:0,top:g,row:m,width:T,height:s},c[c.length-1]+=T+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-e;let f=a,m=0,g=0,x=0,_=0;return this.legendItems.forEach((T,w)=>{const{itemWidth:v,itemHeight:b}=q6(r,n,i,T,s);w>0&&g+b+2*a>d&&(f+=m+a,c.push({width:m,height:g}),x+=m+a,_++,m=g=0),l[w]={left:x,top:g,col:_,width:v,height:b},m=Math.max(m,v),g+=b+a}),f+=m,c.push({width:m,height:g}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Ii(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=pt(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=pt(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=pt(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=pt(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ig(e,this),this._draw(),og(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=Fe.color,l=Ii(e.rtl,this.left,this.width),c=xt(o.font),{padding:d}=o,f=c.size,m=f/2;let g;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:x,boxHeight:_,itemHeight:T}=r_(o,f),w=function(V,I,S){if(isNaN(x)||x<=0||isNaN(_)||_<0)return;s.save();const E=pe(S.lineWidth,1);if(s.fillStyle=pe(S.fillStyle,a),s.lineCap=pe(S.lineCap,"butt"),s.lineDashOffset=pe(S.lineDashOffset,0),s.lineJoin=pe(S.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=pe(S.strokeStyle,a),s.setLineDash(pe(S.lineDash,[])),o.usePointStyle){const k={radius:_*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:E},P=l.xPlus(V,x/2),N=I+m;A2(s,k,P,N,o.pointStyleWidth&&x)}else{const k=I+Math.max((f-_)/2,0),P=l.leftForLtr(V,x),N=da(S.borderRadius);s.beginPath(),Object.values(N).some(C=>C!==0)?nm(s,{x:P,y:k,w:x,h:_,radius:N}):s.rect(P,k,x,_),s.fill(),E!==0&&s.stroke()}s.restore()},v=function(V,I,S){Ya(s,S.text,V,I+T/2,c,{strikethrough:S.hidden,textAlign:l.textAlign(S.textAlign)})},b=this.isHorizontal(),R=this._computeTitleHeight();b?g={x:pt(i,this.left+d,this.right-r[0]),y:this.top+d+R,line:0}:g={x:this.left+d,y:pt(i,this.top+R+d,this.bottom-n[0].height),line:0},j2(this.ctx,e.textDirection);const j=T+d;this.legendItems.forEach((V,I)=>{s.strokeStyle=V.fontColor,s.fillStyle=V.fontColor;const S=s.measureText(V.text).width,E=l.textAlign(V.textAlign||(V.textAlign=o.textAlign)),k=x+m+S;let P=g.x,N=g.y;l.setWidth(this.width),b?I>0&&P+k+d>this.right&&(N=g.y+=j,g.line++,P=g.x=pt(i,this.left+d,this.right-r[g.line])):I>0&&N+j>this.bottom&&(P=g.x=P+n[g.line].width+d,g.line++,N=g.y=pt(i,this.top+R+d,this.bottom-n[g.line].height));const C=l.x(P);if(w(C,N,V),P=CO(E,P+x+m,b?P+k:this.right,e.rtl),v(l.x(P),N,V),b)g.x+=k+d;else if(typeof V.text!="string"){const J=c.lineHeight;g.y+=q2(V,J)+d}else g.y+=j}),D2(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=xt(n.font),s=un(n.padding);if(!n.display)return;const i=Ii(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let d,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),d=this.top+c,f=pt(e.align,f,this.right-m);else{const x=this.columnSizes.reduce((_,T)=>Math.max(_,T.height),0);d=c+pt(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const g=pt(a,f,f+m);o.textAlign=i.textAlign(sg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Ya(o,n.text,g,d,r)}_computeTitleHeight(){const e=this.options.title,n=xt(e.font),r=un(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Wo(e,this.left,this.right)&&Wo(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Wo(e,s.left,s.left+s.width)&&Wo(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!G6(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=H6(s,r);s&&!i&&Ie(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Ie(n.onHover,[e,r,this],this)}else r&&Ie(n.onClick,[e,r,this],this)}}function q6(t,e,n,r,s){const i=K6(r,t,e,n),o=Y6(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function K6(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function Y6(t,e,n){let r=t;return typeof e.text!="string"&&(r=q2(e,n)),r}function q2(t,e){const n=t.text?t.text.length:0;return e*n}function G6(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Q6={id:"legend",_element:s_,start(t,e,n){const r=t.legend=new s_({ctx:t.ctx,options:n,chart:t});on.configure(t,r,n),on.addBox(t,r)},stop(t){on.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;on.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),d=un(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class K2 extends Gr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=rt(r.text)?r.text.length:1;this._padding=un(r.padding);const i=s*xt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,d,f;return this.isHorizontal()?(d=pt(a,r,i),f=n+e,c=i-r):(o.position==="left"?(d=r+e,f=pt(a,s,n),l=we*-.5):(d=i-e,f=pt(a,n,s),l=we*.5),c=s-n),{titleX:d,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=xt(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Ya(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:sg(n.align),textBaseline:"middle",translation:[o,a]})}}function X6(t,e){const n=new K2({ctx:t.ctx,options:e,chart:t});on.configure(t,n,e),on.addBox(t,n),t.titleBlock=n}var J6={id:"title",_element:K2,start(t,e,n){X6(t,n)},stop(t){const e=t.titleBlock;on.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;on.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Yo={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=wO(e,c);d<s&&(s=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Tn(t,e){return e&&(rt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Un(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Z6(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function i_(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=xt(e.bodyFont),c=xt(e.titleFont),d=xt(e.footerFont),f=i.length,m=s.length,g=r.length,x=un(e.padding);let _=x.height,T=0,w=r.reduce((R,j)=>R+j.before.length+j.lines.length+j.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),w){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=g*R+(w-g)*l.lineHeight+(w-1)*e.bodySpacing}m&&(_+=e.footerMarginTop+m*d.lineHeight+(m-1)*e.footerSpacing);let v=0;const b=function(R){T=Math.max(T,n.measureText(R).width+v)};return n.save(),n.font=c.string,me(t.title,b),n.font=l.string,me(t.beforeBody.concat(t.afterBody),b),v=e.displayColors?o+2+e.boxPadding:0,me(r,R=>{me(R.before,b),me(R.lines,b),me(R.after,b)}),v=0,n.font=d.string,me(t.footer,b),n.restore(),T+=x.width,{width:T,height:_}}function eL(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function tL(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function nL(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),tL(c,t,e,n)&&(c="center"),c}function o_(t,e,n){const r=n.yAlign||e.yAlign||eL(t,n);return{xAlign:n.xAlign||e.xAlign||nL(t,e,n,r),yAlign:r}}function rL(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function sL(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function a_(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:g}=da(o);let x=rL(e,a);const _=sL(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(d,m)+s:a==="right"&&(x+=Math.max(f,g)+s),{x:sn(x,0,r.width-e.width),y:sn(_,0,r.height-e.height)}}function sc(t,e,n){const r=un(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function l_(t){return Tn([],Un(t))}function iL(t,e,n){return to(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function c_(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Y2={beforeTitle:zn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:zn,beforeBody:zn,beforeLabel:zn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _t(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:zn,afterBody:zn,beforeFooter:zn,footer:zn,afterFooter:zn};function Pt(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?Y2[e].call(n,r):s}class om extends Gr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new M2(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=iL(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Pt(r,"beforeTitle",this,e),i=Pt(r,"title",this,e),o=Pt(r,"afterTitle",this,e);let a=[];return a=Tn(a,Un(s)),a=Tn(a,Un(i)),a=Tn(a,Un(o)),a}getBeforeBody(e,n){return l_(Pt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return me(e,i=>{const o={before:[],lines:[],after:[]},a=c_(r,i);Tn(o.before,Un(Pt(a,"beforeLabel",this,i))),Tn(o.lines,Pt(a,"label",this,i)),Tn(o.after,Un(Pt(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return l_(Pt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Pt(r,"beforeFooter",this,e),i=Pt(r,"footer",this,e),o=Pt(r,"afterFooter",this,e);let a=[];return a=Tn(a,Un(s)),a=Tn(a,Un(i)),a=Tn(a,Un(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Z6(this.chart,n[l]));return e.filter&&(a=a.filter((d,f,m)=>e.filter(d,f,m,r))),e.itemSort&&(a=a.sort((d,f)=>e.itemSort(d,f,r))),me(a,d=>{const f=c_(e.callbacks,d);s.push(Pt(f,"labelColor",this,d)),i.push(Pt(f,"labelPointStyle",this,d)),o.push(Pt(f,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Yo[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=i_(this,r),c=Object.assign({},a,l),d=o_(this.chart,r,c),f=a_(r,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:f}=da(a),{x:m,y:g}=e,{width:x,height:_}=n;let T,w,v,b,R,j;return i==="center"?(R=g+_/2,s==="left"?(T=m,w=T-o,b=R+o,j=R-o):(T=m+x,w=T+o,b=R-o,j=R+o),v=T):(s==="left"?w=m+Math.max(l,d)+o:s==="right"?w=m+x-Math.max(c,f)-o:w=this.caretX,i==="top"?(b=g,R=b-o,T=w-o,v=w+o):(b=g+_,R=b+o,T=w+o,v=w-o),j=b),{x1:T,x2:w,x3:v,y1:b,y2:R,y3:j}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=Ii(r.rtl,this.x,this.width);for(e.x=sc(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=xt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,d=xt(i.bodyFont),f=sc(this,"left",i),m=s.x(f),g=l<d.lineHeight?(d.lineHeight-l)/2:0,x=n.y+g;if(i.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=s.leftForLtr(m,c)+c/2,w=x+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Ax(e,_,T,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Ax(e,_,T,w)}else{e.lineWidth=ce(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=s.leftForLtr(m,c),T=s.leftForLtr(s.xPlus(m,1),c-2),w=da(o.borderRadius);Object.values(w).some(v=>v!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,nm(e,{x:_,y:x,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),nm(e,{x:T,y:x+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(_,x,c,l),e.strokeRect(_,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:d}=r,f=xt(r.bodyFont);let m=f.lineHeight,g=0;const x=Ii(r.rtl,this.x,this.width),_=function(S){n.fillText(S,x.x(e.x+g),e.y+m/2),e.y+=m+i},T=x.textAlign(o);let w,v,b,R,j,V,I;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=sc(this,T,r),n.fillStyle=r.bodyColor,me(this.beforeBody,_),g=a&&T!=="right"?o==="center"?c/2+d:c+2+d:0,R=0,V=s.length;R<V;++R){for(w=s[R],v=this.labelTextColors[R],n.fillStyle=v,me(w.before,_),b=w.lines,a&&b.length&&(this._drawColorBox(n,e,R,x,r),m=Math.max(f.lineHeight,l)),j=0,I=b.length;j<I;++j)_(b[j]),m=f.lineHeight;me(w.after,_)}g=0,m=f.lineHeight,me(this.afterBody,_),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Ii(r.rtl,this.x,this.width);for(e.x=sc(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=xt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:d}=r,{topLeft:f,topRight:m,bottomLeft:g,bottomRight:x}=da(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-m,l),n.quadraticCurveTo(a+c,l,a+c,l+m),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+d-x),n.quadraticCurveTo(a+c,l+d,a+c-x,l+d),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+g,l+d),n.quadraticCurveTo(a,l+d,a,l+d-g),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Yo[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=i_(this,e),l=Object.assign({},o,this._size),c=o_(n,e,l),d=a_(e,l,c,n);(s._to!==d.x||i._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=un(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),j2(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),D2(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!gu(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!gu(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Yo[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}te(om,"positioners",Yo);var oL={id:"tooltip",_element:om,positioners:Yo,afterInit(t,e,n){n&&(t.tooltip=new om({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Y2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const dh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Mt=Object.keys(dh);function u_(t,e){return t-e}function h_(t,e){if(_t(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),rr(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(_u(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function d_(t,e,n,r){const s=Mt.length;for(let i=Mt.indexOf(t);i<s-1;++i){const o=dh[Mt[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Mt[i]}return Mt[s-1]}function aL(t,e,n,r,s){for(let i=Mt.length-1;i>=Mt.indexOf(n);i--){const o=Mt[i];if(dh[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return Mt[n?Mt.indexOf(n):0]}function lL(t){for(let e=Mt.indexOf(t)+1,n=Mt.length;e<n;++e)if(dh[Mt[e]].common)return Mt[e]}function f_(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=rg(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function cL(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function m_(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:cL(t,r,s,n)}class Tu extends uh{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new PV._date(e.adapters.date);s.init(n),ca(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:h_(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=rr(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=rr(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=SO(s,i,o);return this._unit=n.unit||(r.autoSkip?d_(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):aL(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:lL(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),m_(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=sn(n,0,o),r=sn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||d_(i.minUnit,n,r,this._getLabelCapacity(n)),a=pe(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=_u(l)||l===!0,d={};let f=n,m,g;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=s.ticks.source==="data"&&this.getDataTimestamps();for(m=f,g=0;m<r;m=+e.add(m,a,o),g++)f_(d,m,x);return(m===r||s.bounds==="ticks"||g===1)&&f_(d,m,x),Object.keys(d).sort(u_).map(_=>+_)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Ie(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&a[l],f=c&&a[c],m=r[n],g=c&&f&&m&&m.major;return this._adapter.format(e,s||(g?f:d))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Es(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,m_(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(h_(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return IO(e.sort(u_))}}te(Tu,"id","time"),te(Tu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ic(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=em(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=em(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class p_ extends Tu{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=ic(n,this.min),this._tableRange=ic(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,d;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)d=s[o+1],l=s[o-1],c=s[o],Math.round((d+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(ic(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return ic(this._table,r*this._tableRange+this._minPos,!0)}}te(p_,"id","timeseries"),te(p_,"defaults",Tu.defaults);const G2="label";function g_(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function uL(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Q2(t,e){t.labels=e}function X2(t,e,n=G2){const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function hL(t,e=G2){const n={labels:[],datasets:[]};return Q2(n,t.labels),X2(n,t.datasets,e),n}function dL(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:d,updateMode:f,...m}=t,g=M.useRef(null),x=M.useRef(null),_=()=>{g.current&&(x.current=new hh(g.current,{type:o,data:hL(a,i),options:l&&{...l},plugins:c}),g_(e,x.current))},T=()=>{g_(e,null),x.current&&(x.current.destroy(),x.current=null)};return M.useEffect(()=>{!s&&x.current&&l&&uL(x.current,l)},[s,l]),M.useEffect(()=>{!s&&x.current&&Q2(x.current.config.data,a.labels)},[s,a.labels]),M.useEffect(()=>{!s&&x.current&&a.datasets&&X2(x.current.config.data,a.datasets,i)},[s,a.datasets]),M.useEffect(()=>{x.current&&(s?(T(),setTimeout(_)):x.current.update(f))},[s,l,a.labels,a.datasets,f]),M.useEffect(()=>{x.current&&(T(),setTimeout(_))},[o]),M.useEffect(()=>(_(),()=>T()),[]),h.jsx("canvas",{ref:g,role:"img",height:n,width:r,...m,children:d})}const fL=M.forwardRef(dL);function mL(t,e){return hh.register(e),M.forwardRef((n,r)=>h.jsx(fL,{...n,ref:r,type:t}))}const pL=mL("pie",rm);hh.register(Ko,oL,Q6,J6);const gL=({data:t,title:e="Issues by Category"})=>{const n=M.useRef(null),r={labels:t.map(i=>i.name),datasets:[{data:t.map(i=>i.count),backgroundColor:["#EF4444","#F59E0B","#10B981","#06B6D4","#8B5CF6"],borderColor:["#DC2626","#D97706","#059669","#0891B2","#7C3AED"],borderWidth:2,hoverBackgroundColor:["#F87171","#FBBF24","#34D399","#22D3EE","#A78BFA"],hoverBorderWidth:3}]},s={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:function(i){const o=i.dataset.data.reduce((l,c)=>l+c,0),a=(i.parsed/o*100).toFixed(1);return`${i.label}: ${i.parsed} (${a}%)`}}}},animation:{animateRotate:!0,animateScale:!1,duration:800,easing:"easeInOutQuart"},elements:{arc:{borderRadius:4}}};return M.useEffect(()=>{if(n.current){const i=n.current;i.data=r,i.update("active")}},[t]),h.jsx("div",{className:"w-full h-full",children:h.jsx("div",{className:"h-64 relative",children:h.jsx(pL,{ref:n,data:r,options:s})})})},yL=()=>{const{filterAdminIssues:t,hasActiveSearch:e,debouncedSearchTerm:n}=Qp(),{getAdminIssues:r,updateIssueStatus:s,getIssueStats:i,loading:o,error:a}=cl(),[l,c]=M.useState(!1),[d,f]=M.useState(!0),[m,g]=M.useState("All"),[x,_]=M.useState(new Set),[T,w]=M.useState("Month"),v=r(),b=i(),R=[{label:"Total Issues",value:b.total.toString(),change:" 12% from last week",changeType:"positive",icon:"",color:"from-blue-400 to-blue-600"},{label:"Pending Issues",value:b.pending.toString(),change:" 8 new today",changeType:"negative",icon:"",color:"from-yellow-400 to-yellow-600"},{label:"Resolved This Month",value:b.resolved.toString(),change:" 23% improvement",changeType:"positive",icon:"",color:"from-green-400 to-green-600"},{label:"Avg Response Time",value:"2.3h",change:" 45min faster",changeType:"positive",icon:"",color:"from-purple-400 to-purple-600"}],j=t(v),V=m==="All"?j:j.filter(C=>C.status===m),S=(()=>{const C={Week:[{name:"Cleanliness",count:23},{name:"Plumbing",count:16},{name:"Electrical",count:14},{name:"Internet/WiFi",count:10},{name:"AC/Fan",count:9}],Month:[{name:"Cleanliness",count:78},{name:"Plumbing",count:52},{name:"Electrical",count:45},{name:"Internet/WiFi",count:34},{name:"AC/Fan",count:31}],Year:[{name:"Cleanliness",count:195},{name:"Plumbing",count:130},{name:"Electrical",count:113},{name:"Internet/WiFi",count:85},{name:"AC/Fan",count:78}]};return C[T]||C.Month})(),E=C=>{w(C)},k=S.map(C=>({name:C.name,count:C.count})),P=async C=>{try{await s(C,"Resolved"),_(J=>new Set([...J,C])),Ce("Issue marked as resolved successfully!","success")}catch{Ce("Failed to update issue status. Please try again.","error")}},N=C=>x.has(C.id)?"Resolved":C.status;return h.jsxs("div",{className:`main-layout bg-gray-50 ${d?"":"sidebar-expanded"}`,children:[h.jsx(qs,{isOpen:l,onClose:()=>c(!1),isCollapsed:d,onToggleCollapse:()=>f(!d)}),h.jsxs("div",{className:"main-content-area",children:[h.jsx(Hs,{onMobileMenuToggle:()=>c(!0),onSidebarToggle:()=>f(!d),isSidebarCollapsed:d}),h.jsxs("main",{className:"p-6",children:[h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:R.map((C,J)=>h.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[h.jsx("div",{className:"flex items-start justify-between mb-4",children:h.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${C.color} rounded-xl flex items-center justify-center text-2xl`,children:C.icon})}),h.jsx("div",{className:"text-sm text-gray-600 mb-2",children:C.label}),h.jsx("div",{className:"font-manrope font-bold text-3xl text-gray-800 mb-2",children:C.value}),h.jsx("div",{className:`text-sm font-semibold ${C.changeType==="positive"?"text-green-600":"text-red-600"}`,children:C.change})]},J))}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm mb-8",children:[h.jsx("div",{className:"p-6 border-b border-gray-200",children:h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[h.jsx("h2",{className:"font-manrope font-bold text-xl",children:"Recent Issues"}),h.jsx("div",{className:"flex gap-2",children:["All","Reported","In Progress","Resolved"].map(C=>h.jsx("button",{onClick:()=>g(C),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m===C?"bg-srm-blue text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:C},C))})]})}),h.jsx("div",{className:"overflow-x-auto",children:o?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-xl mb-2",children:"Loading issues..."}),h.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch the latest data."})]}):a?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-xl mb-2",children:"Error loading issues"}),h.jsx("p",{className:"text-gray-600",children:a})]}):V.length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-xl mb-2",children:e?"No results found":"No issues found"}),h.jsx("p",{className:"text-gray-600",children:e?`No issues match "${n}". Try adjusting your search terms.`:"No issues match the selected filter."})]}):h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"ID"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Issue"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Location"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Priority"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Reported"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(C=>{const J=N(C),Z=J==="Resolved";return h.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("span",{className:"font-manrope font-bold text-gray-600",children:C.id})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center text-xl",children:C.icon}),h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold text-gray-800",children:C.title}),h.jsx("div",{className:"text-sm text-gray-600",children:C.description})]})]})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:C.location}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium ${Jp(J)}`,children:J})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium ${p2(C.priority)}`,children:C.priority})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:hl(C.reportedAt)}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsxs("div",{className:"flex items-center gap-2",children:[!Z&&h.jsx("button",{onClick:()=>P(C.id),className:"px-3 py-1 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors",children:"Issue Solved"}),h.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-gray-400",children:[h.jsx("circle",{cx:"12",cy:"5",r:"2"}),h.jsx("circle",{cx:"12",cy:"12",r:"2"}),h.jsx("circle",{cx:"12",cy:"19",r:"2"})]})})]})})]},C.id)})})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsx("h3",{className:"font-manrope font-bold text-lg",children:"Issue Trends"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>E("Week"),className:`px-3 py-1 text-sm border-2 rounded-lg transition-colors ${T==="Week"?"bg-srm-blue text-white border-srm-blue":"border-gray-200 hover:border-srm-blue"}`,children:"Week"}),h.jsx("button",{onClick:()=>E("Month"),className:`px-3 py-1 text-sm border-2 rounded-lg transition-colors ${T==="Month"?"bg-srm-blue text-white border-srm-blue":"border-gray-200 hover:border-srm-blue"}`,children:"Month"}),h.jsx("button",{onClick:()=>E("Year"),className:`px-3 py-1 text-sm border-2 rounded-lg transition-colors ${T==="Year"?"bg-srm-blue text-white border-srm-blue":"border-gray-200 hover:border-srm-blue"}`,children:"Year"})]})]}),h.jsx("div",{className:"h-64",children:h.jsx(gL,{data:k,title:"Issues by Category"})})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[h.jsx("h3",{className:"font-manrope font-bold text-lg mb-6",children:"Issues by Category"}),h.jsx("div",{className:"space-y-4",children:S.map((C,J)=>h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:`hsl(${J*60}, 70%, 50%)`}}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"font-semibold text-gray-800",children:C.name}),h.jsx("span",{className:"font-manrope font-bold text-lg",children:C.count})]}),h.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${C.percentage}%`,backgroundColor:`hsl(${J*60}, 70%, 50%)`}})})]})]},C.name))})]})]})]})]})]})},y_=()=>{const{user:t}=Jt(),{getAdminIssues:e,getStudentIssues:n,updateIssueStatus:r,loading:s,error:i}=cl(),[o,a]=M.useState(!1),[l,c]=M.useState(!0),[d,f]=M.useState(!1),[m,g]=M.useState("All"),[x,_]=M.useState(""),[T,w]=M.useState(new Set),v=(t==null?void 0:t.role)==="admin",b=v?"All Issues":"My Issues",R=v?e():n(t==null?void 0:t.name);let j=R;m!=="All"&&(j=j.filter(E=>E.status===m)),x&&(j=j.filter(E=>E.title.toLowerCase().includes(x.toLowerCase())||E.description.toLowerCase().includes(x.toLowerCase())||E.location.toLowerCase().includes(x.toLowerCase())));const V={All:R.length,Reported:R.filter(E=>E.status==="Reported").length,"In Progress":R.filter(E=>E.status==="In Progress").length,Resolved:R.filter(E=>E.status==="Resolved").length},I=async E=>{try{await r(E,"Resolved"),w(k=>new Set([...k,E])),Ce("Issue marked as resolved successfully!","success")}catch{Ce("Failed to update issue status. Please try again.","error")}},S=E=>T.has(E.id)?"Resolved":E.status;return h.jsxs("div",{className:`main-layout bg-gray-50 ${l?"":"sidebar-expanded"}`,children:[h.jsx(qs,{isOpen:o,onClose:()=>a(!1),isCollapsed:l,onToggleCollapse:()=>c(!l)}),h.jsxs("div",{className:"main-content-area",children:[h.jsx(Hs,{onMobileMenuToggle:()=>a(!0),onSidebarToggle:()=>c(!l),isSidebarCollapsed:l}),h.jsxs("main",{className:"p-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"font-manrope font-bold text-3xl text-gray-800 mb-2",children:b}),h.jsx("p",{className:"text-gray-600",children:v?"Manage and track all reported issues across hostels":"Track the status of your reported issues"})]}),!v&&h.jsxs("button",{onClick:()=>f(!0),className:"bg-srm-blue text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-800 transition-colors flex items-center gap-2",children:[h.jsx(ul,{size:20}),"Report Issue"]})]}),h.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-8",children:h.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[h.jsxs("div",{className:"flex-1 relative",children:[h.jsx(Bi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),h.jsx("input",{type:"text",placeholder:"Search issues...",value:x,onChange:E=>_(E.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none"})]}),h.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(V).map(([E,k])=>h.jsxs("button",{onClick:()=>g(E),className:`px-4 py-3 rounded-xl text-sm font-medium transition-colors flex items-center gap-2 ${m===E?"bg-srm-blue text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[E,h.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${m===E?"bg-white bg-opacity-20":"bg-gray-200"}`,children:k})]},E))})]})}),h.jsx("div",{className:"space-y-4",children:s?h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-12 text-center",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-xl mb-2",children:"Loading issues..."}),h.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch the latest data."})]}):i?h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-12 text-center",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-xl mb-2",children:"Error loading issues"}),h.jsx("p",{className:"text-gray-600 mb-6",children:i})]}):j.length===0?h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-12 text-center",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-xl mb-2",children:x?"No issues found":"No issues reported yet"}),h.jsx("p",{className:"text-gray-600 mb-6",children:x?"Try adjusting your search terms or filters":v?"Issues will appear here once students start reporting them":"Start by reporting your first issue"}),!v&&!x&&h.jsx("button",{onClick:()=>f(!0),className:"bg-srm-blue text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-800 transition-colors",children:"Report Your First Issue"})]}):j.map(E=>{const k=S(E),P=k==="Resolved";return h.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-6 hover:shadow-md transition-shadow",children:h.jsx("div",{className:"flex items-center gap-4",children:h.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 flex-1",children:[h.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center text-2xl flex-shrink-0",children:E.icon}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4 mb-4",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"font-semibold text-xl text-gray-800",children:E.title}),h.jsx("span",{className:"font-manrope font-bold text-sm text-gray-500",children:E.id})]}),h.jsx("p",{className:"text-gray-600 mb-3",children:E.description}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[" ",E.location]}),h.jsxs("span",{className:"flex items-center gap-1",children:[" ",E.reportedBy]}),h.jsxs("span",{className:"flex items-center gap-1",children:[" ",hl(E.reportedAt)]}),E.assignedTo&&h.jsxs("span",{className:"flex items-center gap-1",children:[" ",E.assignedTo]})]})]}),h.jsxs("div",{className:"flex flex-col sm:items-end gap-3",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium ${Jp(k)}`,children:k}),h.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium ${p2(E.priority)}`,children:E.priority})]}),v&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:"px-4 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors",children:"Assign"}),h.jsx("button",{className:"px-4 py-2 bg-green-50 text-green-700 rounded-lg text-sm font-medium hover:bg-green-100 transition-colors",children:"Update"}),!P&&h.jsx("button",{onClick:()=>I(E.id),className:"px-4 py-2 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors",children:"Issue Solved"})]})]})]}),k==="In Progress"&&h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[h.jsx("span",{children:"Progress"}),h.jsx("span",{children:"65%"})]}),h.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:"65%"}})})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E.isPublic?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:E.isPublic?" Public":" Private"}),h.jsxs("span",{className:"text-xs text-gray-500",children:["Category: ",E.category]})]}),h.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-gray-400",children:[h.jsx("circle",{cx:"12",cy:"5",r:"2"}),h.jsx("circle",{cx:"12",cy:"12",r:"2"}),h.jsx("circle",{cx:"12",cy:"19",r:"2"})]})})]})]})]})})},E.id)})}),j.length>0&&j.length>=10&&h.jsx("div",{className:"text-center mt-8",children:h.jsx("button",{className:"bg-gray-100 text-gray-700 px-8 py-3 rounded-xl font-semibold hover:bg-gray-200 transition-colors",children:"Load More Issues"})})]})]}),d&&h.jsx(g2,{isOpen:d,onClose:()=>f(!1)})]})},vL=({isOpen:t,onClose:e,onSubmit:n,editingAnnouncement:r=null})=>{const{user:s}=Jt(),[i,o]=M.useState({title:"",content:"",priority:"Medium",targetHostel:"All"}),[a,l]=M.useState(!1),c=!!r;M.useEffect(()=>{o(r?{title:r.title,content:r.content,priority:r.priority,targetHostel:r.targetHostel}:{title:"",content:"",priority:"Medium",targetHostel:"All"})},[r]);const d=m=>{const{name:g,value:x}=m.target;o(_=>({..._,[g]:x}))},f=async m=>{m.preventDefault(),l(!0);try{await new Promise(x=>setTimeout(x,1e3));const g={...i,id:(r==null?void 0:r.id)||Date.now(),author:(s==null?void 0:s.name)||"Admin User",createdAt:(r==null?void 0:r.createdAt)||new Date,isPinned:(r==null?void 0:r.isPinned)||!1};n(g,c),Ce(c?"Announcement updated successfully!":"Announcement created successfully!","success"),c||o({title:"",content:"",priority:"Medium",targetHostel:"All"}),e()}catch{Ce("Failed to save announcement. Please try again.","error")}finally{l(!1)}};return t?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-modal-slide-in",children:[h.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Jf,{className:"text-srm-blue",size:24}),h.jsx("h3",{className:"font-sora font-bold text-2xl text-srm-blue",children:c?"Edit Announcement":"New Announcement"})]}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx(eo,{size:24})})]}),h.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Announcement Title *"}),h.jsx("input",{type:"text",name:"title",value:i.title,onChange:d,placeholder:"e.g., Water Supply Maintenance, New WiFi Password, etc.",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Message / Description *"}),h.jsx("textarea",{name:"content",value:i.content,onChange:d,placeholder:"Write the announcement message here...",rows:6,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none resize-vertical",required:!0})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority *"}),h.jsxs("select",{name:"priority",value:i.priority,onChange:d,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none",required:!0,children:[h.jsx("option",{value:"Low",children:"Low"}),h.jsx("option",{value:"Medium",children:"Medium"}),h.jsx("option",{value:"High",children:"High"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Target Audience *"}),h.jsxs("select",{name:"targetHostel",value:i.targetHostel,onChange:d,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none",required:!0,children:[h.jsx("option",{value:"All",children:"All Hostels"}),l2.map(m=>h.jsx("option",{value:m,children:m},m))]})]})]}),h.jsx("button",{type:"submit",disabled:a,className:"w-full bg-srm-blue text-white py-4 px-6 rounded-xl font-semibold hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:a?h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("div",{className:"loading"}),c?"Updating...":"Creating..."]}):c?"Update Announcement":"Create Announcement"})]})]})}):null},xL=({isOpen:t,onClose:e,onConfirm:n,title:r="Confirm Action",message:s="Are you sure you want to proceed?",confirmText:i="Confirm",cancelText:o="Cancel",type:a="danger"})=>{if(!t)return null;const l=()=>a==="danger"?"bg-red-500 hover:bg-red-600 text-white":"bg-yellow-500 hover:bg-yellow-600 text-white";return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full animate-modal-slide-in",children:[h.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(b4,{className:a==="danger"?"text-red-500":"text-yellow-500",size:24}),h.jsx("h3",{className:"font-sora font-bold text-xl text-gray-800",children:r})]}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx(eo,{size:20})})]}),h.jsxs("div",{className:"p-6",children:[h.jsx("p",{className:"text-gray-600 mb-6",children:s}),h.jsxs("div",{className:"flex gap-3 justify-end",children:[h.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:o}),h.jsx("button",{onClick:n,className:`px-4 py-2 rounded-lg font-medium transition-colors ${l()}`,children:i})]})]})]})})},v_=()=>{const{user:t}=Jt(),[e,n]=M.useState(!1),[r,s]=M.useState(!0),[i,o]=M.useState(u4),[a,l]=M.useState(!1),[c,d]=M.useState(null),[f,m]=M.useState(!1),[g,x]=M.useState(null),_=(t==null?void 0:t.role)==="admin",T=[...i].sort((E,k)=>E.isPinned&&!k.isPinned?-1:!E.isPinned&&k.isPinned?1:new Date(k.createdAt)-new Date(E.createdAt)),w=()=>{d(null),l(!0)},v=E=>{d(E),l(!0)},b=E=>{x(E),m(!0)},R=()=>{o(E=>E.filter(k=>k.id!==g.id)),Ce("Announcement deleted successfully!","success"),m(!1),x(null)},j=E=>{o(k=>k.map(P=>{if(P.id===E){const N=!P.isPinned;return Ce(N?"Announcement pinned to top!":"Announcement unpinned!","success"),{...P,isPinned:N}}return P}))},V=(E,k)=>{o(k?P=>P.map(N=>N.id===E.id?E:N):P=>[E,...P])},I=E=>{switch(E){case"High":return h.jsx(w4,{className:"text-red-500",size:20});case"Medium":return h.jsx(ax,{className:"text-yellow-500",size:20});default:return h.jsx(ax,{className:"text-blue-500",size:20})}},S=E=>{switch(E){case"High":return"border-l-red-500 bg-red-50";case"Medium":return"border-l-yellow-500 bg-yellow-50";default:return"border-l-blue-500 bg-blue-50"}};return h.jsxs("div",{className:`main-layout bg-gray-50 ${r?"":"sidebar-expanded"}`,children:[h.jsx(qs,{isOpen:e,onClose:()=>n(!1),isCollapsed:r,onToggleCollapse:()=>s(!r)}),h.jsxs("div",{className:"main-content-area",children:[h.jsx(Hs,{onMobileMenuToggle:()=>n(!0),onSidebarToggle:()=>s(!r),isSidebarCollapsed:r}),h.jsxs("main",{className:"p-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"font-manrope font-bold text-3xl text-gray-800 mb-2",children:"Announcements"}),h.jsx("p",{className:"text-gray-600",children:_?"Create and manage hostel announcements":"Stay updated with important hostel notifications"})]}),_&&h.jsxs("button",{onClick:w,className:"bg-srm-blue text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-800 transition-colors flex items-center gap-2",children:[h.jsx(ul,{size:20}),"New Announcement"]})]}),h.jsx("div",{className:"space-y-6",children:T.map(E=>h.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border-l-4 ${S(E.priority)} p-6 hover:shadow-md transition-shadow`,children:[h.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[I(E.priority),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-xl text-gray-800 mb-1",children:E.title}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[h.jsxs("span",{children:[" ",hl(E.createdAt)]}),h.jsxs("span",{children:[" ",E.author]}),h.jsxs("span",{children:[" ",E.targetHostel]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[E.isPinned&&h.jsx(V4,{className:"text-red-500",size:20}),h.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium ${E.priority==="High"?"bg-red-100 text-red-800":E.priority==="Medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:E.priority})]})]}),h.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:E.content}),_&&h.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-100",children:[h.jsx("button",{onClick:()=>v(E),className:"px-4 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors",children:"Edit"}),h.jsx("button",{onClick:()=>b(E),className:"px-4 py-2 bg-red-50 text-red-700 rounded-lg text-sm font-medium hover:bg-red-100 transition-colors",children:"Delete"}),h.jsx("button",{onClick:()=>j(E.id),className:"px-4 py-2 bg-yellow-50 text-yellow-700 rounded-lg text-sm font-medium hover:bg-yellow-100 transition-colors",children:E.isPinned?"Unpin":"Pin"})]})]},E.id))}),T.length===0&&h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-12 text-center",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-xl mb-2",children:"No announcements yet"}),h.jsx("p",{className:"text-gray-600 mb-6",children:_?"Create your first announcement to keep students informed":"Announcements will appear here when posted by administration"}),_&&h.jsx("button",{onClick:w,className:"bg-srm-blue text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-800 transition-colors",children:"Create Announcement"})]})]})]}),h.jsx(vL,{isOpen:a,onClose:()=>{l(!1),d(null)},onSubmit:V,editingAnnouncement:c}),h.jsx(xL,{isOpen:f,onClose:()=>{m(!1),x(null)},onConfirm:R,title:"Delete Announcement",message:`Are you sure you want to delete "${g==null?void 0:g.title}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"})]})},_L=({isOpen:t,onClose:e,onSubmit:n})=>{const{user:r}=Jt(),[s,i]=M.useState({itemName:"",description:"",location:"",dateTime:"",contactInfo:(r==null?void 0:r.email)||"",isAnonymous:!1}),[o,a]=M.useState([]),[l,c]=M.useState(!1),d=x=>{const{name:_,value:T,type:w,checked:v}=x.target;i(b=>({...b,[_]:w==="checkbox"?v:T}))},f=x=>{const _=Array.from(x.target.files);if(_.length+o.length>3){Ce("Maximum 3 images allowed","error");return}a(T=>[...T,..._])},m=x=>{a(_=>_.filter((T,w)=>w!==x))},g=async x=>{x.preventDefault(),c(!0);try{await new Promise(T=>setTimeout(T,1500));const _={id:Date.now(),type:"lost",title:s.itemName,description:s.description,location:s.location,reportedAt:new Date,reportedBy:s.isAnonymous?"Anonymous":(r==null?void 0:r.name)||"Student",contact:s.isAnonymous?"hidden":s.contactInfo,status:"Active",image:o.length>0?URL.createObjectURL(o[0]):null};n(_),Ce("Lost item reported successfully! We'll notify you if someone finds it.","success"),i({itemName:"",description:"",location:"",dateTime:"",contactInfo:(r==null?void 0:r.email)||"",isAnonymous:!1}),a([]),e()}catch{Ce("Failed to report lost item. Please try again.","error")}finally{c(!1)}};return t?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-modal-slide-in",children:[h.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[h.jsx("h3",{className:"font-sora font-bold text-2xl text-red-600",children:"Report Lost Item"}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx(eo,{size:24})})]}),h.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Item Name *"}),h.jsx("input",{type:"text",name:"itemName",value:s.itemName,onChange:d,placeholder:"e.g., Black Laptop Bag, Silver Watch, etc.",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Item Description *"}),h.jsx("textarea",{name:"description",value:s.description,onChange:d,placeholder:"Describe the item in detail (color, brand, distinctive features, contents, etc.)",rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none resize-vertical",required:!0})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[h.jsx(Xp,{size:16,className:"inline mr-1"}),"Last Seen Location *"]}),h.jsx("input",{type:"text",name:"location",value:s.location,onChange:d,placeholder:"e.g., Library 2nd Floor, Mess Hall, etc.",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none",required:!0})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[h.jsx(S4,{size:16,className:"inline mr-1"}),"Date & Time Lost"]}),h.jsx("input",{type:"datetime-local",name:"dateTime",value:s.dateTime,onChange:d,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contact Information *"}),h.jsx("input",{type:"email",name:"contactInfo",value:s.contactInfo,onChange:d,placeholder:"Your email address",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none",required:!0,disabled:s.isAnonymous})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Upload Photos (Optional)"}),h.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-red-500 transition-colors",children:[h.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:f,className:"hidden",id:"file-upload"}),h.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[h.jsx(d2,{size:48,className:"mx-auto text-gray-400 mb-4"}),h.jsx("div",{className:"text-gray-600 mb-2",children:"Click to upload photos of the item"}),h.jsx("div",{className:"text-sm text-gray-500",children:"Maximum 3 images, up to 10MB each"})]})]}),o.length>0&&h.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-4",children:o.map((x,_)=>h.jsxs("div",{className:"relative",children:[h.jsx("img",{src:URL.createObjectURL(x),alt:`Preview ${_+1}`,className:"w-full h-24 object-cover rounded-lg"}),h.jsx("button",{type:"button",onClick:()=>m(_),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm hover:bg-red-600",children:""})]},_))})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("input",{type:"checkbox",id:"isAnonymous",name:"isAnonymous",checked:s.isAnonymous,onChange:d,className:"w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500"}),h.jsx("label",{htmlFor:"isAnonymous",className:"text-sm text-gray-700",children:"Report anonymously (your contact info will be hidden from public view)"})]}),h.jsx("button",{type:"submit",disabled:l,className:"w-full bg-red-500 text-white py-4 px-6 rounded-xl font-semibold hover:bg-red-600 focus:outline-none focus:ring-4 focus:ring-red-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:l?h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("div",{className:"loading"}),"Reporting Lost Item..."]}):"Report Lost Item"})]})]})}):null},x_=()=>{const{user:t}=Jt(),[e,n]=M.useState(!1),[r,s]=M.useState(!0),[i,o]=M.useState("All"),[a,l]=M.useState(""),[c,d]=M.useState(!1),[f,m]=M.useState(h4),g=(t==null?void 0:t.role)==="admin",x=v=>{m(b=>[v,...b])},_=f.filter(v=>{const b=i==="All"||i==="Lost"&&v.type==="lost"||i==="Found"&&v.type==="found",R=!a||v.title.toLowerCase().includes(a.toLowerCase())||v.description.toLowerCase().includes(a.toLowerCase())||v.location.toLowerCase().includes(a.toLowerCase());return b&&R}),T=v=>v==="lost"?"bg-red-100 text-red-800 border-red-200":"bg-green-100 text-green-800 border-green-200",w=v=>v==="lost"?"":"";return h.jsxs("div",{className:`main-layout bg-gray-50 ${r?"":"sidebar-expanded"}`,children:[h.jsx(qs,{isOpen:e,onClose:()=>n(!1),isCollapsed:r,onToggleCollapse:()=>s(!r)}),h.jsxs("div",{className:"main-content-area",children:[h.jsx(Hs,{onMobileMenuToggle:()=>n(!0),onSidebarToggle:()=>s(!r),isSidebarCollapsed:r}),h.jsxs("main",{className:"p-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"font-manrope font-bold text-3xl text-gray-800 mb-2",children:"Lost & Found"}),h.jsx("p",{className:"text-gray-600",children:"Report lost items or help others find their belongings"})]}),h.jsxs("button",{onClick:()=>d(!0),className:"bg-red-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-red-600 transition-colors flex items-center gap-2",children:[h.jsx(ul,{size:20}),"Report Lost"]})]}),h.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-8",children:h.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[h.jsxs("div",{className:"flex-1 relative",children:[h.jsx(Bi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),h.jsx("input",{type:"text",placeholder:"Search items...",value:a,onChange:v=>l(v.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none"})]}),h.jsx("div",{className:"flex gap-2",children:["All","Lost","Found"].map(v=>h.jsx("button",{onClick:()=>o(v),className:`px-6 py-3 rounded-xl text-sm font-medium transition-colors ${i===v?"bg-srm-blue text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:v},v))})]})}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(v=>h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 hover:shadow-md transition-shadow",children:[h.jsx("div",{className:"flex items-start justify-between mb-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"text-2xl",children:w(v.type)}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:v.title}),h.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium border ${T(v.type)}`,children:v.type==="lost"?"Lost Item":"Found Item"})]})]})}),h.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:v.description}),h.jsxs("div",{className:"space-y-2 mb-4 text-sm text-gray-600",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Xp,{size:16}),h.jsx("span",{children:v.location})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(A4,{size:16}),h.jsx("span",{children:hl(v.reportedAt)})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(f2,{size:16}),h.jsx("span",{children:v.reportedBy})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium ${v.status==="Active"||v.status==="Available"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:v.status}),h.jsxs("div",{className:"flex gap-2",children:[v.type==="found"&&v.status==="Available"&&h.jsx("button",{className:"px-4 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors",children:"Claim"}),h.jsx("button",{className:"px-4 py-2 bg-gray-50 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-100 transition-colors",children:"Contact"})]})]}),g&&h.jsxs("div",{className:"flex gap-2 pt-4 mt-4 border-t border-gray-100",children:[h.jsx("button",{className:"px-3 py-1 bg-green-50 text-green-700 rounded text-sm hover:bg-green-100 transition-colors",children:"Verify"}),h.jsx("button",{className:"px-3 py-1 bg-red-50 text-red-700 rounded text-sm hover:bg-red-100 transition-colors",children:"Remove"})]})]},v.id))}),_.length===0&&h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-12 text-center",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-xl mb-2",children:a?"No items found":"No items reported yet"}),h.jsx("p",{className:"text-gray-600 mb-6",children:a?"Try adjusting your search terms":"Be the first to report a lost item"}),!a&&h.jsx("button",{onClick:()=>d(!0),className:"bg-red-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-red-600 transition-colors",children:"Report Lost Item"})]})]})]}),h.jsx(_L,{isOpen:c,onClose:()=>d(!1),onSubmit:x})]})},wL=({isOpen:t,onClose:e,onSubmit:n})=>{const[r,s]=M.useState({name:"",role:"",department:"Maintenance",hostelArea:"",phone:"",email:"",status:"Available",hiredDate:new Date().toISOString().split("T")[0]}),[i,o]=M.useState(!1),a=["Plumber","Electrician","Carpenter","Housekeeping","Pest Control","AC/Fan Repair","WiFi Technician","Security Guard"],l=["Maintenance","IT Support","Security","Administration"],c=["All Hostels","KARRI - Block A","KARRI - Block B","KARRI - Block C","PARRI - Block A","PARRI - Block B","PARRI - Block C","OARRI - Block A","OARRI - Block B","OARRI - Block C","MANARONJITHM - All Blocks","SANSSAI - Block A & B"],d=g=>{const{name:x,value:_}=g.target;s(T=>({...T,[x]:_}))},f=()=>{const x=["name","role","department","hostelArea","phone","email"].filter(w=>!r[w].trim());return x.length>0?(Ce(`Please fill in all required fields: ${x.join(", ")}`,"error"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)?/^(\+91[\s-]?)?[6-9]\d{9}$|^\(\+91\)\s?[6-9]\d{4}-?\d{5}$/.test(r.phone.replace(/[\s-()]/g,""))?!0:(Ce("Please enter a valid phone number","error"),!1):(Ce("Please enter a valid email address","error"),!1)},m=async g=>{if(g.preventDefault(),!!f()){o(!0);try{await new Promise(_=>setTimeout(_,1500));const x={id:Date.now(),name:r.name,role:r.role,department:r.department,hostelArea:r.hostelArea,phone:r.phone,email:r.email,status:r.status,avatar:null,hiredDate:new Date(r.hiredDate),statusColor:r.status==="Available"?"green":"red"};n(x),Ce(`${r.name} has been added to the staff successfully!`,"success"),s({name:"",role:"",department:"Maintenance",hostelArea:"",phone:"",email:"",status:"Available",hiredDate:new Date().toISOString().split("T")[0]}),e()}catch{Ce("Failed to add staff member. Please try again.","error")}finally{o(!1)}}};return t?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-modal-slide-in",children:[h.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(m2,{className:"text-orange-500",size:24}),h.jsx("h3",{className:"font-sora font-bold text-2xl text-orange-500",children:"Add New Staff Member"})]}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx(eo,{size:24})})]}),h.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name *"}),h.jsx("input",{type:"text",name:"name",value:r.name,onChange:d,placeholder:"e.g., Rajesh Kumar, Priya Sharma",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none",required:!0})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Role *"}),h.jsxs("select",{name:"role",value:r.role,onChange:d,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none",required:!0,children:[h.jsx("option",{value:"",children:"Select Role"}),a.map(g=>h.jsx("option",{value:g,children:g},g))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Department *"}),h.jsx("select",{name:"department",value:r.department,onChange:d,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none",required:!0,children:l.map(g=>h.jsx("option",{value:g,children:g},g))})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Assigned Hostel / Block *"}),h.jsxs("select",{name:"hostelArea",value:r.hostelArea,onChange:d,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none",required:!0,children:[h.jsx("option",{value:"",children:"Select Assignment"}),c.map(g=>h.jsx("option",{value:g,children:g},g))]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number *"}),h.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:d,placeholder:"(+91) 98765-43210",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address *"}),h.jsx("input",{type:"email",name:"email",value:r.email,onChange:d,placeholder:"staff.member@srmhostel.edu.in",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none",required:!0})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Availability Status *"}),h.jsxs("select",{name:"status",value:r.status,onChange:d,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none",required:!0,children:[h.jsx("option",{value:"Available",children:"Available"}),h.jsx("option",{value:"Busy",children:"Busy"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Hire Date *"}),h.jsx("input",{type:"date",name:"hiredDate",value:r.hiredDate,onChange:d,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none",required:!0})]})]}),h.jsx("button",{type:"submit",disabled:i,className:"w-full bg-orange-500 text-white py-4 px-6 rounded-xl font-semibold hover:bg-orange-600 focus:outline-none focus:ring-4 focus:ring-orange-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:i?h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("div",{className:"loading"}),"Adding Staff Member..."]}):"Add Staff Member"})]})]})}):null},bL=()=>{const{user:t}=Jt(),[e,n]=M.useState(!1),[r,s]=M.useState(!0),[i,o]=M.useState(d4),[a,l]=M.useState("All"),[c,d]=M.useState(!1),f=(t==null?void 0:t.role)==="admin",m=["All",...new Set(i.map(b=>b.role))],g=a==="All"?i:i.filter(b=>b.role===a),x=b=>b==="Available"?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200",_=b=>b==="Available"?"bg-green-500":"bg-red-500",T=b=>({Plumber:"",Electrician:"",Carpenter:"",Housekeeping:"","Pest Control":"","AC/Fan Repair":"","WiFi Technician":"","Security Guard":""})[b]||"",w=b=>{o(R=>[b,...R])},v=b=>b.split(" ").map(R=>R.charAt(0)).join("").toUpperCase().substring(0,2);return h.jsxs("div",{className:`main-layout bg-gray-50 ${r?"":"sidebar-expanded"}`,children:[h.jsx(qs,{isOpen:e,onClose:()=>n(!1),isCollapsed:r,onToggleCollapse:()=>s(!r)}),h.jsxs("div",{className:"main-content-area",children:[h.jsx(Hs,{onMobileMenuToggle:()=>n(!0),onSidebarToggle:()=>s(!r),isSidebarCollapsed:r}),h.jsxs("main",{className:"p-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsxs("h1",{className:"font-manrope font-bold text-3xl text-gray-800",children:[g.length," Staff"]}),a!=="All"&&h.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:a})]}),h.jsx("p",{className:"text-gray-600",children:"Manage hostel maintenance staff"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-xl border border-gray-200",children:[h.jsx(P4,{size:16,className:"text-gray-400"}),h.jsx("select",{value:a,onChange:b=>l(b.target.value),className:"bg-transparent border-none outline-none text-sm font-medium text-gray-700",children:m.map(b=>h.jsx("option",{value:b,children:b==="All"?"Filter":b},b))})]}),f&&h.jsxs("button",{onClick:()=>d(!0),className:"bg-orange-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-orange-600 transition-colors flex items-center gap-2",children:[h.jsx(ul,{size:20}),"Add Staff"]})]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(b=>h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:v(b.name)}),h.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 ${_(b.status)} rounded-full border-2 border-white`})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:b.name}),h.jsx("p",{className:"text-gray-600 text-sm",children:b.role})]})]}),h.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx(D4,{size:16,className:"text-gray-400"})})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-500",children:"Department"}),h.jsx("p",{className:"font-medium text-gray-800",children:b.department})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-500",children:"Hired Date"}),h.jsx("p",{className:"font-medium text-gray-800",children:F4(b.hiredDate)})]})]}),h.jsxs("div",{className:"space-y-2 mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[h.jsx(j4,{size:14}),h.jsx("span",{className:"truncate",children:b.email})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[h.jsx(O4,{size:14}),h.jsx("span",{children:b.phone})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[h.jsx(Xp,{size:14}),h.jsx("span",{className:"truncate",children:b.hostelArea})]})]}),h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${x(b.status)}`,children:[h.jsx("span",{className:"text-lg mr-2",children:T(b.role)}),b.status]})})]},b.id))}),g.length===0&&h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-12 text-center",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"font-semibold text-xl mb-2",children:"No staff found"}),h.jsx("p",{className:"text-gray-600 mb-6",children:a==="All"?"No staff members have been added yet":`No ${a} staff members found`}),f&&a==="All"&&h.jsx("button",{onClick:()=>d(!0),className:"bg-orange-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-orange-600 transition-colors",children:"Add First Staff Member"})]})]})]}),h.jsx(wL,{isOpen:c,onClose:()=>d(!1),onSubmit:w})]})},__=()=>{const{user:t}=Jt(),[e,n]=M.useState(!1),[r,s]=M.useState(!0),[i,o]=M.useState("profile"),[a,l]=M.useState(!1),[c,d]=M.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",hostel:(t==null?void 0:t.hostel)||"",block:(t==null?void 0:t.block)||"",room:(t==null?void 0:t.room)||"",phone:"+91 9876543210",emergencyContact:"+91 9876543211"}),[f,m]=M.useState({emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,issueUpdates:!0,announcements:!0,lostFoundAlerts:!0}),g=(t==null?void 0:t.role)==="admin",x=[{id:"profile",label:"Profile",icon:f2},{id:"notifications",label:"Notifications",icon:h2},{id:"security",label:"Security",icon:L4},{id:"appearance",label:"Appearance",icon:M4},{id:"language",label:"Language",icon:R4}],_=async()=>{l(!0);try{await new Promise(I=>setTimeout(I,1e3)),Ce("Profile updated successfully!","success")}catch{Ce("Failed to update profile","error")}finally{l(!1)}},T=async()=>{l(!0);try{await new Promise(I=>setTimeout(I,1e3)),Ce("Notification preferences updated!","success")}catch{Ce("Failed to update preferences","error")}finally{l(!1)}},w=()=>h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[h.jsx("img",{src:t==null?void 0:t.avatar,alt:t==null?void 0:t.name,className:"w-24 h-24 rounded-full"}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-xl mb-2",children:t==null?void 0:t.name}),h.jsx("p",{className:"text-gray-600 capitalize",children:t==null?void 0:t.role}),h.jsx("button",{className:"mt-2 text-srm-blue hover:text-blue-800 font-medium",children:"Change Photo"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),h.jsx("input",{type:"text",value:c.name,onChange:I=>d({...c,name:I.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),h.jsx("input",{type:"email",value:c.email,onChange:I=>d({...c,email:I.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none"})]}),!g&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Hostel"}),h.jsxs("select",{value:c.hostel,onChange:I=>d({...c,hostel:I.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none",children:[h.jsx("option",{value:"KARRI",children:"KARRI"}),h.jsx("option",{value:"PARRI",children:"PARRI"}),h.jsx("option",{value:"OARRI",children:"OARRI"}),h.jsx("option",{value:"MANARONJITHM",children:"MANARONJITHM"}),h.jsx("option",{value:"SANSSAI",children:"SANSSAI"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Block"}),h.jsxs("select",{value:c.block,onChange:I=>d({...c,block:I.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none",children:[h.jsx("option",{value:"Block A",children:"Block A"}),h.jsx("option",{value:"Block B",children:"Block B"}),h.jsx("option",{value:"Block C",children:"Block C"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Room Number"}),h.jsx("input",{type:"text",value:c.room,onChange:I=>d({...c,room:I.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number"}),h.jsx("input",{type:"tel",value:c.phone,onChange:I=>d({...c,phone:I.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Emergency Contact"}),h.jsx("input",{type:"tel",value:c.emergencyContact,onChange:I=>d({...c,emergencyContact:I.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none"})]})]}),h.jsxs("button",{onClick:_,disabled:a,className:"bg-srm-blue text-white px-8 py-3 rounded-xl font-semibold hover:bg-blue-800 transition-colors disabled:opacity-50 flex items-center gap-2",children:[a?h.jsx("div",{className:"loading"}):h.jsx(ux,{size:20}),"Save Changes"]})]}),v=()=>h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Notification Preferences"}),h.jsx("div",{className:"space-y-4",children:Object.entries(f).map(([I,S])=>h.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium capitalize",children:I.replace(/([A-Z])/g," $1").trim()}),h.jsxs("p",{className:"text-sm text-gray-600",children:[I==="emailNotifications"&&"Receive notifications via email",I==="pushNotifications"&&"Receive push notifications in browser",I==="smsNotifications"&&"Receive SMS notifications",I==="issueUpdates"&&"Get notified about issue status updates",I==="announcements"&&"Receive hostel announcements",I==="lostFoundAlerts"&&"Get alerts for lost & found items"]})]}),h.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:S,onChange:E=>m({...f,[I]:E.target.checked}),className:"sr-only peer"}),h.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-srm-blue"})]})]},I))})]}),h.jsxs("button",{onClick:T,disabled:a,className:"bg-srm-blue text-white px-8 py-3 rounded-xl font-semibold hover:bg-blue-800 transition-colors disabled:opacity-50 flex items-center gap-2",children:[a?h.jsx("div",{className:"loading"}):h.jsx(ux,{size:20}),"Save Preferences"]})]}),b=()=>h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Password & Security"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Current Password"}),h.jsx("input",{type:"password",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),h.jsx("input",{type:"password",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New Password"}),h.jsx("input",{type:"password",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-srm-blue focus:outline-none"})]})]})]}),h.jsx("button",{className:"bg-srm-blue text-white px-8 py-3 rounded-xl font-semibold hover:bg-blue-800 transition-colors",children:"Update Password"})]}),R=()=>h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Theme Preferences"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"p-4 border-2 border-srm-blue rounded-xl bg-blue-50",children:[h.jsx("div",{className:"w-full h-20 bg-white rounded-lg mb-3"}),h.jsx("h4",{className:"font-medium",children:"Light Theme"}),h.jsx("p",{className:"text-sm text-gray-600",children:"Default light theme"})]}),h.jsxs("div",{className:"p-4 border-2 border-gray-200 rounded-xl hover:border-gray-300 cursor-pointer",children:[h.jsx("div",{className:"w-full h-20 bg-gray-800 rounded-lg mb-3"}),h.jsx("h4",{className:"font-medium",children:"Dark Theme"}),h.jsx("p",{className:"text-sm text-gray-600",children:"Easy on the eyes"})]}),h.jsxs("div",{className:"p-4 border-2 border-gray-200 rounded-xl hover:border-gray-300 cursor-pointer",children:[h.jsx("div",{className:"w-full h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg mb-3"}),h.jsx("h4",{className:"font-medium",children:"Auto"}),h.jsx("p",{className:"text-sm text-gray-600",children:"System preference"})]})]})]})}),j=()=>h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Language Settings"}),h.jsx("div",{className:"space-y-3",children:["English","Tamil","Hindi"].map(I=>h.jsxs("label",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[h.jsx("input",{type:"radio",name:"language",defaultChecked:I==="English",className:"w-4 h-4 text-srm-blue border-gray-300 focus:ring-srm-blue"}),h.jsx("span",{className:"font-medium",children:I})]},I))})]})}),V=()=>{switch(i){case"profile":return w();case"notifications":return v();case"security":return b();case"appearance":return R();case"language":return j();default:return w()}};return h.jsxs("div",{className:`main-layout bg-gray-50 ${r?"":"sidebar-expanded"}`,children:[h.jsx(qs,{isOpen:e,onClose:()=>n(!1),isCollapsed:r,onToggleCollapse:()=>s(!r)}),h.jsxs("div",{className:"main-content-area",children:[h.jsx(Hs,{onMobileMenuToggle:()=>n(!0),onSidebarToggle:()=>s(!r),isSidebarCollapsed:r}),h.jsxs("main",{className:"p-6",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"font-manrope font-bold text-3xl text-gray-800 mb-2",children:"Settings"}),h.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[h.jsx("div",{className:"lg:col-span-1",children:h.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4",children:h.jsx("nav",{className:"space-y-2",children:x.map(I=>{const S=I.icon;return h.jsxs("button",{onClick:()=>o(I.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-colors ${i===I.id?"bg-srm-blue text-white":"text-gray-600 hover:bg-gray-100"}`,children:[h.jsx(S,{size:20}),I.label]},I.id)})})})}),h.jsx("div",{className:"lg:col-span-3",children:h.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-8",children:V()})})]})]})]})]})},dn=({children:t,requiredRole:e})=>{const{user:n,loading:r}=Jt();return r?h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsx("div",{className:"loading"})}):n?e&&n.role!==e?h.jsx(If,{to:"/login",replace:!0}):t:h.jsx(If,{to:"/login",replace:!0})};function EL(){return h.jsx(oC,{children:h.jsx(p4,{children:h.jsx(g4,{children:h.jsx(nC,{children:h.jsxs("div",{className:"App",children:[h.jsx(y4,{}),h.jsxs(GA,{children:[h.jsx(Rt,{path:"/login",element:h.jsx(z4,{})}),h.jsx(Rt,{path:"/",element:h.jsx(If,{to:"/login",replace:!0})}),h.jsx(Rt,{path:"/student",element:h.jsx(dn,{requiredRole:"student",children:h.jsx(B4,{})})}),h.jsx(Rt,{path:"/student/issues",element:h.jsx(dn,{requiredRole:"student",children:h.jsx(y_,{})})}),h.jsx(Rt,{path:"/student/announcements",element:h.jsx(dn,{requiredRole:"student",children:h.jsx(v_,{})})}),h.jsx(Rt,{path:"/student/lost-found",element:h.jsx(dn,{requiredRole:"student",children:h.jsx(x_,{})})}),h.jsx(Rt,{path:"/student/settings",element:h.jsx(dn,{requiredRole:"student",children:h.jsx(__,{})})}),h.jsx(Rt,{path:"/admin",element:h.jsx(dn,{requiredRole:"admin",children:h.jsx(yL,{})})}),h.jsx(Rt,{path:"/admin/issues",element:h.jsx(dn,{requiredRole:"admin",children:h.jsx(y_,{})})}),h.jsx(Rt,{path:"/admin/announcements",element:h.jsx(dn,{requiredRole:"admin",children:h.jsx(v_,{})})}),h.jsx(Rt,{path:"/admin/lost-found",element:h.jsx(dn,{requiredRole:"admin",children:h.jsx(x_,{})})}),h.jsx(Rt,{path:"/admin/staff",element:h.jsx(dn,{requiredRole:"admin",children:h.jsx(bL,{})})}),h.jsx(Rt,{path:"/admin/settings",element:h.jsx(dn,{requiredRole:"admin",children:h.jsx(__,{})})})]})]})})})})})}Rd.createRoot(document.getElementById("root")).render(h.jsx(R_.StrictMode,{children:h.jsx(EL,{})}));
